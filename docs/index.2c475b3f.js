function e(e,t,i,r){Object.defineProperty(e,t,{get:i,set:r,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function i(e){Object.defineProperty(e,"__esModule",{value:!0,configurable:!0})}var r={},n={},o=t.parcelRequireb6d6;null==o&&((o=function(e){if(e in r)return r[e].exports;if(e in n){var t=n[e];delete n[e];var i={id:e,exports:{}};return r[e]=i,t.call(i.exports,i,i.exports),i.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){n[e]=t},t.parcelRequireb6d6=o),o.register("dRo73",(function(t,i){var r,n;e(t.exports,"register",(()=>r),(e=>r=e)),e(t.exports,"resolve",(()=>n),(e=>n=e));var o={};r=function(e){for(var t=Object.keys(e),i=0;i<t.length;i++)o[t[i]]=e[t[i]]},n=function(e){var t=o[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),o.register("lSsD0",(function(e,t){e.exports=function(e,t){var i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t);if(!i)throw new Error("This browser does not support webGL. Try using the canvas renderer");return i}})),o.register("eGvPT",(function(e,t){e.exports=function(e,t,i){var r;if(i){var n=i.tempAttribState,o=i.attribState;for(r=0;r<n.length;r++)n[r]=!1;for(r=0;r<t.length;r++)n[t[r].attribute.location]=!0;for(r=0;r<o.length;r++)o[r]!==n[r]&&(o[r]=n[r],i.attribState[r]?e.enableVertexAttribArray(r):e.disableVertexAttribArray(r))}else for(r=0;r<t.length;r++){var s=t[r];e.enableVertexAttribArray(s.attribute.location)}}})),o.register("2t3Dk",(function(e,t){var i=new ArrayBuffer(0),r=function(e,t,r,n){this.gl=e,this.buffer=e.createBuffer(),this.type=t||e.ARRAY_BUFFER,this.drawType=n||e.STATIC_DRAW,this.data=i,r&&this.upload(r),this._updateID=0};r.prototype.upload=function(e,t,i){i||this.bind();var r=this.gl;e=e||this.data,t=t||0,this.data.byteLength>=e.byteLength?r.bufferSubData(this.type,t,e):r.bufferData(this.type,e,this.drawType),this.data=e},r.prototype.bind=function(){this.gl.bindBuffer(this.type,this.buffer)},r.createVertexBuffer=function(e,t,i){return new r(e,e.ARRAY_BUFFER,t,i)},r.createIndexBuffer=function(e,t,i){return new r(e,e.ELEMENT_ARRAY_BUFFER,t,i)},r.create=function(e,t,i,n){return new r(e,t,i,n)},r.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},e.exports=r})),o.register("aAB9m",(function(e,t){var i=o("cKSuu"),r=function(e,t,i){this.gl=e,this.framebuffer=e.createFramebuffer(),this.stencil=null,this.texture=null,this.width=t||100,this.height=i||100};r.prototype.enableTexture=function(e){var t=this.gl;this.texture=e||new i(t),this.texture.bind(),this.bind(),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture.texture,0)},r.prototype.enableStencil=function(){if(!this.stencil){var e=this.gl;this.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.stencil),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,this.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,this.width,this.height)}},r.prototype.clear=function(e,t,i,r){this.bind();var n=this.gl;n.clearColor(e,t,i,r),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT)},r.prototype.bind=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer)},r.prototype.unbind=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,null)},r.prototype.resize=function(e,t){var i=this.gl;this.width=e,this.height=t,this.texture&&this.texture.uploadData(null,e,t),this.stencil&&(i.bindRenderbuffer(i.RENDERBUFFER,this.stencil),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e,t))},r.prototype.destroy=function(){var e=this.gl;this.texture&&this.texture.destroy(),e.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},r.createRGBA=function(e,t,n,o){var s=i.fromData(e,null,t,n);s.enableNearestScaling(),s.enableWrapClamp();var a=new r(e,t,n);return a.enableTexture(s),a.unbind(),a},r.createFloat32=function(e,t,n,o){var s=new i.fromData(e,o,t,n);s.enableNearestScaling(),s.enableWrapClamp();var a=new r(e,t,n);return a.enableTexture(s),a.unbind(),a},e.exports=r})),o.register("cKSuu",(function(e,t){var i=function(e,t,i,r,n){this.gl=e,this.texture=e.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=t||-1,this.height=i||-1,this.format=r||e.RGBA,this.type=n||e.UNSIGNED_BYTE};i.prototype.upload=function(e){this.bind();var t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var i=e.videoWidth||e.width,r=e.videoHeight||e.height;r!==this.height||i!==this.width?t.texImage2D(t.TEXTURE_2D,0,this.format,this.format,this.type,e):t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.format,this.type,e),this.width=i,this.height=r};var r=!1;i.prototype.uploadData=function(e,t,i){this.bind();var n=this.gl;if(e instanceof Float32Array){if(!r){if(!n.getExtension("OES_texture_float"))throw new Error("floating point textures not available");r=!0}this.type=n.FLOAT}else this.type=this.type||n.UNSIGNED_BYTE;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),t!==this.width||i!==this.height?n.texImage2D(n.TEXTURE_2D,0,this.format,t,i,0,this.format,this.type,e||null):n.texSubImage2D(n.TEXTURE_2D,0,0,0,t,i,this.format,this.type,e||null),this.width=t,this.height=i},i.prototype.bind=function(e){var t=this.gl;void 0!==e&&t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,this.texture)},i.prototype.unbind=function(){var e=this.gl;e.bindTexture(e.TEXTURE_2D,null)},i.prototype.minFilter=function(e){var t=this.gl;this.bind(),this.mipmap?t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR_MIPMAP_LINEAR:t.NEAREST_MIPMAP_NEAREST):t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR:t.NEAREST)},i.prototype.magFilter=function(e){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e?t.LINEAR:t.NEAREST)},i.prototype.enableMipmap=function(){var e=this.gl;this.bind(),this.mipmap=!0,e.generateMipmap(e.TEXTURE_2D)},i.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},i.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},i.prototype.enableWrapClamp=function(){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)},i.prototype.enableWrapRepeat=function(){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)},i.prototype.enableWrapMirrorRepeat=function(){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.MIRRORED_REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.MIRRORED_REPEAT)},i.prototype.destroy=function(){this.gl.deleteTexture(this.texture)},i.fromSource=function(e,t,r){var n=new i(e);return n.premultiplyAlpha=r||!1,n.upload(t),n},i.fromData=function(e,t,r,n){var o=new i(e);return o.uploadData(t,r,n),o},e.exports=i})),o.register("c95Ww",(function(e,t){var i=o("dvWU4"),r=o("dvjSJ"),n=o("7FgsK"),s=o("aB2J2"),a=o("b651Q"),h=function(e,t,o,h,u){this.gl=e,h&&(t=s(t,h),o=s(o,h)),this.program=i(e,t,o,u),this.attributes=r(e,this.program),this.uniformData=n(e,this.program),this.uniforms=a(e,this.uniformData)};h.prototype.bind=function(){return this.gl.useProgram(this.program),this},h.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null,this.gl.deleteProgram(this.program)},e.exports=h})),o.register("dvWU4",(function(e,t){var i=function(e,t,i){var r=e.createShader(t);return e.shaderSource(r,i),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)?r:(console.log(e.getShaderInfoLog(r)),null)};e.exports=function(e,t,r,n){var o=i(e,e.VERTEX_SHADER,t),s=i(e,e.FRAGMENT_SHADER,r),a=e.createProgram();if(e.attachShader(a,o),e.attachShader(a,s),n)for(var h in n)e.bindAttribLocation(a,n[h],h);return e.linkProgram(a),e.getProgramParameter(a,e.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",e.getProgramParameter(a,e.VALIDATE_STATUS)),console.error("gl.getError()",e.getError()),""!==e.getProgramInfoLog(a)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(a)),e.deleteProgram(a),a=null),e.deleteShader(o),e.deleteShader(s),a}})),o.register("dvjSJ",(function(e,t){var i=o("6igTm"),r=o("gZaGv"),n=function(e,t,i,r){gl.vertexAttribPointer(this.location,this.size,e||gl.FLOAT,t||!1,i||0,r||0)};e.exports=function(e,t){for(var o={},s=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),a=0;a<s;a++){var h=e.getActiveAttrib(t,a),u=i(e,h.type);o[h.name]={type:u,size:r(u),location:e.getAttribLocation(t,h.name),pointer:n}}return o}})),o.register("6igTm",(function(e,t){var i=null,r={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};e.exports=function(e,t){if(!i){var n=Object.keys(r);i={};for(var o=0;o<n.length;++o){var s=n[o];i[e[s]]=r[s]}}return i[t]}})),o.register("gZaGv",(function(e,t){var i={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};e.exports=function(e){return i[e]}})),o.register("7FgsK",(function(e,t){var i=o("6igTm"),r=o("aoT6T");e.exports=function(e,t){for(var n={},o=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),s=0;s<o;s++){var a=e.getActiveUniform(t,s),h=a.name.replace(/\[.*?\]/,""),u=i(e,a.type);n[h]={type:u,size:a.size,location:e.getUniformLocation(t,h),value:r(u,a.size)}}return n}})),o.register("aoT6T",(function(e,t){var i=function(e){for(var t=new Array(e),i=0;i<t.length;i++)t[i]=!1;return t};e.exports=function(e,t){switch(e){case"float":case"int":case"sampler2D":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"bool":return!1;case"bvec2":return i(2*t);case"bvec3":return i(3*t);case"bvec4":return i(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}}})),o.register("aB2J2",(function(e,t){e.exports=function(e,t){return"precision"!==e.substring(0,9)?"precision "+t+" float;\n"+e:e}})),o.register("b651Q",(function(e,t){var i=function(e){return function(){return this.data[e].value}},r={float:function(e,t,i){e.uniform1f(t,i)},vec2:function(e,t,i){e.uniform2f(t,i[0],i[1])},vec3:function(e,t,i){e.uniform3f(t,i[0],i[1],i[2])},vec4:function(e,t,i){e.uniform4f(t,i[0],i[1],i[2],i[3])},int:function(e,t,i){e.uniform1i(t,i)},ivec2:function(e,t,i){e.uniform2i(t,i[0],i[1])},ivec3:function(e,t,i){e.uniform3i(t,i[0],i[1],i[2])},ivec4:function(e,t,i){e.uniform4i(t,i[0],i[1],i[2],i[3])},bool:function(e,t,i){e.uniform1i(t,i)},bvec2:function(e,t,i){e.uniform2i(t,i[0],i[1])},bvec3:function(e,t,i){e.uniform3i(t,i[0],i[1],i[2])},bvec4:function(e,t,i){e.uniform4i(t,i[0],i[1],i[2],i[3])},mat2:function(e,t,i){e.uniformMatrix2fv(t,!1,i)},mat3:function(e,t,i){e.uniformMatrix3fv(t,!1,i)},mat4:function(e,t,i){e.uniformMatrix4fv(t,!1,i)},sampler2D:function(e,t,i){e.uniform1i(t,i)}},n={float:function(e,t,i){e.uniform1fv(t,i)},vec2:function(e,t,i){e.uniform2fv(t,i)},vec3:function(e,t,i){e.uniform3fv(t,i)},vec4:function(e,t,i){e.uniform4fv(t,i)},int:function(e,t,i){e.uniform1iv(t,i)},ivec2:function(e,t,i){e.uniform2iv(t,i)},ivec3:function(e,t,i){e.uniform3iv(t,i)},ivec4:function(e,t,i){e.uniform4iv(t,i)},bool:function(e,t,i){e.uniform1iv(t,i)},bvec2:function(e,t,i){e.uniform2iv(t,i)},bvec3:function(e,t,i){e.uniform3iv(t,i)},bvec4:function(e,t,i){e.uniform4iv(t,i)},sampler2D:function(e,t,i){e.uniform1iv(t,i)}};function o(e,t){return function(i){this.data[e].value=i;var o=this.data[e].location;1===t.size?r[t.type](this.gl,o,i):n[t.type](this.gl,o,i)}}function s(e,t){for(var i=t,r=0;r<e.length-1;r++){var n=i[e[r]]||{data:{}};i[e[r]]=n,i=n}return i}e.exports=function(e,t){var r={data:{}};r.gl=e;for(var n=Object.keys(t),a=0;a<n.length;a++){var h=n[a],u=h.split("."),l=u[u.length-1],c=s(u,r),d=t[h];c.data[l]=d,c.gl=e,Object.defineProperty(c,l,{get:i(l),set:o(l,d)})}return r}})),o.register("6sAgA",(function(e,t){var i=o("eGvPT");function r(e,t){if(this.nativeVaoExtension=null,r.FORCE_NATIVE||(this.nativeVaoExtension=e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=t,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var i=e.getParameter(e.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(i),attribState:new Array(i)}}this.gl=e,this.attributes=[],this.indexBuffer=null,this.dirty=!1}r.prototype.constructor=r,e.exports=r,r.FORCE_NATIVE=!1,r.prototype.bind=function(){if(this.nativeVao){if(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty)return this.dirty=!1,this.activate(),this;this.indexBuffer&&this.indexBuffer.bind()}else this.activate();return this},r.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},r.prototype.activate=function(){for(var e=this.gl,t=null,r=0;r<this.attributes.length;r++){var n=this.attributes[r];t!==n.buffer&&(n.buffer.bind(),t=n.buffer),e.vertexAttribPointer(n.attribute.location,n.attribute.size,n.type||e.FLOAT,n.normalized||!1,n.stride||0,n.start||0)}return i(e,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this},r.prototype.addAttribute=function(e,t,i,r,n,o){return this.attributes.push({buffer:e,attribute:t,location:t.location,type:i||this.gl.FLOAT,normalized:r||!1,stride:n||0,start:o||0}),this.dirty=!0,this},r.prototype.addIndex=function(e){return this.indexBuffer=e,this.dirty=!0,this},r.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},r.prototype.draw=function(e,t,i){var r=this.gl;return this.indexBuffer?r.drawElements(e,t||this.indexBuffer.data.length,r.UNSIGNED_SHORT,2*(i||0)):r.drawArrays(e,i,t||this.getSize()),this},r.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null},r.prototype.getSize=function(){var e=this.attributes[0];return e.buffer.data.length/(e.stride/4||e.attribute.size)}})),o.register("2hFDF",(function(e,t){e.exports={compileProgram:o("dvWU4"),defaultValue:o("aoT6T"),extractAttributes:o("dvjSJ"),extractUniforms:o("7FgsK"),generateUniformAccessObject:o("b651Q"),setPrecision:o("aB2J2"),mapSize:o("gZaGv"),mapType:o("6igTm")}})),o.register("iuZoh",(function(e,i){!function(r){var n=i&&!i.nodeType&&i,o=e&&!e.nodeType&&e,s="object"==typeof t&&t;s.global!==s&&s.window!==s&&s.self!==s||(r=s);var a,h,u=2147483647,l=36,c=/^xn--/,d=/[^\x20-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},g=Math.floor,m=String.fromCharCode;function y(e){throw RangeError(p[e])}function v(e,t){for(var i=e.length,r=[];i--;)r[i]=t(e[i]);return r}function b(e,t){var i=e.split("@"),r="";return i.length>1&&(r=i[0]+"@",e=i[1]),r+v((e=e.replace(f,".")).split("."),t).join(".")}function x(e){for(var t,i,r=[],n=0,o=e.length;n<o;)(t=e.charCodeAt(n++))>=55296&&t<=56319&&n<o?56320==(64512&(i=e.charCodeAt(n++)))?r.push(((1023&t)<<10)+(1023&i)+65536):(r.push(t),n--):r.push(t);return r}function w(e){return v(e,(function(e){var t="";return e>65535&&(t+=m((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=m(e)})).join("")}function _(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function T(e,t,i){var r=0;for(e=i?g(e/700):e>>1,e+=g(e/t);e>455;r+=l)e=g(e/35);return g(r+36*e/(e+38))}function S(e){var t,i,r,n,o,s,a,h,c,d,f,p=[],m=e.length,v=0,b=128,x=72;for((i=e.lastIndexOf("-"))<0&&(i=0),r=0;r<i;++r)e.charCodeAt(r)>=128&&y("not-basic"),p.push(e.charCodeAt(r));for(n=i>0?i+1:0;n<m;){for(o=v,s=1,a=l;n>=m&&y("invalid-input"),((h=(f=e.charCodeAt(n++))-48<10?f-22:f-65<26?f-65:f-97<26?f-97:l)>=l||h>g((u-v)/s))&&y("overflow"),v+=h*s,!(h<(c=a<=x?1:a>=x+26?26:a-x));a+=l)s>g(u/(d=l-c))&&y("overflow"),s*=d;x=T(v-o,t=p.length+1,0==o),g(v/t)>u-b&&y("overflow"),b+=g(v/t),v%=t,p.splice(v++,0,b)}return w(p)}function E(e){var t,i,r,n,o,s,a,h,c,d,f,p,v,b,w,S=[];for(p=(e=x(e)).length,t=128,i=0,o=72,s=0;s<p;++s)(f=e[s])<128&&S.push(m(f));for(r=n=S.length,n&&S.push("-");r<p;){for(a=u,s=0;s<p;++s)(f=e[s])>=t&&f<a&&(a=f);for(a-t>g((u-i)/(v=r+1))&&y("overflow"),i+=(a-t)*v,t=a,s=0;s<p;++s)if((f=e[s])<t&&++i>u&&y("overflow"),f==t){for(h=i,c=l;!(h<(d=c<=o?1:c>=o+26?26:c-o));c+=l)w=h-d,b=l-d,S.push(m(_(d+w%b,0))),h=g(w/b);S.push(m(_(h,0))),o=T(i,v,r==n),i=0,++r}++i,++t}return S.join("")}if(a={version:"1.3.2",ucs2:{decode:x,encode:w},decode:S,encode:E,toASCII:function(e){return b(e,(function(e){return d.test(e)?"xn--"+E(e):e}))},toUnicode:function(e){return b(e,(function(e){return c.test(e)?S(e.slice(4).toLowerCase()):e}))}},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",(function(){return a}));else if(n&&o)if(e.exports==n)o.exports=a;else for(h in a)a.hasOwnProperty(h)&&(n[h]=a[h]);else r.punycode=a}(this)})),o.register("bu5IZ",(function(e,t){function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,o){t=t||"&",n=n||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\+/g;e=e.split(t);var h=1e3;o&&"number"==typeof o.maxKeys&&(h=o.maxKeys);var u=e.length;h>0&&u>h&&(u=h);for(var l=0;l<u;++l){var c,d,f,p,g=e[l].replace(a,"%20"),m=g.indexOf(n);m>=0?(c=g.substr(0,m),d=g.substr(m+1)):(c=g,d=""),f=decodeURIComponent(c),p=decodeURIComponent(d),i(s,f)?r(s[f])?s[f].push(p):s[f]=[s[f],p]:s[f]=p}return s};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}})),o.register("4gCs1",(function(e,t){var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,s,a){return t=t||"&",s=s||"=",null===e&&(e=void 0),"object"==typeof e?n(o(e),(function(o){var a=encodeURIComponent(i(o))+s;return r(e[o])?n(e[o],(function(e){return a+encodeURIComponent(i(e))})).join(t):a+encodeURIComponent(i(e[o]))})).join(t):a?encodeURIComponent(i(a))+s+encodeURIComponent(i(e)):""};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function n(e,t){if(e.map)return e.map(t);for(var i=[],r=0;r<e.length;r++)i.push(t(e[r],r));return i}var o=Object.keys||function(e){var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.push(i);return t}})),o.register("g5jfO",(function(e,t){e.exports=new URL(o("dRo73").resolve("7SBAf"),import.meta.url).toString()})),o.register("1fX8z",(function(e,t){e.exports=new URL(o("dRo73").resolve("iwfgr"),import.meta.url).toString()})),o.register("41TBC",(function(e,t){e.exports=new URL(o("dRo73").resolve("bMQty"),import.meta.url).toString()})),o.register("qCFne",(function(e,t){e.exports=new URL(o("dRo73").resolve("5yoqN"),import.meta.url).toString()})),o.register("hwzqt",(function(e,t){e.exports=new URL(o("dRo73").resolve("5M7cr"),import.meta.url).toString()})),o.register("dzEUD",(function(e,t){e.exports=new URL(o("dRo73").resolve("8Z6K7"),import.meta.url).toString()})),o.register("3h3ny",(function(e,t){e.exports=new URL(o("dRo73").resolve("hXlM3"),import.meta.url).toString()})),o.register("gGuSc",(function(e,t){e.exports=new URL(o("dRo73").resolve("2H4ek"),import.meta.url).toString()})),o.register("gtcom",(function(e,t){e.exports=new URL(o("dRo73").resolve("ece9r"),import.meta.url).toString()})),o.register("bOzvh",(function(e,t){e.exports=new URL(o("dRo73").resolve("c0uS2"),import.meta.url).toString()})),o.register("jPTuP",(function(e,t){e.exports=new URL(o("dRo73").resolve("f5La2"),import.meta.url).toString()})),o.register("kqGZc",(function(e,t){e.exports=new URL(o("dRo73").resolve("kLCVX"),import.meta.url).toString()})),o.register("fM2UY",(function(e,t){e.exports=new URL(o("dRo73").resolve("3dcDo"),import.meta.url).toString()})),o.register("cs1fq",(function(e,t){e.exports=new URL(o("dRo73").resolve("f4j01"),import.meta.url).toString()})),o.register("ekuSj",(function(e,t){e.exports=new URL(o("dRo73").resolve("OmOH0"),import.meta.url).toString()})),o.register("4WvsE",(function(e,t){e.exports=new URL(o("dRo73").resolve("bRCwD"),import.meta.url).toString()})),o.register("1aXZN",(function(e,t){e.exports=new URL(o("dRo73").resolve("15zkB"),import.meta.url).toString()})),o.register("kL685",(function(e,t){e.exports=new URL(o("dRo73").resolve("5eOVt"),import.meta.url).toString()})),o.register("6gG1Z",(function(e,t){e.exports=new URL(o("dRo73").resolve("arGm5"),import.meta.url).toString()})),o.register("eKWlY",(function(e,t){e.exports=new URL(o("dRo73").resolve("dLQ9l"),import.meta.url).toString()})),o.register("kcSIJ",(function(e,t){e.exports=new URL(o("dRo73").resolve("8fX36"),import.meta.url).toString()})),o.register("c0I6q",(function(e,t){e.exports=new URL(o("dRo73").resolve("duPPE"),import.meta.url).toString()})),o.register("igFQn",(function(e,t){e.exports=new URL(o("dRo73").resolve("3saTC"),import.meta.url).toString()})),o.register("6Vxnn",(function(e,t){e.exports=new URL(o("dRo73").resolve("fHqDn"),import.meta.url).toString()})),o.register("9SWp7",(function(e,t){e.exports=new URL(o("dRo73").resolve("epSAR"),import.meta.url).toString()})),o.register("a5wbl",(function(e,t){e.exports=new URL(o("dRo73").resolve("k4aQK"),import.meta.url).toString()})),o.register("4N3TR",(function(e,t){e.exports=new URL(o("dRo73").resolve("52NtN"),import.meta.url).toString()})),o.register("97OJp",(function(e,t){e.exports=new URL(o("dRo73").resolve("c2Uqa"),import.meta.url).toString()})),o.register("95v6M",(function(e,t){e.exports=new URL(o("dRo73").resolve("OGniT"),import.meta.url).toString()})),o.register("1P8On",(function(e,t){e.exports=new URL(o("dRo73").resolve("jE89I"),import.meta.url).toString()})),o.register("5KCX6",(function(e,t){e.exports=new URL(o("dRo73").resolve("iVRez"),import.meta.url).toString()})),o.register("iDizv",(function(e,t){e.exports=new URL(o("dRo73").resolve("36t3b"),import.meta.url).toString()})),o.register("eck8P",(function(e,t){e.exports=new URL(o("dRo73").resolve("chZqB"),import.meta.url).toString()})),o.register("3hfPB",(function(e,t){e.exports=new URL(o("dRo73").resolve("89ydx"),import.meta.url).toString()})),o.register("4zWuz",(function(e,t){e.exports=new URL(o("dRo73").resolve("ffZz4"),import.meta.url).toString()})),o.register("5fkmL",(function(e,t){e.exports=new URL(o("dRo73").resolve("beS7y"),import.meta.url).toString()})),o.register("cHSQY",(function(e,t){e.exports=new URL(o("dRo73").resolve("bJCRm"),import.meta.url).toString()})),o.register("2Qh4D",(function(e,t){e.exports=new URL(o("dRo73").resolve("dhcIs"),import.meta.url).toString()})),o.register("jCXvp",(function(e,t){e.exports=new URL(o("dRo73").resolve("j0npP"),import.meta.url).toString()})),o.register("9q1Y4",(function(e,t){e.exports=new URL(o("dRo73").resolve("jGCoj"),import.meta.url).toString()})),o.register("eyRjH",(function(e,t){e.exports=new URL(o("dRo73").resolve("cblaC"),import.meta.url).toString()})),o.register("5LDGl",(function(e,t){e.exports=new URL(o("dRo73").resolve("eXT1y"),import.meta.url).toString()})),o.register("3lgbd",(function(e,t){e.exports=new URL(o("dRo73").resolve("6Flhu"),import.meta.url).toString()})),o.register("dv6Fs",(function(e,t){e.exports=new URL(o("dRo73").resolve("9YtyO"),import.meta.url).toString()})),o.register("3nvld",(function(e,t){e.exports=new URL(o("dRo73").resolve("eACO5"),import.meta.url).toString()})),o.register("5rILB",(function(e,t){e.exports=new URL(o("dRo73").resolve("YoplX"),import.meta.url).toString()})),o.register("eyX3l",(function(e,t){e.exports=JSON.parse('{"frames":{"0001.png":{"frame":{"x":1,"y":1,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0002.png":{"frame":{"x":206,"y":1,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0003.png":{"frame":{"x":411,"y":1,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0004.png":{"frame":{"x":616,"y":1,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0005.png":{"frame":{"x":821,"y":1,"w":203,"h":104},"rotated":true,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0006.png":{"frame":{"x":1,"y":107,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0007.png":{"frame":{"x":206,"y":107,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0008.png":{"frame":{"x":411,"y":107,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0009.png":{"frame":{"x":616,"y":107,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0010.png":{"frame":{"x":1,"y":213,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0011.png":{"frame":{"x":206,"y":213,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0012.png":{"frame":{"x":411,"y":213,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0013.png":{"frame":{"x":616,"y":213,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0014.png":{"frame":{"x":821,"y":206,"w":203,"h":104},"rotated":true,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0015.png":{"frame":{"x":1,"y":319,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0016.png":{"frame":{"x":206,"y":319,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0017.png":{"frame":{"x":411,"y":319,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0018.png":{"frame":{"x":616,"y":319,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0019.png":{"frame":{"x":1,"y":425,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0020.png":{"frame":{"x":206,"y":425,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0021.png":{"frame":{"x":411,"y":425,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0022.png":{"frame":{"x":616,"y":425,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0023.png":{"frame":{"x":821,"y":411,"w":203,"h":104},"rotated":true,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0024.png":{"frame":{"x":1,"y":531,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0025.png":{"frame":{"x":206,"y":531,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0026.png":{"frame":{"x":411,"y":531,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0027.png":{"frame":{"x":616,"y":531,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0028.png":{"frame":{"x":1,"y":637,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0029.png":{"frame":{"x":206,"y":637,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0030.png":{"frame":{"x":411,"y":637,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0031.png":{"frame":{"x":616,"y":637,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0032.png":{"frame":{"x":821,"y":616,"w":203,"h":104},"rotated":true,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0033.png":{"frame":{"x":1,"y":743,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0034.png":{"frame":{"x":206,"y":743,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0035.png":{"frame":{"x":411,"y":743,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0036.png":{"frame":{"x":616,"y":743,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0037.png":{"frame":{"x":1,"y":849,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0038.png":{"frame":{"x":206,"y":849,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0039.png":{"frame":{"x":411,"y":849,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0040.png":{"frame":{"x":616,"y":849,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0041.png":{"frame":{"x":821,"y":821,"w":203,"h":104},"rotated":true,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0042.png":{"frame":{"x":1,"y":955,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0043.png":{"frame":{"x":206,"y":955,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0044.png":{"frame":{"x":411,"y":955,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0045.png":{"frame":{"x":616,"y":955,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0046.png":{"frame":{"x":1,"y":1061,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0047.png":{"frame":{"x":206,"y":1061,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0048.png":{"frame":{"x":411,"y":1061,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0049.png":{"frame":{"x":616,"y":1061,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0050.png":{"frame":{"x":821,"y":1026,"w":203,"h":104},"rotated":true,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0051.png":{"frame":{"x":1,"y":1167,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0052.png":{"frame":{"x":206,"y":1167,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0053.png":{"frame":{"x":411,"y":1167,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0054.png":{"frame":{"x":616,"y":1167,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0055.png":{"frame":{"x":1,"y":1273,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0056.png":{"frame":{"x":206,"y":1273,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0057.png":{"frame":{"x":411,"y":1273,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0058.png":{"frame":{"x":616,"y":1273,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0059.png":{"frame":{"x":821,"y":1231,"w":203,"h":104},"rotated":true,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0060.png":{"frame":{"x":1,"y":1379,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0061.png":{"frame":{"x":206,"y":1379,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}}},"meta":{"app":"https://www.codeandweb.com/texturepacker","version":"1.0","image":"Animation_Dots.png","format":"RGBA8888","size":{"w":926,"h":1484},"scale":"1","smartupdate":"$TexturePacker:SmartUpdate:f8ae7ea7f1346454fbf9b18ed0eecadf:df2bb9d90f0373b38da048506993debb:8eb47d99b78343b170ed6982516d981f$"}}')})),o.register("ejeN4",(function(e,t){e.exports=JSON.parse('{"frames":{"0001.png":{"frame":{"x":1,"y":1,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0002.png":{"frame":{"x":206,"y":1,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0003.png":{"frame":{"x":411,"y":1,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0004.png":{"frame":{"x":616,"y":1,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0005.png":{"frame":{"x":821,"y":1,"w":203,"h":104},"rotated":true,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0006.png":{"frame":{"x":1,"y":107,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0007.png":{"frame":{"x":206,"y":107,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0008.png":{"frame":{"x":411,"y":107,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0009.png":{"frame":{"x":616,"y":107,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0010.png":{"frame":{"x":1,"y":213,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0011.png":{"frame":{"x":206,"y":213,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0012.png":{"frame":{"x":411,"y":213,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0013.png":{"frame":{"x":616,"y":213,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0014.png":{"frame":{"x":821,"y":206,"w":203,"h":104},"rotated":true,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0015.png":{"frame":{"x":1,"y":319,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0016.png":{"frame":{"x":206,"y":319,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0017.png":{"frame":{"x":411,"y":319,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0018.png":{"frame":{"x":616,"y":319,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0019.png":{"frame":{"x":1,"y":425,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0020.png":{"frame":{"x":206,"y":425,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0021.png":{"frame":{"x":411,"y":425,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0022.png":{"frame":{"x":616,"y":425,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0023.png":{"frame":{"x":821,"y":411,"w":203,"h":104},"rotated":true,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0024.png":{"frame":{"x":1,"y":531,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0025.png":{"frame":{"x":206,"y":531,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0026.png":{"frame":{"x":411,"y":531,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0027.png":{"frame":{"x":616,"y":531,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0028.png":{"frame":{"x":1,"y":637,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0029.png":{"frame":{"x":206,"y":637,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0030.png":{"frame":{"x":411,"y":637,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0031.png":{"frame":{"x":616,"y":637,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0032.png":{"frame":{"x":821,"y":616,"w":203,"h":104},"rotated":true,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0033.png":{"frame":{"x":1,"y":743,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0034.png":{"frame":{"x":206,"y":743,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0035.png":{"frame":{"x":411,"y":743,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0036.png":{"frame":{"x":616,"y":743,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0037.png":{"frame":{"x":1,"y":849,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0038.png":{"frame":{"x":206,"y":849,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0039.png":{"frame":{"x":411,"y":849,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0040.png":{"frame":{"x":616,"y":849,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0041.png":{"frame":{"x":821,"y":821,"w":203,"h":104},"rotated":true,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0042.png":{"frame":{"x":1,"y":955,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0043.png":{"frame":{"x":206,"y":955,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0044.png":{"frame":{"x":411,"y":955,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0045.png":{"frame":{"x":616,"y":955,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0046.png":{"frame":{"x":1,"y":1061,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0047.png":{"frame":{"x":206,"y":1061,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0048.png":{"frame":{"x":411,"y":1061,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0049.png":{"frame":{"x":616,"y":1061,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0050.png":{"frame":{"x":821,"y":1026,"w":203,"h":104},"rotated":true,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0051.png":{"frame":{"x":1,"y":1167,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0052.png":{"frame":{"x":206,"y":1167,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0053.png":{"frame":{"x":411,"y":1167,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0054.png":{"frame":{"x":616,"y":1167,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0055.png":{"frame":{"x":1,"y":1273,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0056.png":{"frame":{"x":206,"y":1273,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0057.png":{"frame":{"x":411,"y":1273,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0058.png":{"frame":{"x":616,"y":1273,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0059.png":{"frame":{"x":821,"y":1231,"w":203,"h":104},"rotated":true,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0060.png":{"frame":{"x":1,"y":1379,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}},"0061.png":{"frame":{"x":206,"y":1379,"w":203,"h":104},"rotated":false,"trimmed":true,"spriteSourceSize":{"x":1277,"y":995,"w":203,"h":104},"sourceSize":{"w":1600,"h":1600}}},"meta":{"app":"https://www.codeandweb.com/texturepacker","version":"1.0","image":"Animation_NoDots.png","format":"RGBA8888","size":{"w":926,"h":1484},"scale":"1","smartupdate":"$TexturePacker:SmartUpdate:1b406afdf000028b0063ee052622f4c3:e510ef039f302f06e2bad68de9d9a725:a75fe53cdc16dde2d1e5716fdff5a1ee$"}}')})),o("dRo73").register(JSON.parse('{"eNLqB":"index.2c475b3f.js","7SBAf":"Button.e683917e.mp3","iwfgr":"intro_gemini.a4f4e4c1.wav","bMQty":"music_gemini.d2b56834.mp3","5yoqN":"music_tension.f6984f95.mp3","5M7cr":"0001.0526312a.jpeg","8Z6K7":"0002.4f8abfbd.jpeg","hXlM3":"0003.65c1a148.jpeg","2H4ek":"0004.a45c2c1a.jpeg","ece9r":"0005.f295f9c8.jpeg","c0uS2":"0006.802e7afa.jpeg","f5La2":"0007.598ea353.jpeg","kLCVX":"0008.56cc3706.jpeg","3dcDo":"0009.b759ffb3.jpeg","f4j01":"0010.f8e7da37.jpeg","OmOH0":"0011.86103216.jpeg","bRCwD":"0012.574b2288.jpeg","15zkB":"0013.e644a042.jpeg","5eOVt":"0014.9c10e03c.jpeg","arGm5":"0015.10f7fdd3.jpeg","dLQ9l":"0016.a3109f7a.jpeg","8fX36":"0017.c0998d58.jpeg","duPPE":"0018.3db85c82.jpeg","3saTC":"0019.6546415e.jpeg","fHqDn":"0020.2f2f24bb.jpeg","epSAR":"0021.f66bd563.jpeg","k4aQK":"0022.8b31e7f3.jpeg","52NtN":"0023.8f17e30a.jpeg","c2Uqa":"0025.41e4a7fb.jpeg","OGniT":"0026.78120f56.jpeg","jE89I":"0027.0d18c63a.jpeg","iVRez":"0028.5c23b78c.jpeg","36t3b":"0029.60831de0.jpeg","chZqB":"Chatbox.6245866b.png","89ydx":"Photo1.c49ce96c.png","ffZz4":"Photo2.cd44de3b.png","beS7y":"map.c284ac06.jpeg","bJCRm":"Menu.9999a9e9.png","dhcIs":"ArrowRight.25a2ecfd.png","j0npP":"ArrowLeft.53fc8a67.png","jGCoj":"Hand.8baae10f.png","cblaC":"Logo.2d75030b.png","eXT1y":"NoKeyOverlay.28d3d370.png","6Flhu":"FrameSqLeft.23b0f4a0.png","9YtyO":"FrameSqRight.ffb626b2.png","eACO5":"Animation_Dots.e2c3e33d.png","YoplX":"Animation_NoDots.f3397a6b.png"}'));var s={__esModule:!0};s.loader=s.prepare=s.particles=s.mesh=s.loaders=s.interaction=s.filters=s.extras=s.extract=s.accessibility=void 0;var a,h={},u=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;function d(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}a=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},i=0;i<10;i++)t["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var i,r,n=d(e),o=1;o<arguments.length;o++){for(var s in i=Object(arguments[o]))l.call(i,s)&&(n[s]=i[s]);if(u){r=u(i);for(var a=0;a<r.length;a++)c.call(i,r[a])&&(n[r[a]]=i[r[a]])}}return n};var f,p=(f=a)&&f.__esModule?f:{default:f};Object.assign||(Object.assign=p.default);if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!t.performance||!t.performance.now){var g=Date.now();t.performance||(t.performance={}),t.performance.now=function(){return Date.now()-g}}for(var m=Date.now(),y=["ms","moz","webkit","o"],v=0;v<y.length&&!t.requestAnimationFrame;++v){var b=y[v];t.requestAnimationFrame=t[b+"RequestAnimationFrame"],t.cancelAnimationFrame=t[b+"CancelAnimationFrame"]||t[b+"CancelRequestAnimationFrame"]}t.requestAnimationFrame||(t.requestAnimationFrame=function(e){if("function"!=typeof e)throw new TypeError(e+"is not a function");var t=Date.now(),i=16+m-t;return i<0&&(i=0),m=t,setTimeout((function(){m=Date.now(),e(performance.now())}),i)}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(e){return clearTimeout(e)}),Math.sign||(Math.sign=function(e){return 0===(e=Number(e))||isNaN(e)?e:e>0?1:-1}),Number.isInteger||(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array),Object.keys(h).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(s,e,{enumerable:!0,get:function(){return h[e]}})}));var x={__esModule:!0};x.autoDetectRenderer=x.Application=x.Filter=x.SpriteMaskFilter=x.Quad=x.RenderTarget=x.ObjectRenderer=x.WebGLManager=x.Shader=x.CanvasRenderTarget=x.TextureUvs=x.VideoBaseTexture=x.BaseRenderTexture=x.RenderTexture=x.BaseTexture=x.TextureMatrix=x.Texture=x.Spritesheet=x.CanvasGraphicsRenderer=x.GraphicsRenderer=x.GraphicsData=x.Graphics=x.TextMetrics=x.TextStyle=x.Text=x.SpriteRenderer=x.CanvasTinter=x.CanvasSpriteRenderer=x.Sprite=x.TransformBase=x.TransformStatic=x.Transform=x.Container=x.DisplayObject=x.Bounds=x.glCore=x.WebGLRenderer=x.CanvasRenderer=x.ticker=x.utils=x.settings=void 0;var w,_,T,S,E,O,k,M,C,P,A,I,R,N,D,L,j,F,B,U={};e(U,"__esModule",(()=>w),(e=>w=e)),e(U,"VERSION",(()=>_),(e=>_=e)),e(U,"PI_2",(()=>T),(e=>T=e)),e(U,"RAD_TO_DEG",(()=>S),(e=>S=e)),e(U,"DEG_TO_RAD",(()=>E),(e=>E=e)),e(U,"RENDERER_TYPE",(()=>O),(e=>O=e)),e(U,"BLEND_MODES",(()=>k),(e=>k=e)),e(U,"DRAW_MODES",(()=>M),(e=>M=e)),e(U,"SCALE_MODES",(()=>C),(e=>C=e)),e(U,"WRAP_MODES",(()=>P),(e=>P=e)),e(U,"GC_MODES",(()=>A),(e=>A=e)),e(U,"URL_FILE_EXTENSION",(()=>I),(e=>I=e)),e(U,"DATA_URI",(()=>R),(e=>R=e)),e(U,"SVG_SIZE",(()=>N),(e=>N=e)),e(U,"SHAPES",(()=>D),(e=>D=e)),e(U,"PRECISION",(()=>L),(e=>L=e)),e(U,"TRANSFORM_MODE",(()=>j),(e=>j=e)),e(U,"TEXT_GRADIENT",(()=>F),(e=>F=e)),e(U,"UPDATE_PRIORITY",(()=>B),(e=>B=e)),w=!0;_="4.8.9",T=2*Math.PI,S=180/Math.PI,E=Math.PI/180,O={UNKNOWN:0,WEBGL:1,CANVAS:2},k={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19},M={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},C={LINEAR:0,NEAREST:1},P={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},A={AUTO:0,MANUAL:1},I=/\.(\w{3,4})(?:$|\?|#)/i,R=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i,N=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,D={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},L={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},j={STATIC:0,DYNAMIC:1},F={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},B={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50};Object.keys(U).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(x,e,{enumerable:!0,get:function(){return U[e]}})}));var G,W,z={__esModule:!0},H={};function X(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i(H),e(H,"__esModule",(()=>G),(e=>G=e)),e(H,"default",(()=>W),(e=>W=e)),G=!0;var Y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;X(this,e),this.x=t,this.y=i}return e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.copy=function(e){this.set(e.x,e.y)},e.prototype.equals=function(e){return e.x===this.x&&e.y===this.y},e.prototype.set=function(e,t){this.x=e||0,this.y=t||(0!==t?this.x:0)},e}();W=Y,Object.defineProperty(z,"Point",{enumerable:!0,get:function(){return Ve(H).default}});var V,q,K={};i(K),e(K,"__esModule",(()=>V),(e=>V=e)),e(K,"default",(()=>q),(e=>q=e)),V=!0;var Z=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();function J(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Q=function(){function e(t,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;J(this,e),this._x=r,this._y=n,this.cb=t,this.scope=i}return e.prototype.clone=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=t||this.cb,n=i||this.scope;return new e(r,n,this._x,this._y)},e.prototype.set=function(e,t){var i=e||0,r=t||(0!==t?i:0);this._x===i&&this._y===r||(this._x=i,this._y=r,this.cb.call(this.scope))},e.prototype.copy=function(e){this._x===e.x&&this._y===e.y||(this._x=e.x,this._y=e.y,this.cb.call(this.scope))},e.prototype.equals=function(e){return e.x===this._x&&e.y===this._y},Z(e,[{key:"x",get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}]),e}();q=Q,Object.defineProperty(z,"ObservablePoint",{enumerable:!0,get:function(){return Ve(K).default}});var $,ee,te={};i(te),e(te,"__esModule",(()=>$),(e=>$=e)),e(te,"default",(()=>ee),(e=>ee=e)),$=!0;var ie=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),re=function(e){return e&&e.__esModule?e:{default:e}}(H);function ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var oe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;ne(this,e),this.a=t,this.b=i,this.c=r,this.d=n,this.tx=o,this.ty=s,this.array=null}return e.prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},e.prototype.set=function(e,t,i,r,n,o){return this.a=e,this.b=t,this.c=i,this.d=r,this.tx=n,this.ty=o,this},e.prototype.toArray=function(e,t){this.array||(this.array=new Float32Array(9));var i=t||this.array;return e?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},e.prototype.apply=function(e,t){t=t||new re.default;var i=e.x,r=e.y;return t.x=this.a*i+this.c*r+this.tx,t.y=this.b*i+this.d*r+this.ty,t},e.prototype.applyInverse=function(e,t){t=t||new re.default;var i=1/(this.a*this.d+this.c*-this.b),r=e.x,n=e.y;return t.x=this.d*i*r+-this.c*i*n+(this.ty*this.c-this.tx*this.d)*i,t.y=this.a*i*n+-this.b*i*r+(-this.ty*this.a+this.tx*this.b)*i,t},e.prototype.translate=function(e,t){return this.tx+=e,this.ty+=t,this},e.prototype.scale=function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},e.prototype.rotate=function(e){var t=Math.cos(e),i=Math.sin(e),r=this.a,n=this.c,o=this.tx;return this.a=r*t-this.b*i,this.b=r*i+this.b*t,this.c=n*t-this.d*i,this.d=n*i+this.d*t,this.tx=o*t-this.ty*i,this.ty=o*i+this.ty*t,this},e.prototype.append=function(e){var t=this.a,i=this.b,r=this.c,n=this.d;return this.a=e.a*t+e.b*r,this.b=e.a*i+e.b*n,this.c=e.c*t+e.d*r,this.d=e.c*i+e.d*n,this.tx=e.tx*t+e.ty*r+this.tx,this.ty=e.tx*i+e.ty*n+this.ty,this},e.prototype.setTransform=function(e,t,i,r,n,o,s,a,h){return this.a=Math.cos(s+h)*n,this.b=Math.sin(s+h)*n,this.c=-Math.sin(s-a)*o,this.d=Math.cos(s-a)*o,this.tx=e-(i*this.a+r*this.c),this.ty=t-(i*this.b+r*this.d),this},e.prototype.prepend=function(e){var t=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){var i=this.a,r=this.c;this.a=i*e.a+this.b*e.c,this.b=i*e.b+this.b*e.d,this.c=r*e.a+this.d*e.c,this.d=r*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this},e.prototype.decompose=function(e){var t=this.a,i=this.b,r=this.c,n=this.d,o=-Math.atan2(-r,n),s=Math.atan2(i,t),a=Math.abs(o+s);return a<1e-5||Math.abs(T-a)<1e-5?(e.rotation=s,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=o,e.skew.y=s),e.scale.x=Math.sqrt(t*t+i*i),e.scale.y=Math.sqrt(r*r+n*n),e.position.x=this.tx,e.position.y=this.ty,e},e.prototype.invert=function(){var e=this.a,t=this.b,i=this.c,r=this.d,n=this.tx,o=e*r-t*i;return this.a=r/o,this.b=-t/o,this.c=-i/o,this.d=e/o,this.tx=(i*this.ty-r*n)/o,this.ty=-(e*this.ty-t*n)/o,this},e.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},e.prototype.clone=function(){var t=new e;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},e.prototype.copy=function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},ie(e,null,[{key:"IDENTITY",get:function(){return new e}},{key:"TEMP_MATRIX",get:function(){return new e}}]),e}();ee=oe,Object.defineProperty(z,"Matrix",{enumerable:!0,get:function(){return Ve(te).default}});var se,ae,he={};i(he),e(he,"__esModule",(()=>se),(e=>se=e)),e(he,"default",(()=>ae),(e=>ae=e)),se=!0;var ue=function(e){return e&&e.__esModule?e:{default:e}}(te);var le=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],ce=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],de=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],fe=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],pe=[],ge=[];function me(e){return e<0?-1:e>0?1:0}!function(){for(var e=0;e<16;e++){var t=[];ge.push(t);for(var i=0;i<16;i++)for(var r=me(le[e]*le[i]+de[e]*ce[i]),n=me(ce[e]*le[i]+fe[e]*ce[i]),o=me(le[e]*de[i]+de[e]*fe[i]),s=me(ce[e]*de[i]+fe[e]*fe[i]),a=0;a<16;a++)if(le[a]===r&&ce[a]===n&&de[a]===o&&fe[a]===s){t.push(a);break}}for(var h=0;h<16;h++){var u=new ue.default;u.set(le[h],ce[h],de[h],fe[h],0,0),pe.push(u)}}();var ye={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(e){return le[e]},uY:function(e){return ce[e]},vX:function(e){return de[e]},vY:function(e){return fe[e]},inv:function(e){return 8&e?15&e:7&-e},add:function(e,t){return ge[e][t]},sub:function(e,t){return ge[e][ye.inv(t)]},rotate180:function(e){return 4^e},isVertical:function(e){return 2==(3&e)},byDirection:function(e,t){return 2*Math.abs(e)<=Math.abs(t)?t>=0?ye.S:ye.N:2*Math.abs(t)<=Math.abs(e)?e>0?ye.E:ye.W:t>0?e>0?ye.SE:ye.SW:e>0?ye.NE:ye.NW},matrixAppendRotationInv:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=pe[ye.inv(t)];n.tx=i,n.ty=r,e.append(n)}};ae=ye,Object.defineProperty(z,"GroupD8",{enumerable:!0,get:function(){return Ve(he).default}});var ve,be,xe={};i(xe),e(xe,"__esModule",(()=>ve),(e=>ve=e)),e(xe,"default",(()=>be),(e=>be=e)),ve=!0;var we,_e,Te={};i(Te),e(Te,"__esModule",(()=>we),(e=>we=e)),e(Te,"default",(()=>_e),(e=>_e=e)),we=!0;var Se=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();function Ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Oe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;Ee(this,e),this.x=Number(t),this.y=Number(i),this.width=Number(r),this.height=Number(n),this.type=D.RECT}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this},e.prototype.contains=function(e,t){return!(this.width<=0||this.height<=0)&&(e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height)},e.prototype.pad=function(e,t){e=e||0,t=t||(0!==t?e:0),this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t},e.prototype.fit=function(e){var t=Math.max(this.x,e.x),i=Math.min(this.x+this.width,e.x+e.width),r=Math.max(this.y,e.y),n=Math.min(this.y+this.height,e.y+e.height);this.x=t,this.width=Math.max(i-t,0),this.y=r,this.height=Math.max(n-r,0)},e.prototype.enlarge=function(e){var t=Math.min(this.x,e.x),i=Math.max(this.x+this.width,e.x+e.width),r=Math.min(this.y,e.y),n=Math.max(this.y+this.height,e.y+e.height);this.x=t,this.width=i-t,this.y=r,this.height=n-r},e.prototype.ceil=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.001,i=Math.ceil((this.x+this.width-t)*e)/e,r=Math.ceil((this.y+this.height-t)*e)/e;this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=i-this.x,this.height=r-this.y},Se(e,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new e(0,0,0,0)}}]),e}();_e=Oe;var ke=function(e){return e&&e.__esModule?e:{default:e}}(Te);function Me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Ce=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Me(this,e),this.x=t,this.y=i,this.radius=r,this.type=D.CIRC}return e.prototype.clone=function(){return new e(this.x,this.y,this.radius)},e.prototype.contains=function(e,t){if(this.radius<=0)return!1;var i=this.radius*this.radius,r=this.x-e,n=this.y-t;return(r*=r)+(n*=n)<=i},e.prototype.getBounds=function(){return new ke.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},e}();be=Ce,Object.defineProperty(z,"Circle",{enumerable:!0,get:function(){return Ve(xe).default}});var Pe,Ae,Ie={};i(Ie),e(Ie,"__esModule",(()=>Pe),(e=>Pe=e)),e(Ie,"default",(()=>Ae),(e=>Ae=e)),Pe=!0;var Re=function(e){return e&&e.__esModule?e:{default:e}}(Te);function Ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var De=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;Ne(this,e),this.x=t,this.y=i,this.width=r,this.height=n,this.type=D.ELIP}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;var i=(e-this.x)/this.width,r=(t-this.y)/this.height;return(i*=i)+(r*=r)<=1},e.prototype.getBounds=function(){return new Re.default(this.x-this.width,this.y-this.height,this.width,this.height)},e}();Ae=De,Object.defineProperty(z,"Ellipse",{enumerable:!0,get:function(){return Ve(Ie).default}});var Le,je,Fe={};i(Fe),e(Fe,"__esModule",(()=>Le),(e=>Le=e)),e(Fe,"default",(()=>je),(e=>je=e)),Le=!0;var Be=function(e){return e&&e.__esModule?e:{default:e}}(H);function Ue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Ge=function(){function e(){for(var t=arguments.length,i=Array(t),r=0;r<t;r++)i[r]=arguments[r];if(Ue(this,e),Array.isArray(i[0])&&(i=i[0]),i[0]instanceof Be.default){for(var n=[],o=0,s=i.length;o<s;o++)n.push(i[o].x,i[o].y);i=n}this.closed=!0,this.points=i,this.type=D.POLY}return e.prototype.clone=function(){return new e(this.points.slice())},e.prototype.close=function(){var e=this.points;e[0]===e[e.length-2]&&e[1]===e[e.length-1]||e.push(e[0],e[1])},e.prototype.contains=function(e,t){for(var i=!1,r=this.points.length/2,n=0,o=r-1;n<r;o=n++){var s=this.points[2*n],a=this.points[2*n+1],h=this.points[2*o],u=this.points[2*o+1];a>t!=u>t&&e<(t-a)/(u-a)*(h-s)+s&&(i=!i)}return i},e}();je=Ge,Object.defineProperty(z,"Polygon",{enumerable:!0,get:function(){return Ve(Fe).default}}),Object.defineProperty(z,"Rectangle",{enumerable:!0,get:function(){return Ve(Te).default}});var We,ze,He={};function Xe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i(He),e(He,"__esModule",(()=>We),(e=>We=e)),e(He,"default",(()=>ze),(e=>ze=e)),We=!0;var Ye=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20;Xe(this,e),this.x=t,this.y=i,this.width=r,this.height=n,this.radius=o,this.type=D.RREC}return e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height,this.radius)},e.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){if(t>=this.y+this.radius&&t<=this.y+this.height-this.radius||e>=this.x+this.radius&&e<=this.x+this.width-this.radius)return!0;var i=e-(this.x+this.radius),r=t-(this.y+this.radius),n=this.radius*this.radius;if(i*i+r*r<=n)return!0;if((i=e-(this.x+this.width-this.radius))*i+r*r<=n)return!0;if(i*i+(r=t-(this.y+this.height-this.radius))*r<=n)return!0;if((i=e-(this.x+this.radius))*i+r*r<=n)return!0}return!1},e}();function Ve(e){return e&&e.__esModule?e:{default:e}}ze=Ye,Object.defineProperty(z,"RoundedRectangle",{enumerable:!0,get:function(){return Ve(He).default}}),Object.keys(z).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(x,e,{enumerable:!0,get:function(){return z[e]}})}));var qe={},Ke={createContext:o("lSsD0"),setVertexAttribArrays:o("eGvPT"),GLBuffer:o("2t3Dk"),GLFramebuffer:o("aAB9m"),GLShader:o("c95Ww"),GLTexture:o("cKSuu"),VertexArrayObject:o("6sAgA"),shader:o("2hFDF")};qe&&(qe=Ke),"undefined"!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=Ke),Object.defineProperty(x,"glCore",{enumerable:!0,get:function(){return $d(qe).default}});var Ze,Je,Qe={};i(Qe),e(Qe,"__esModule",(()=>Ze),(e=>Ze=e)),e(Qe,"default",(()=>Je),(e=>Je=e)),Ze=!0;var $e=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null}return e.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},e.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},e.prototype.getRectangle=function(e){return this.minX>this.maxX||this.minY>this.maxY?z.Rectangle.EMPTY:((e=e||new z.Rectangle(0,0,1,1)).x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)},e.prototype.addPoint=function(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)},e.prototype.addQuad=function(e){var t=this.minX,i=this.minY,r=this.maxX,n=this.maxY,o=e[0],s=e[1];t=o<t?o:t,i=s<i?s:i,r=o>r?o:r,n=s>n?s:n,t=(o=e[2])<t?o:t,i=(s=e[3])<i?s:i,r=o>r?o:r,n=s>n?s:n,t=(o=e[4])<t?o:t,i=(s=e[5])<i?s:i,r=o>r?o:r,n=s>n?s:n,t=(o=e[6])<t?o:t,i=(s=e[7])<i?s:i,r=o>r?o:r,n=s>n?s:n,this.minX=t,this.minY=i,this.maxX=r,this.maxY=n},e.prototype.addFrame=function(e,t,i,r,n){var o=e.worldTransform,s=o.a,a=o.b,h=o.c,u=o.d,l=o.tx,c=o.ty,d=this.minX,f=this.minY,p=this.maxX,g=this.maxY,m=s*t+h*i+l,y=a*t+u*i+c;d=m<d?m:d,f=y<f?y:f,p=m>p?m:p,g=y>g?y:g,d=(m=s*r+h*i+l)<d?m:d,f=(y=a*r+u*i+c)<f?y:f,p=m>p?m:p,g=y>g?y:g,d=(m=s*t+h*n+l)<d?m:d,f=(y=a*t+u*n+c)<f?y:f,p=m>p?m:p,g=y>g?y:g,d=(m=s*r+h*n+l)<d?m:d,f=(y=a*r+u*n+c)<f?y:f,p=m>p?m:p,g=y>g?y:g,this.minX=d,this.minY=f,this.maxX=p,this.maxY=g},e.prototype.addVertices=function(e,t,i,r){for(var n=e.worldTransform,o=n.a,s=n.b,a=n.c,h=n.d,u=n.tx,l=n.ty,c=this.minX,d=this.minY,f=this.maxX,p=this.maxY,g=i;g<r;g+=2){var m=t[g],y=t[g+1],v=o*m+a*y+u,b=h*y+s*m+l;c=v<c?v:c,d=b<d?b:d,f=v>f?v:f,p=b>p?b:p}this.minX=c,this.minY=d,this.maxX=f,this.maxY=p},e.prototype.addBounds=function(e){var t=this.minX,i=this.minY,r=this.maxX,n=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<i?e.minY:i,this.maxX=e.maxX>r?e.maxX:r,this.maxY=e.maxY>n?e.maxY:n},e.prototype.addBoundsMask=function(e,t){var i=e.minX>t.minX?e.minX:t.minX,r=e.minY>t.minY?e.minY:t.minY,n=e.maxX<t.maxX?e.maxX:t.maxX,o=e.maxY<t.maxY?e.maxY:t.maxY;if(i<=n&&r<=o){var s=this.minX,a=this.minY,h=this.maxX,u=this.maxY;this.minX=i<s?i:s,this.minY=r<a?r:a,this.maxX=n>h?n:h,this.maxY=o>u?o:u}},e.prototype.addBoundsArea=function(e,t){var i=e.minX>t.x?e.minX:t.x,r=e.minY>t.y?e.minY:t.y,n=e.maxX<t.x+t.width?e.maxX:t.x+t.width,o=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(i<=n&&r<=o){var s=this.minX,a=this.minY,h=this.maxX,u=this.maxY;this.minX=i<s?i:s,this.minY=r<a?r:a,this.maxX=n>h?n:h,this.maxY=o>u?o:u}},e}();Je=$e,Object.defineProperty(x,"Bounds",{enumerable:!0,get:function(){return $d(Qe).default}});var et,tt,it={};i(it),e(it,"__esModule",(()=>et),(e=>et=e)),e(it,"default",(()=>tt),(e=>tt=e)),et=!0;var rt,nt=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),ot=Object.prototype.hasOwnProperty,st="~";function at(){}function ht(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function ut(){this._events=new at,this._eventsCount=0}Object.create&&(at.prototype=Object.create(null),(new at).__proto__||(st=!1)),ut.prototype.eventNames=function(){var e,t,i=[];if(0===this._eventsCount)return i;for(t in e=this._events)ot.call(e,t)&&i.push(st?t.slice(1):t);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},ut.prototype.listeners=function(e,t){var i=st?st+e:e,r=this._events[i];if(t)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var n=0,o=r.length,s=new Array(o);n<o;n++)s[n]=r[n].fn;return s},ut.prototype.emit=function(e,t,i,r,n,o){var s=st?st+e:e;if(!this._events[s])return!1;var a,h,u=this._events[s],l=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),l){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,i),!0;case 4:return u.fn.call(u.context,t,i,r),!0;case 5:return u.fn.call(u.context,t,i,r,n),!0;case 6:return u.fn.call(u.context,t,i,r,n,o),!0}for(h=1,a=new Array(l-1);h<l;h++)a[h-1]=arguments[h];u.fn.apply(u.context,a)}else{var c,d=u.length;for(h=0;h<d;h++)switch(u[h].once&&this.removeListener(e,u[h].fn,void 0,!0),l){case 1:u[h].fn.call(u[h].context);break;case 2:u[h].fn.call(u[h].context,t);break;case 3:u[h].fn.call(u[h].context,t,i);break;case 4:u[h].fn.call(u[h].context,t,i,r);break;default:if(!a)for(c=1,a=new Array(l-1);c<l;c++)a[c-1]=arguments[c];u[h].fn.apply(u[h].context,a)}}return!0},ut.prototype.on=function(e,t,i){var r=new ht(t,i||this),n=st?st+e:e;return this._events[n]?this._events[n].fn?this._events[n]=[this._events[n],r]:this._events[n].push(r):(this._events[n]=r,this._eventsCount++),this},ut.prototype.once=function(e,t,i){var r=new ht(t,i||this,!0),n=st?st+e:e;return this._events[n]?this._events[n].fn?this._events[n]=[this._events[n],r]:this._events[n].push(r):(this._events[n]=r,this._eventsCount++),this},ut.prototype.removeListener=function(e,t,i,r){var n=st?st+e:e;if(!this._events[n])return this;if(!t)return 0==--this._eventsCount?this._events=new at:delete this._events[n],this;var o=this._events[n];if(o.fn)o.fn!==t||r&&!o.once||i&&o.context!==i||(0==--this._eventsCount?this._events=new at:delete this._events[n]);else{for(var s=0,a=[],h=o.length;s<h;s++)(o[s].fn!==t||r&&!o[s].once||i&&o[s].context!==i)&&a.push(o[s]);a.length?this._events[n]=1===a.length?a[0]:a:0==--this._eventsCount?this._events=new at:delete this._events[n]}return this},ut.prototype.removeAllListeners=function(e){var t;return e?(t=st?st+e:e,this._events[t]&&(0==--this._eventsCount?this._events=new at:delete this._events[t])):(this._events=new at,this._eventsCount=0),this},ut.prototype.off=ut.prototype.removeListener,ut.prototype.addListener=ut.prototype.on,ut.prototype.setMaxListeners=function(){return this},ut.prefixed=st,ut.EventEmitter=ut;var lt,ct,dt=Xt(rt=ut),ft={};i(ft),e(ft,"__esModule",(()=>lt),(e=>lt=e)),e(ft,"default",(()=>ct),(e=>ct=e)),lt=!0;var pt,gt,mt={};i(mt),e(mt,"__esModule",(()=>pt),(e=>pt=e)),e(mt,"default",(()=>gt),(e=>gt=e)),pt=!0,gt=function(e){return vt.default.tablet||vt.default.phone?4:e};var yt={};!function(e){var t=/iPhone/i,i=/iPod/i,r=/iPad/i,n=/\bAndroid(?:.+)Mobile\b/i,o=/Android/i,s=/\bAndroid(?:.+)SD4930UR\b/i,a=/\bAndroid(?:.+)(?:KF[A-Z]{2,4})\b/i,h=/Windows Phone/i,u=/\bWindows(?:.+)ARM\b/i,l=/BlackBerry/i,c=/BB10/i,d=/Opera Mini/i,f=/\b(CriOS|Chrome)(?:.+)Mobile/i,p=/Mobile(?:.+)Firefox\b/i;function g(e,t){return e.test(t)}function m(e){var m=e||("undefined"!=typeof navigator?navigator.userAgent:""),y=m.split("[FBAN");void 0!==y[1]&&(m=y[0]),void 0!==(y=m.split("Twitter"))[1]&&(m=y[0]);var v={apple:{phone:g(t,m)&&!g(h,m),ipod:g(i,m),tablet:!g(t,m)&&g(r,m)&&!g(h,m),device:(g(t,m)||g(i,m)||g(r,m))&&!g(h,m)},amazon:{phone:g(s,m),tablet:!g(s,m)&&g(a,m),device:g(s,m)||g(a,m)},android:{phone:!g(h,m)&&g(s,m)||!g(h,m)&&g(n,m),tablet:!g(h,m)&&!g(s,m)&&!g(n,m)&&(g(a,m)||g(o,m)),device:!g(h,m)&&(g(s,m)||g(a,m)||g(n,m)||g(o,m))||g(/\bokhttp\b/i,m)},windows:{phone:g(h,m),tablet:g(u,m),device:g(h,m)||g(u,m)},other:{blackberry:g(l,m),blackberry10:g(c,m),opera:g(d,m),firefox:g(p,m),chrome:g(f,m),device:g(l,m)||g(c,m)||g(d,m)||g(p,m)||g(f,m)}};return v.any=v.apple.device||v.android.device||v.windows.device||v.other.device,v.phone=v.apple.phone||v.android.phone||v.windows.phone,v.tablet=v.apple.tablet||v.android.tablet||v.windows.tablet,v}yt&&"undefined"==typeof window?yt=m:yt&&"undefined"!=typeof window?(yt=m()).isMobile=m:"function"==typeof define&&define.amd?define([],e.isMobile=m()):e.isMobile=m()}(yt);var vt=function(e){return e&&e.__esModule?e:{default:e}}(yt);var bt,xt,wt=St(mt),_t={};i(_t),e(_t,"__esModule",(()=>bt),(e=>bt=e)),e(_t,"default",(()=>xt),(e=>xt=e)),bt=!0,xt=function(){return!(navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))};var Tt=St(_t);function St(e){return e&&e.__esModule?e:{default:e}}ct={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,wt.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,Tt.default)(),MESH_CANVAS_PADDING:0};var Et,Ot,kt=Xt(ft),Mt={};i(Mt),e(Mt,"__esModule",(()=>Et),(e=>Et=e)),e(Mt,"default",(()=>Ot),(e=>Ot=e)),Et=!0;var Ct,Pt,At=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),It={};i(It),e(It,"__esModule",(()=>Ct),(e=>Ct=e)),e(It,"default",(()=>Pt),(e=>Pt=e)),Ct=!0;var Rt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.worldTransform=new z.Matrix,this.localTransform=new z.Matrix,this._worldID=0,this._parentID=0}return e.prototype.updateLocalTransform=function(){},e.prototype.updateTransform=function(e){var t=e.worldTransform,i=this.worldTransform,r=this.localTransform;i.a=r.a*t.a+r.b*t.c,i.b=r.a*t.b+r.b*t.d,i.c=r.c*t.a+r.d*t.c,i.d=r.c*t.b+r.d*t.d,i.tx=r.tx*t.a+r.ty*t.c+t.tx,i.ty=r.tx*t.b+r.ty*t.d+t.ty,this._worldID++},e}();Pt=Rt,Rt.prototype.updateWorldTransform=Rt.prototype.updateTransform,Rt.IDENTITY=new Rt;var Nt=function(e){return e&&e.__esModule?e:{default:e}}(It);var Dt=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return i.position=new z.ObservablePoint(i.onChange,i,0,0),i.scale=new z.ObservablePoint(i.onChange,i,1,1),i.pivot=new z.ObservablePoint(i.onChange,i,0,0),i.skew=new z.ObservablePoint(i.updateSkew,i,0,0),i._rotation=0,i._cx=1,i._sx=0,i._cy=0,i._sy=1,i._localID=0,i._currentLocalID=0,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},t.prototype.updateLocalTransform=function(){var e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale._x,e.b=this._sx*this.scale._x,e.c=this._cy*this.scale._y,e.d=this._sy*this.scale._y,e.tx=this.position._x-(this.pivot._x*e.a+this.pivot._y*e.c),e.ty=this.position._y-(this.pivot._x*e.b+this.pivot._y*e.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(e){var t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){var i=e.worldTransform,r=this.worldTransform;r.a=t.a*i.a+t.b*i.c,r.b=t.a*i.b+t.b*i.d,r.c=t.c*i.a+t.d*i.c,r.d=t.c*i.b+t.d*i.d,r.tx=t.tx*i.a+t.ty*i.c+i.tx,r.ty=t.tx*i.b+t.ty*i.d+i.ty,this._parentID=e._worldID,this._worldID++}},t.prototype.setFromMatrix=function(e){e.decompose(this),this._localID++},At(t,[{key:"rotation",get:function(){return this._rotation},set:function(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())}}]),t}(Nt.default);Ot=Dt;var Lt,jt,Ft=Xt(Mt),Bt={};i(Bt),e(Bt,"__esModule",(()=>Lt),(e=>Lt=e)),e(Bt,"default",(()=>jt),(e=>jt=e)),Lt=!0;var Ut=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),Gt=function(e){return e&&e.__esModule?e:{default:e}}(It);var Wt=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return i.position=new z.Point(0,0),i.scale=new z.Point(1,1),i.skew=new z.ObservablePoint(i.updateSkew,i,0,0),i.pivot=new z.Point(0,0),i._rotation=0,i._cx=1,i._sx=0,i._cy=0,i._sy=1,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x)},t.prototype.updateLocalTransform=function(){var e=this.localTransform;e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d)},t.prototype.updateTransform=function(e){var t=this.localTransform;t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d);var i=e.worldTransform,r=this.worldTransform;r.a=t.a*i.a+t.b*i.c,r.b=t.a*i.b+t.b*i.d,r.c=t.c*i.a+t.d*i.c,r.d=t.c*i.b+t.d*i.d,r.tx=t.tx*i.a+t.ty*i.c+i.tx,r.ty=t.tx*i.b+t.ty*i.d+i.ty,this._worldID++},t.prototype.setFromMatrix=function(e){e.decompose(this)},Ut(t,[{key:"rotation",get:function(){return this._rotation},set:function(e){this._rotation=e,this.updateSkew()}}]),t}(Gt.default);jt=Wt;var zt=Xt(Bt),Ht=Xt(Qe);function Xt(e){return e&&e.__esModule?e:{default:e}}var Yt=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this)),r=kt.default.TRANSFORM_MODE===j.STATIC?Ft.default:zt.default;return i.tempDisplayObjectParent=null,i.transform=new r,i.alpha=1,i.visible=!0,i.renderable=!0,i.parent=null,i.worldAlpha=1,i.filterArea=null,i._filters=null,i._enabledFilters=null,i._bounds=new Ht.default,i._boundsID=0,i._lastBoundsID=-1,i._boundsRect=null,i._localBoundsRect=null,i._mask=null,i._destroyed=!1,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},t.prototype.getBounds=function(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),t||(this._boundsRect||(this._boundsRect=new z.Rectangle),t=this._boundsRect),this._bounds.getRectangle(t)},t.prototype.getLocalBounds=function(e){var t=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,e||(this._localBoundsRect||(this._localBoundsRect=new z.Rectangle),e=this._localBoundsRect);var r=this.getBounds(!1,e);return this.parent=i,this.transform=t,r},t.prototype.toGlobal=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)},t.prototype.toLocal=function(e,t,i,r){return t&&(e=t.toGlobal(e,i,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,i)},t.prototype.renderWebGL=function(e){},t.prototype.renderCanvas=function(e){},t.prototype.setParent=function(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e},t.prototype.setTransform=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,h=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=e,this.position.y=t,this.scale.x=i||1,this.scale.y=r||1,this.rotation=n,this.skew.x=o,this.skew.y=s,this.pivot.x=a,this.pivot.y=h,this},t.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},nt(t,[{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new t),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(e){this.transform.position.x=e}},{key:"y",get:function(){return this.position.y},set:function(e){this.transform.position.y=e}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(e){this.transform.position.copy(e)}},{key:"scale",get:function(){return this.transform.scale},set:function(e){this.transform.scale.copy(e)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(e){this.transform.pivot.copy(e)}},{key:"skew",get:function(){return this.transform.skew},set:function(e){this.transform.skew.copy(e)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(e){this.transform.rotation=e}},{key:"worldVisible",get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}},{key:"mask",get:function(){return this._mask},set:function(e){this._mask&&(this._mask.renderable=!0,this._mask.isMask=!1),this._mask=e,this._mask&&(this._mask.renderable=!1,this._mask.isMask=!0)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(e){this._filters=e&&e.slice()}}]),t}(dt.default);tt=Yt,Yt.prototype.displayObjectUpdateTransform=Yt.prototype.updateTransform,Object.defineProperty(x,"DisplayObject",{enumerable:!0,get:function(){return $d(it).default}});var Vt,qt,Kt={};i(Kt),e(Kt,"__esModule",(()=>Vt),(e=>Vt=e)),e(Kt,"default",(()=>qt),(e=>qt=e)),Vt=!0;var Zt,Jt,Qt,$t,ei,ti,ii,ri,ni,oi,si,ai,hi,ui,li,ci,di,fi,pi,gi,mi,yi,vi,bi,xi,wi,_i,Ti,Si=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),Ei={};e(Ei,"__esModule",(()=>Zt),(e=>Zt=e)),e(Ei,"premultiplyBlendMode",(()=>Jt),(e=>Jt=e)),e(Ei,"BaseTextureCache",(()=>Qt),(e=>Qt=e)),e(Ei,"TextureCache",(()=>$t),(e=>$t=e)),e(Ei,"earcut",(()=>ei),(e=>ei=e)),e(Ei,"mixins",(()=>ti),(e=>ti=e)),e(Ei,"pluginTarget",(()=>ii),(e=>ii=e)),e(Ei,"EventEmitter",(()=>ri),(e=>ri=e)),e(Ei,"removeItems",(()=>ni),(e=>ni=e)),e(Ei,"isMobile",(()=>oi),(e=>oi=e)),e(Ei,"uid",(()=>si),(e=>si=e)),e(Ei,"hex2rgb",(()=>ai),(e=>ai=e)),e(Ei,"hex2string",(()=>hi),(e=>hi=e)),e(Ei,"rgb2hex",(()=>ui),(e=>ui=e)),e(Ei,"getResolutionOfUrl",(()=>li),(e=>li=e)),e(Ei,"decomposeDataUri",(()=>ci),(e=>ci=e)),e(Ei,"getUrlFileExtension",(()=>di),(e=>di=e)),e(Ei,"getSvgSize",(()=>fi),(e=>fi=e)),e(Ei,"skipHello",(()=>pi),(e=>pi=e)),e(Ei,"sayHello",(()=>gi),(e=>gi=e)),e(Ei,"isWebGLSupported",(()=>mi),(e=>mi=e)),e(Ei,"sign",(()=>yi),(e=>yi=e)),e(Ei,"destroyTextureCache",(()=>vi),(e=>vi=e)),e(Ei,"clearTextureCache",(()=>bi),(e=>bi=e)),e(Ei,"correctBlendMode",(()=>xi),(e=>xi=e)),e(Ei,"premultiplyTint",(()=>wi),(e=>wi=e)),e(Ei,"premultiplyRgba",(()=>_i),(e=>_i=e)),e(Ei,"premultiplyTintToRgba",(()=>Ti),(e=>Ti=e)),Zt=!0,Jt=Qt=$t=ei=ti=ii=ri=ni=oi=void 0,si=function(){return++_r},ai=function(e,t){return(t=t||[])[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255,t},hi=function(e){return e=e.toString(16),"#"+(e="000000".substr(0,6-e.length)+e)},ui=function(e){return(255*e[0]<<16)+(255*e[1]<<8)+(255*e[2]|0)},li=function(e,t){var i=Mi.default.RETINA_PREFIX.exec(e);return i?parseFloat(i[1]):void 0!==t?t:1},ci=function(e){var t=R.exec(e);return t?{mediaType:t[1]?t[1].toLowerCase():void 0,subType:t[2]?t[2].toLowerCase():void 0,charset:t[3]?t[3].toLowerCase():void 0,encoding:t[4]?t[4].toLowerCase():void 0,data:t[5]}:void 0},di=function(e){var t=I.exec(e);return t?t[1].toLowerCase():void 0},fi=function(e){var t=N.exec(e),i={};t&&(i[t[1]]=Math.round(parseFloat(t[3])),i[t[5]]=Math.round(parseFloat(t[7])));return i},pi=function(){Tr=!0},gi=function(e){if(Tr)return;if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var t=["\n %c %c %c PixiJS "+_+" -  "+e+"   %c  %c  http://www.pixijs.com/  %c %c %c%c \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,t)}else window.console&&window.console.log("PixiJS "+_+" - "+e+" - http://www.pixijs.com/");Tr=!0},mi=function(){var e={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var t=document.createElement("canvas"),i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),r=!(!i||!i.getContextAttributes().stencil);if(i){var n=i.getExtension("WEBGL_lose_context");n&&n.loseContext()}return i=null,r}catch(e){return!1}},yi=function(e){return 0===e?0:e<0?-1:1},vi=function(){var e=void 0;for(e in Sr)Sr[e].destroy();for(e in Er)Er[e].destroy()},bi=function(){var e=void 0;for(e in Sr)delete Sr[e];for(e in Er)delete Er[e]},xi=function(e,t){return Or[t?1:0][e]},wi=function(e,t){if(1===t)return(255*t<<24)+e;if(0===t)return 0;var i=e>>16&255,r=e>>8&255,n=255&e;return(255*t<<24)+((i=i*t+.5|0)<<16)+((r=r*t+.5|0)<<8)+(n=n*t+.5|0)},_i=function(e,t,i,r){i=i||new Float32Array(4),r||void 0===r?(i[0]=e[0]*t,i[1]=e[1]*t,i[2]=e[2]*t):(i[0]=e[0],i[1]=e[1],i[2]=e[2]);return i[3]=t,i},Ti=function(e,t,i,r){(i=i||new Float32Array(4))[0]=(e>>16&255)/255,i[1]=(e>>8&255)/255,i[2]=(255&e)/255,(r||void 0===r)&&(i[0]*=t,i[1]*=t,i[2]*=t);return i[3]=t,i};var Oi,ki,Mi=wr(ft),Ci=wr(rt),Pi={};i(Pi),e(Pi,"__esModule",(()=>Oi),(e=>Oi=e)),e(Pi,"default",(()=>ki),(e=>ki=e)),Oi=!0,ki={mixin:function(e){!function(e){e.__plugins={},e.registerPlugin=function(t,i){e.__plugins[t]=i},e.prototype.initPlugins=function(){for(var t in this.plugins=this.plugins||{},e.__plugins)this.plugins[t]=new e.__plugins[t](this)},e.prototype.destroyPlugins=function(){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;this.plugins=null}}(e)}};var Ai,Ii,Ri,Ni,Di=wr(Pi),Li={};function ji(e,t){if(e&&t)for(var i=Object.keys(t),r=0;r<i.length;++r){var n=i[r];Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}}e(Li,"__esModule",(()=>Ai),(e=>Ai=e)),e(Li,"mixin",(()=>Ii),(e=>Ii=e)),e(Li,"delayMixin",(()=>Ri),(e=>Ri=e)),e(Li,"performMixins",(()=>Ni),(e=>Ni=e)),Ai=!0,Ii=ji,Ri=function(e,t){Fi.push(e,t)},Ni=function(){for(var e=0;e<Fi.length;e+=2)ji(Fi[e],Fi[e+1]);Fi.length=0};var Fi=[];var Bi,Ui,Gi=xr(Li),Wi=xr(yt),zi=wr((function(e,t,i){var r,n=e.length;if(!(t>=n||0===i)){var o=n-(i=t+i>n?n-t:i);for(r=t;r<o;++r)e[r]=e[r+i];e.length=o}})),Hi={};i(Hi),e(Hi,"__esModule",(()=>Bi),(e=>Bi=e)),e(Hi,"default",(()=>Ui),(e=>Ui=e)),Bi=!0,Ui=function(){for(var e=[],t=[],i=0;i<32;i++)e[i]=i,t[i]=i;e[k.NORMAL_NPM]=k.NORMAL,e[k.ADD_NPM]=k.ADD,e[k.SCREEN_NPM]=k.SCREEN,t[k.NORMAL]=k.NORMAL_NPM,t[k.ADD]=k.ADD_NPM,t[k.SCREEN]=k.SCREEN_NPM;var r=[];return r.push(t),r.push(e),r};var Xi=wr(Hi),Yi={};function Vi(e,t,i){i=i||2;var r,n,o,s,a,h,u,l=t&&t.length,c=l?t[0]*i:e.length,d=qi(e,0,c,i,!0),f=[];if(!d||d.next===d.prev)return f;if(l&&(d=function(e,t,i,r){var n,o,s,a=[];for(n=0,o=t.length;n<o;n++)(s=qi(e,t[n]*r,n<o-1?t[n+1]*r:e.length,r,!1))===s.next&&(s.steiner=!0),a.push(or(s));for(a.sort(tr),n=0;n<a.length;n++)ir(a[n],i),i=Ki(i,i.next);return i}(e,t,d,i)),e.length>80*i){r=o=e[0],n=s=e[1];for(var p=i;p<c;p+=i)(a=e[p])<r&&(r=a),(h=e[p+1])<n&&(n=h),a>o&&(o=a),h>s&&(s=h);u=0!==(u=Math.max(o-r,s-n))?1/u:0}return Zi(d,f,i,r,n,u),f}function qi(e,t,i,r,n){var o,s;if(n===vr(e,t,i,r)>0)for(o=t;o<i;o+=r)s=gr(o,e[o],e[o+1],s);else for(o=i-r;o>=t;o-=r)s=gr(o,e[o],e[o+1],s);return s&&ur(s,s.next)&&(mr(s),s=s.next),s}function Ki(e,t){if(!e)return e;t||(t=e);var i,r=e;do{if(i=!1,r.steiner||!ur(r,r.next)&&0!==hr(r.prev,r,r.next))r=r.next;else{if(mr(r),(r=t=r.prev)===r.next)break;i=!0}}while(i||r!==t);return t}function Zi(e,t,i,r,n,o,s){if(e){!s&&o&&function(e,t,i,r){var n=e;do{null===n.z&&(n.z=nr(n.x,n.y,t,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,function(e){var t,i,r,n,o,s,a,h,u=1;do{for(i=e,e=null,o=null,s=0;i;){for(s++,r=i,a=0,t=0;t<u&&(a++,r=r.nextZ);t++);for(h=u;a>0||h>0&&r;)0!==a&&(0===h||!r||i.z<=r.z)?(n=i,i=i.nextZ,a--):(n=r,r=r.nextZ,h--),o?o.nextZ=n:e=n,n.prevZ=o,o=n;i=r}o.nextZ=null,u*=2}while(s>1)}(n)}(e,r,n,o);for(var a,h,u=e;e.prev!==e.next;)if(a=e.prev,h=e.next,o?Qi(e,r,n,o):Ji(e))t.push(a.i/i),t.push(e.i/i),t.push(h.i/i),mr(e),e=h.next,u=h.next;else if((e=h)===u){s?1===s?Zi(e=$i(Ki(e),t,i),t,i,r,n,o,2):2===s&&er(e,t,i,r,n,o):Zi(Ki(e),t,i,r,n,o,1);break}}}function Ji(e){var t=e.prev,i=e,r=e.next;if(hr(t,i,r)>=0)return!1;for(var n=e.next.next;n!==e.prev;){if(sr(t.x,t.y,i.x,i.y,r.x,r.y,n.x,n.y)&&hr(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function Qi(e,t,i,r){var n=e.prev,o=e,s=e.next;if(hr(n,o,s)>=0)return!1;for(var a=n.x<o.x?n.x<s.x?n.x:s.x:o.x<s.x?o.x:s.x,h=n.y<o.y?n.y<s.y?n.y:s.y:o.y<s.y?o.y:s.y,u=n.x>o.x?n.x>s.x?n.x:s.x:o.x>s.x?o.x:s.x,l=n.y>o.y?n.y>s.y?n.y:s.y:o.y>s.y?o.y:s.y,c=nr(a,h,t,i,r),d=nr(u,l,t,i,r),f=e.prevZ,p=e.nextZ;f&&f.z>=c&&p&&p.z<=d;){if(f!==e.prev&&f!==e.next&&sr(n.x,n.y,o.x,o.y,s.x,s.y,f.x,f.y)&&hr(f.prev,f,f.next)>=0)return!1;if(f=f.prevZ,p!==e.prev&&p!==e.next&&sr(n.x,n.y,o.x,o.y,s.x,s.y,p.x,p.y)&&hr(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;f&&f.z>=c;){if(f!==e.prev&&f!==e.next&&sr(n.x,n.y,o.x,o.y,s.x,s.y,f.x,f.y)&&hr(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==e.prev&&p!==e.next&&sr(n.x,n.y,o.x,o.y,s.x,s.y,p.x,p.y)&&hr(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function $i(e,t,i){var r=e;do{var n=r.prev,o=r.next.next;!ur(n,o)&&lr(n,r,r.next,o)&&fr(n,o)&&fr(o,n)&&(t.push(n.i/i),t.push(r.i/i),t.push(o.i/i),mr(r),mr(r.next),r=e=o),r=r.next}while(r!==e);return Ki(r)}function er(e,t,i,r,n,o){var s=e;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&ar(s,a)){var h=pr(s,a);return s=Ki(s,s.next),h=Ki(h,h.next),Zi(s,t,i,r,n,o),void Zi(h,t,i,r,n,o)}a=a.next}s=s.next}while(s!==e)}function tr(e,t){return e.x-t.x}function ir(e,t){if(t=function(e,t){var i,r=t,n=e.x,o=e.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=n&&a>s){if(s=a,a===n){if(o===r.y)return r;if(o===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!i)return null;if(n===s)return i;var h,u=i,l=i.x,c=i.y,d=1/0;r=i;do{n>=r.x&&r.x>=l&&n!==r.x&&sr(o<c?n:s,o,l,c,o<c?s:n,o,r.x,r.y)&&(h=Math.abs(o-r.y)/(n-r.x),fr(r,e)&&(h<d||h===d&&(r.x>i.x||r.x===i.x&&rr(i,r)))&&(i=r,d=h)),r=r.next}while(r!==u);return i}(e,t),t){var i=pr(t,e);Ki(t,t.next),Ki(i,i.next)}}function rr(e,t){return hr(e.prev,e,t.prev)<0&&hr(t.next,e,e.next)<0}function nr(e,t,i,r,n){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*n)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*n)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function or(e){var t=e,i=e;do{(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next}while(t!==e);return i}function sr(e,t,i,r,n,o,s,a){return(n-s)*(t-a)-(e-s)*(o-a)>=0&&(e-s)*(r-a)-(i-s)*(t-a)>=0&&(i-s)*(o-a)-(n-s)*(r-a)>=0}function ar(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&lr(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}(e,t)&&(fr(e,t)&&fr(t,e)&&function(e,t){var i=e,r=!1,n=(e.x+t.x)/2,o=(e.y+t.y)/2;do{i.y>o!=i.next.y>o&&i.next.y!==i.y&&n<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next}while(i!==e);return r}(e,t)&&(hr(e.prev,e,t.prev)||hr(e,t.prev,t))||ur(e,t)&&hr(e.prev,e,e.next)>0&&hr(t.prev,t,t.next)>0)}function hr(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function ur(e,t){return e.x===t.x&&e.y===t.y}function lr(e,t,i,r){var n=dr(hr(e,t,i)),o=dr(hr(e,t,r)),s=dr(hr(i,r,e)),a=dr(hr(i,r,t));return n!==o&&s!==a||(!(0!==n||!cr(e,i,t))||(!(0!==o||!cr(e,r,t))||(!(0!==s||!cr(i,e,r))||!(0!==a||!cr(i,t,r)))))}function cr(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function dr(e){return e>0?1:e<0?-1:0}function fr(e,t){return hr(e.prev,e,e.next)<0?hr(e,t,e.next)>=0&&hr(e,e.prev,t)>=0:hr(e,t,e.prev)<0||hr(e,e.next,t)<0}function pr(e,t){var i=new yr(e.i,e.x,e.y),r=new yr(t.i,t.x,t.y),n=e.next,o=t.prev;return e.next=t,t.prev=e,i.next=n,n.prev=i,r.next=i,i.prev=r,o.next=r,r.prev=o,r}function gr(e,t,i,r){var n=new yr(e,t,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function mr(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function yr(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function vr(e,t,i,r){for(var n=0,o=t,s=i-r;o<i;o+=r)n+=(e[s]-e[o])*(e[o+1]+e[s+1]),s=o;return n}(Yi=Vi).default=Vi,Vi.deviation=function(e,t,i,r){var n=t&&t.length,o=n?t[0]*i:e.length,s=Math.abs(vr(e,0,o,i));if(n)for(var a=0,h=t.length;a<h;a++){var u=t[a]*i,l=a<h-1?t[a+1]*i:e.length;s-=Math.abs(vr(e,u,l,i))}var c=0;for(a=0;a<r.length;a+=3){var d=r[a]*i,f=r[a+1]*i,p=r[a+2]*i;c+=Math.abs((e[d]-e[p])*(e[f+1]-e[d+1])-(e[d]-e[f])*(e[p+1]-e[d+1]))}return 0===s&&0===c?0:Math.abs((c-s)/s)},Vi.flatten=function(e){for(var t=e[0][0].length,i={vertices:[],holes:[],dimensions:t},r=0,n=0;n<e.length;n++){for(var o=0;o<e[n].length;o++)for(var s=0;s<t;s++)i.vertices.push(e[n][o][s]);n>0&&(r+=e[n-1].length,i.holes.push(r))}return i};var br=wr(Yi);function xr(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function wr(e){return e&&e.__esModule?e:{default:e}}var _r=0,Tr=!1;oi=Wi,ni=zi.default,ri=Ci.default,ii=Di.default,ti=Gi,ei=br.default;var Sr=$t=Object.create(null),Er=Qt=Object.create(null);var Or=Jt=(0,Xi.default)();var kr=function(e){return e&&e.__esModule?e:{default:e}}(it);var Mr=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return i.children=[],i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.onChildrenChange=function(){},t.prototype.addChild=function(e){var t=arguments.length;if(t>1)for(var i=0;i<t;i++)this.addChild(arguments[i]);else e.parent&&e.parent.removeChild(e),e.parent=this,e.transform._parentID=-1,this.children.push(e),this._boundsID++,this.onChildrenChange(this.children.length-1),e.emit("added",this);return e},t.prototype.addChildAt=function(e,t){if(t<0||t>this.children.length)throw new Error(e+"addChildAt: The index "+t+" supplied is out of bounds "+this.children.length);return e.parent&&e.parent.removeChild(e),e.parent=this,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),e},t.prototype.swapChildren=function(e,t){if(e!==t){var i=this.getChildIndex(e),r=this.getChildIndex(t);this.children[i]=t,this.children[r]=e,this.onChildrenChange(i<r?i:r)}},t.prototype.getChildIndex=function(e){var t=this.children.indexOf(e);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},t.prototype.setChildIndex=function(e,t){if(t<0||t>=this.children.length)throw new Error("The index "+t+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(e);ni(this.children,i,1),this.children.splice(t,0,e),this.onChildrenChange(t)},t.prototype.getChildAt=function(e){if(e<0||e>=this.children.length)throw new Error("getChildAt: Index ("+e+") does not exist.");return this.children[e]},t.prototype.removeChild=function(e){var t=arguments.length;if(t>1)for(var i=0;i<t;i++)this.removeChild(arguments[i]);else{var r=this.children.indexOf(e);if(-1===r)return null;e.parent=null,e.transform._parentID=-1,ni(this.children,r,1),this._boundsID++,this.onChildrenChange(r),e.emit("removed",this)}return e},t.prototype.removeChildAt=function(e){var t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,ni(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),t},t.prototype.removeChildren=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1],i=e,r="number"==typeof t?t:this.children.length,n=r-i,o=void 0;if(n>0&&n<=r){o=this.children.splice(i,n);for(var s=0;s<o.length;++s)o[s].parent=null,o[s].transform&&(o[s].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(var a=0;a<o.length;++a)o[a].emit("removed",this);return o}if(0===n&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},t.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var e=0,t=this.children.length;e<t;++e){var i=this.children[e];i.visible&&i.updateTransform()}},t.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var e=0;e<this.children.length;e++){var t=this.children[e];t.visible&&t.renderable&&(t.calculateBounds(),t._mask?(t._mask.calculateBounds(),this._bounds.addBoundsMask(t._bounds,t._mask._bounds)):t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds))}this._lastBoundsID=this._boundsID},t.prototype._calculateBounds=function(){},t.prototype.renderWebGL=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvancedWebGL(e);else{this._renderWebGL(e);for(var t=0,i=this.children.length;t<i;++t)this.children[t].renderWebGL(e)}},t.prototype.renderAdvancedWebGL=function(e){e.flush();var t=this._filters,i=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var r=0;r<t.length;r++)t[r].enabled&&this._enabledFilters.push(t[r]);this._enabledFilters.length&&e.filterManager.pushFilter(this,this._enabledFilters)}i&&e.maskManager.pushMask(this,this._mask),this._renderWebGL(e);for(var n=0,o=this.children.length;n<o;n++)this.children[n].renderWebGL(e);e.flush(),i&&e.maskManager.popMask(this,this._mask),t&&this._enabledFilters&&this._enabledFilters.length&&e.filterManager.popFilter()},t.prototype._renderWebGL=function(e){},t.prototype._renderCanvas=function(e){},t.prototype.renderCanvas=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&e.maskManager.pushMask(this._mask),this._renderCanvas(e);for(var t=0,i=this.children.length;t<i;++t)this.children[t].renderCanvas(e);this._mask&&e.maskManager.popMask(e)}},t.prototype.destroy=function(t){e.prototype.destroy.call(this);var i="boolean"==typeof t?t:t&&t.children,r=this.removeChildren(0,this.children.length);if(i)for(var n=0;n<r.length;++n)r[n].destroy(t)},Si(t,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var t=this.getLocalBounds().width;this.scale.x=0!==t?e/t:1,this._width=e}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var t=this.getLocalBounds().height;this.scale.y=0!==t?e/t:1,this._height=e}}]),t}(kr.default);qt=Mr,Mr.prototype.containerUpdateTransform=Mr.prototype.updateTransform,Object.defineProperty(x,"Container",{enumerable:!0,get:function(){return $d(Kt).default}}),Object.defineProperty(x,"Transform",{enumerable:!0,get:function(){return $d(Bt).default}}),Object.defineProperty(x,"TransformStatic",{enumerable:!0,get:function(){return $d(Mt).default}}),Object.defineProperty(x,"TransformBase",{enumerable:!0,get:function(){return $d(It).default}});var Cr,Pr,Ar={};i(Ar),e(Ar,"__esModule",(()=>Cr),(e=>Cr=e)),e(Ar,"default",(()=>Pr),(e=>Pr=e)),Cr=!0;var Ir,Rr,Nr=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),Dr={};i(Dr),e(Dr,"__esModule",(()=>Ir),(e=>Ir=e)),e(Dr,"default",(()=>Rr),(e=>Rr=e)),Ir=!0;var Lr,jr,Fr=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),Br={};i(Br),e(Br,"__esModule",(()=>Lr),(e=>Lr=e)),e(Br,"default",(()=>jr),(e=>jr=e)),Lr=!0;var Ur,Gr,Wr=Hn(ft),zr=Hn(rt),Hr={};i(Hr),e(Hr,"__esModule",(()=>Ur),(e=>Ur=e)),e(Hr,"default",(()=>Gr),(e=>Gr=e)),Ur=!0,Gr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location;if(0===e.indexOf("data:"))return"";t=t||window.location,yn||(yn=document.createElement("a"));yn.href=e;var i=!(e=mn.default.parse(yn.href)).port&&""===t.port||e.port===t.port;return e.hostname===t.hostname&&i&&e.protocol===t.protocol?"":"anonymous"};var Xr,Yr,Vr,qr,Kr,Zr={};e(Zr,"parse",(()=>Xr),(e=>Xr=e)),e(Zr,"resolve",(()=>Yr),(e=>Yr=e)),e(Zr,"resolveObject",(()=>Vr),(e=>Vr=e)),e(Zr,"format",(()=>qr),(e=>qr=e)),e(Zr,"Url",(()=>Kr),(e=>Kr=e));var Jr,Qr=o("iuZoh");function $r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}Jr={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}},Xr=gn,Yr=function(e,t){return gn(e,!1,!0).resolve(t)},Vr=function(e,t){return e?gn(e,!1,!0).resolveObject(t):t},qr=function(e){Jr.isString(e)&&(e=gn(e));return e instanceof $r?e.format():$r.prototype.format.call(e)},Kr=$r;var en,tn,rn=/^([a-z0-9.+-]+:)/i,nn=/:[0-9]*$/,on=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,sn=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),an=["'"].concat(sn),hn=["%","/","?",";","#"].concat(an),un=["/","?","#"],ln=/^[+a-z0-9A-Z_-]{0,63}$/,cn=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,dn={javascript:!0,"javascript:":!0},fn={javascript:!0,"javascript:":!0},pn={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function gn(e,t,i){if(e&&Jr.isObject(e)&&e instanceof $r)return e;var r=new $r;return r.parse(e,t,i),r}en=o("bu5IZ"),tn=o("4gCs1"),$r.prototype.parse=function(e,t,i){if(!Jr.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),n=-1!==r&&r<e.indexOf("#")?"?":"#",o=e.split(n);o[0]=o[0].replace(/\\/g,"/");var s=e=o.join(n);if(s=s.trim(),!i&&1===e.split("#").length){var a=on.exec(s);if(a)return this.path=s,this.href=s,this.pathname=a[1],a[2]?(this.search=a[2],this.query=t?en(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var h=rn.exec(s);if(h){var u=(h=h[0]).toLowerCase();this.protocol=u,s=s.substr(h.length)}if(i||h||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var l="//"===s.substr(0,2);!l||h&&fn[h]||(s=s.substr(2),this.slashes=!0)}if(!fn[h]&&(l||h&&!pn[h])){for(var c,d,f=-1,p=0;p<un.length;p++){-1!==(g=s.indexOf(un[p]))&&(-1===f||g<f)&&(f=g)}-1!==(d=-1===f?s.lastIndexOf("@"):s.lastIndexOf("@",f))&&(c=s.slice(0,d),s=s.slice(d+1),this.auth=decodeURIComponent(c)),f=-1;for(p=0;p<hn.length;p++){var g;-1!==(g=s.indexOf(hn[p]))&&(-1===f||g<f)&&(f=g)}-1===f&&(f=s.length),this.host=s.slice(0,f),s=s.slice(f),this.parseHost(),this.hostname=this.hostname||"";var m="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!m)for(var y=this.hostname.split(/\./),v=(p=0,y.length);p<v;p++){var b=y[p];if(b&&!b.match(ln)){for(var x="",w=0,_=b.length;w<_;w++)b.charCodeAt(w)>127?x+="x":x+=b[w];if(!x.match(ln)){var T=y.slice(0,p),S=y.slice(p+1),E=b.match(cn);E&&(T.push(E[1]),S.unshift(E[2])),S.length&&(s="/"+S.join(".")+s),this.hostname=T.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),m||(this.hostname=Qr.toASCII(this.hostname));var O=this.port?":"+this.port:"",k=this.hostname||"";this.host=k+O,this.href+=this.host,m&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!dn[u])for(p=0,v=an.length;p<v;p++){var M=an[p];if(-1!==s.indexOf(M)){var C=encodeURIComponent(M);C===M&&(C=escape(M)),s=s.split(M).join(C)}}var P=s.indexOf("#");-1!==P&&(this.hash=s.substr(P),s=s.slice(0,P));var A=s.indexOf("?");if(-1!==A?(this.search=s.substr(A),this.query=s.substr(A+1),t&&(this.query=en(this.query)),s=s.slice(0,A)):t&&(this.search="",this.query={}),s&&(this.pathname=s),pn[u]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){O=this.pathname||"";var I=this.search||"";this.path=O+I}return this.href=this.format(),this},$r.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",i=this.pathname||"",r=this.hash||"",n=!1,o="";this.host?n=e+this.host:this.hostname&&(n=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&Jr.isObject(this.query)&&Object.keys(this.query).length&&(o=tn(this.query));var s=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||pn[t])&&!1!==n?(n="//"+(n||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):n||(n=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),t+n+(i=i.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(s=s.replace("#","%23"))+r},$r.prototype.resolve=function(e){return this.resolveObject(gn(e,!1,!0)).format()},$r.prototype.resolveObject=function(e){if(Jr.isString(e)){var t=new $r;t.parse(e,!1,!0),e=t}for(var i=new $r,r=Object.keys(this),n=0;n<r.length;n++){var o=r[n];i[o]=this[o]}if(i.hash=e.hash,""===e.href)return i.href=i.format(),i;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),a=0;a<s.length;a++){var h=s[a];"protocol"!==h&&(i[h]=e[h])}return pn[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(e.protocol&&e.protocol!==i.protocol){if(!pn[e.protocol]){for(var u=Object.keys(e),l=0;l<u.length;l++){var c=u[l];i[c]=e[c]}return i.href=i.format(),i}if(i.protocol=e.protocol,e.host||fn[e.protocol])i.pathname=e.pathname;else{for(var d=(e.pathname||"").split("/");d.length&&!(e.host=d.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),i.pathname=d.join("/")}if(i.search=e.search,i.query=e.query,i.host=e.host||"",i.auth=e.auth,i.hostname=e.hostname||e.host,i.port=e.port,i.pathname||i.search){var f=i.pathname||"",p=i.search||"";i.path=f+p}return i.slashes=i.slashes||e.slashes,i.href=i.format(),i}var g=i.pathname&&"/"===i.pathname.charAt(0),m=e.host||e.pathname&&"/"===e.pathname.charAt(0),y=m||g||i.host&&e.pathname,v=y,b=i.pathname&&i.pathname.split("/")||[],x=(d=e.pathname&&e.pathname.split("/")||[],i.protocol&&!pn[i.protocol]);if(x&&(i.hostname="",i.port=null,i.host&&(""===b[0]?b[0]=i.host:b.unshift(i.host)),i.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host=null),y=y&&(""===d[0]||""===b[0])),m)i.host=e.host||""===e.host?e.host:i.host,i.hostname=e.hostname||""===e.hostname?e.hostname:i.hostname,i.search=e.search,i.query=e.query,b=d;else if(d.length)b||(b=[]),b.pop(),b=b.concat(d),i.search=e.search,i.query=e.query;else if(!Jr.isNullOrUndefined(e.search)){if(x)i.hostname=i.host=b.shift(),(E=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=E.shift(),i.host=i.hostname=E.shift());return i.search=e.search,i.query=e.query,Jr.isNull(i.pathname)&&Jr.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!b.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var w=b.slice(-1)[0],_=(i.host||e.host||b.length>1)&&("."===w||".."===w)||""===w,T=0,S=b.length;S>=0;S--)"."===(w=b[S])?b.splice(S,1):".."===w?(b.splice(S,1),T++):T&&(b.splice(S,1),T--);if(!y&&!v)for(;T--;T)b.unshift("..");!y||""===b[0]||b[0]&&"/"===b[0].charAt(0)||b.unshift(""),_&&"/"!==b.join("/").substr(-1)&&b.push("");var E,O=""===b[0]||b[0]&&"/"===b[0].charAt(0);x&&(i.hostname=i.host=O?"":b.length?b.shift():"",(E=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=E.shift(),i.host=i.hostname=E.shift()));return(y=y||i.host&&b.length)&&!O&&b.unshift(""),b.length?i.pathname=b.join("/"):(i.pathname=null,i.path=null),Jr.isNull(i.pathname)&&Jr.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=e.auth||i.auth,i.slashes=i.slashes||e.slashes,i.href=i.format(),i},$r.prototype.parseHost=function(){var e=this.host,t=nn.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};var mn=function(e){return e&&e.__esModule?e:{default:e}}(Zr);var yn=void 0;var vn,bn,xn,wn,_n,Tn,Sn,En,On,kn,Mn,Cn,Pn,An,In,Rn,Nn,Dn,Ln,jn,Fn,Bn=Hn(Hr),Un={};e(Un,"INT_BITS",(()=>vn),(e=>vn=e)),e(Un,"INT_MAX",(()=>bn),(e=>bn=e)),e(Un,"INT_MIN",(()=>xn),(e=>xn=e)),e(Un,"sign",(()=>wn),(e=>wn=e)),e(Un,"abs",(()=>_n),(e=>_n=e)),e(Un,"min",(()=>Tn),(e=>Tn=e)),e(Un,"max",(()=>Sn),(e=>Sn=e)),e(Un,"isPow2",(()=>En),(e=>En=e)),e(Un,"log2",(()=>On),(e=>On=e)),e(Un,"log10",(()=>kn),(e=>kn=e)),e(Un,"popCount",(()=>Mn),(e=>Mn=e)),e(Un,"countTrailingZeros",(()=>Cn),(e=>Cn=e)),e(Un,"nextPow2",(()=>Pn),(e=>Pn=e)),e(Un,"prevPow2",(()=>An),(e=>An=e)),e(Un,"parity",(()=>In),(e=>In=e)),e(Un,"reverse",(()=>Rn),(e=>Rn=e)),e(Un,"interleave2",(()=>Nn),(e=>Nn=e)),e(Un,"deinterleave2",(()=>Dn),(e=>Dn=e)),e(Un,"interleave3",(()=>Ln),(e=>Ln=e)),e(Un,"deinterleave3",(()=>jn),(e=>jn=e)),e(Un,"nextCombination",(()=>Fn),(e=>Fn=e));function Gn(e){var t=32;return(e&=-e)&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}vn=32,bn=2147483647,xn=-1<<31,wn=function(e){return(e>0)-(e<0)},_n=function(e){var t=e>>31;return(e^t)-t},Tn=function(e,t){return t^(e^t)&-(e<t)},Sn=function(e,t){return e^(e^t)&-(e<t)},En=function(e){return!(e&e-1||!e)},On=function(e){var t,i;return t=(e>65535)<<4,t|=i=((e>>>=t)>255)<<3,t|=i=((e>>>=i)>15)<<2,(t|=i=((e>>>=i)>3)<<1)|(e>>>=i)>>1},kn=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},Mn=function(e){return 16843009*((e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},Cn=Gn,Pn=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1},An=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},In=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,27030>>>(e&=15)&1};var Wn=new Array(256);!function(e){for(var t=0;t<256;++t){var i=t,r=t,n=7;for(i>>>=1;i;i>>>=1)r<<=1,r|=1&i,--n;e[t]=r<<n&255}}(Wn),Rn=function(e){return Wn[255&e]<<24|Wn[e>>>8&255]<<16|Wn[e>>>16&255]<<8|Wn[e>>>24&255]},Nn=function(e,t){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))<<1},Dn=function(e,t){return(e=65535&((e=16711935&((e=252645135&((e=858993459&((e=e>>>t&1431655765)|e>>>1))|e>>>2))|e>>>4))|e>>>16))<<16>>16},Ln=function(e,t,i){return e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2),(e|=(t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2))<<1)|(i=1227133513&((i=3272356035&((i=251719695&((i=4278190335&((i&=1023)|i<<16))|i<<8))|i<<4))|i<<2))<<2},jn=function(e,t){return(e=1023&((e=4278190335&((e=251719695&((e=3272356035&((e=e>>>t&1227133513)|e>>>2))|e>>>4))|e>>>8))|e>>>16))<<22>>22},Fn=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>Gn(e)+1};var zn=Hn(Un);function Hn(e){return e&&e.__esModule?e:{default:e}}var Xn=function(e){function t(i,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return o.uid=si(),o.touched=0,o.resolution=n||Wr.default.RESOLUTION,o.width=100,o.height=100,o.realWidth=100,o.realHeight=100,o.scaleMode=void 0!==r?r:Wr.default.SCALE_MODE,o.hasLoaded=!1,o.isLoading=!1,o.source=null,o.origSource=null,o.imageType=null,o.sourceScale=1,o.premultipliedAlpha=!0,o.imageUrl=null,o.isPowerOfTwo=!1,o.mipmap=Wr.default.MIPMAP_TEXTURES,o.wrapMode=Wr.default.WRAP_MODE,o._glTextures={},o._enabled=0,o._virtalBoundId=-1,o._destroyed=!1,o.textureCacheIds=[],i&&o.loadSource(i),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.update=function(){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions()),this.emit("update",this)},t.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=zn.default.isPow2(this.realWidth)&&zn.default.isPow2(this.realHeight)},t.prototype.loadSource=function(e){var t=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,t&&this.source&&(this.source.onload=null,this.source.onerror=null);var i=!this.source;if(this.source=e,(e.src&&e.complete||e.getContext)&&e.width&&e.height)this._updateImageType(),"svg"===this.imageType?this._loadSvgSource():this._sourceLoaded(),i&&this.emit("loaded",this);else if(!e.getContext){this.isLoading=!0;var r=this;if(e.onload=function(){r._updateImageType(),e.onload=null,e.onerror=null,r.isLoading&&(r.isLoading=!1,r._sourceLoaded(),"svg"!==r.imageType?r.emit("loaded",r):r._loadSvgSource())},e.onerror=function(){e.onload=null,e.onerror=null,r.isLoading&&(r.isLoading=!1,r.emit("error",r))},e.complete&&e.src){if(e.onload=null,e.onerror=null,"svg"===r.imageType)return void r._loadSvgSource();this.isLoading=!1,e.width&&e.height?(this._sourceLoaded(),t&&this.emit("loaded",this)):t&&this.emit("error",this)}}},t.prototype._updateImageType=function(){if(this.imageUrl){var e=ci(this.imageUrl),t=void 0;if(e&&"image"===e.mediaType){var i=e.subType.split("+")[0];if(!(t=di("."+i)))throw new Error("Invalid image type in data URI.")}else(t=di(this.imageUrl))||(t="png");this.imageType=t}},t.prototype._loadSvgSource=function(){if("svg"===this.imageType){var e=ci(this.imageUrl);e?this._loadSvgSourceUsingDataUri(e):this._loadSvgSourceUsingXhr()}},t.prototype._loadSvgSourceUsingDataUri=function(e){var t=void 0;if("base64"===e.encoding){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");t=atob(e.data)}else t=e.data;this._loadSvgSourceUsingString(t)},t.prototype._loadSvgSourceUsingXhr=function(){var e=this,t=new XMLHttpRequest;t.onload=function(){if(t.readyState!==t.DONE||200!==t.status)throw new Error("Failed to load SVG using XHR.");e._loadSvgSourceUsingString(t.response)},t.onerror=function(){return e.emit("error",e)},t.open("GET",this.imageUrl,!0),t.send()},t.prototype._loadSvgSourceUsingString=function(e){var i=fi(e),r=i.width,n=i.height;if(!r||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round(r*this.sourceScale),this.realHeight=Math.round(n*this.sourceScale),this._updateDimensions();var o=document.createElement("canvas");o.width=this.realWidth,o.height=this.realHeight,o._pixiId="canvas_"+si(),o.getContext("2d").drawImage(this.source,0,0,r,n,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=o,t.addToCache(this,o._pixiId),this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)},t.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},t.prototype.destroy=function(){this.imageUrl&&(delete $t[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source=null,this.dispose(),t.removeFromCache(this),this.textureCacheIds=null,this._destroyed=!0},t.prototype.dispose=function(){this.emit("dispose",this)},t.prototype.updateSourceImage=function(e){this.source.src=e,this.loadSource(this.source)},t.fromImage=function(e,i,r,n){var o=Qt[e];if(!o){var s=new Image;void 0===i&&0!==e.indexOf("data:")?s.crossOrigin=(0,Bn.default)(e):i&&(s.crossOrigin="string"==typeof i?i:"anonymous"),(o=new t(s,r)).imageUrl=e,n&&(o.sourceScale=n),o.resolution=li(e),s.src=e,t.addToCache(o,e)}return o},t.fromCanvas=function(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";e._pixiId||(e._pixiId=r+"_"+si());var n=Qt[e._pixiId];return n||(n=new t(e,i),t.addToCache(n,e._pixiId)),n},t.from=function(e,i,r){if("string"==typeof e)return t.fromImage(e,void 0,i,r);if(e instanceof HTMLImageElement){var n=e.src,o=Qt[n];return o||((o=new t(e,i)).imageUrl=n,r&&(o.sourceScale=r),o.resolution=li(n),t.addToCache(o,n)),o}return e instanceof HTMLCanvasElement?t.fromCanvas(e,i):e},t.addToCache=function(e,t){t&&(-1===e.textureCacheIds.indexOf(t)&&e.textureCacheIds.push(t),Qt[t]&&console.warn("BaseTexture added to the cache with an id ["+t+"] that already had an entry"),Qt[t]=e)},t.removeFromCache=function(e){if("string"==typeof e){var t=Qt[e];if(t){var i=t.textureCacheIds.indexOf(e);return i>-1&&t.textureCacheIds.splice(i,1),delete Qt[e],t}}else if(e&&e.textureCacheIds){for(var r=0;r<e.textureCacheIds.length;++r)delete Qt[e.textureCacheIds[r]];return e.textureCacheIds.length=0,e}return null},t}(zr.default);jr=Xn;var Yn,Vn,qn=Ro(Br),Kn={};i(Kn),e(Kn,"__esModule",(()=>Yn),(e=>Yn=e)),e(Kn,"default",(()=>Vn),(e=>Vn=e)),Yn=!0;var Zn,Jn,Qn,$n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),eo=bo(Br),to={};e(to,"__esModule",(()=>Zn),(e=>Zn=e)),e(to,"Ticker",(()=>Jn),(e=>Jn=e)),e(to,"shared",(()=>Qn),(e=>Qn=e)),Zn=!0,Jn=Qn=void 0;var io,ro,no={};i(no),e(no,"__esModule",(()=>io),(e=>io=e)),e(no,"default",(()=>ro),(e=>ro=e)),io=!0;var oo,so,ao=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),ho=po(ft),uo={};function lo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i(uo),e(uo,"__esModule",(()=>oo),(e=>oo=e)),e(uo,"default",(()=>so),(e=>so=e)),oo=!0;var co=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];lo(this,e),this.fn=t,this.context=i,this.priority=r,this.once=n,this.next=null,this.previous=null,this._destroyed=!1}return e.prototype.match=function(e,t){return t=t||null,this.fn===e&&this.context===t},e.prototype.emit=function(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));var t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},e.prototype.connect=function(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this},e.prototype.destroy=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var t=this.next;return this.next=e?null:t,this.previous=null,t},e}();so=co;var fo=po(uo);function po(e){return e&&e.__esModule?e:{default:e}}var go=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._head=new fo.default(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/ho.default.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return e.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},e.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},e.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},e.prototype.add=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:B.NORMAL;return this._addListener(new fo.default(e,t,i))},e.prototype.addOnce=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:B.NORMAL;return this._addListener(new fo.default(e,t,i,!0))},e.prototype._addListener=function(e){var t=this._head.next,i=this._head;if(t){for(;t;){if(e.priority>t.priority){e.connect(i);break}i=t,t=t.next}e.previous||e.connect(i)}else e.connect(i);return this._startIfPossible(),this},e.prototype.remove=function(e,t){for(var i=this._head.next;i;)i=i.match(e,t)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this},e.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},e.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},e.prototype.destroy=function(){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null},e.prototype.update=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now(),t=void 0;if(e>this.lastTime){(t=this.elapsedMS=e-this.lastTime)>this._maxElapsedMS&&(t=this._maxElapsedMS),this.deltaTime=t*ho.default.TARGET_FPMS*this.speed;for(var i=this._head,r=i.next;r;)r=r.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=e},ao(e,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(e){var t=Math.min(Math.max(0,e)/1e3,ho.default.TARGET_FPMS);this._maxElapsedMS=1/t}}]),e}();ro=go;var mo=function(e){return e&&e.__esModule?e:{default:e}}(no);var yo=new mo.default;yo.autoStart=!0,yo.destroy=function(){},Qn=yo,Jn=mo.default;var vo=bo(Hr);function bo(e){return e&&e.__esModule?e:{default:e}}function xo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wo(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _o=function(e){function t(i,r){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(xo(this,t),!i)throw new Error("No video source element specified.");(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0);var o=wo(this,e.call(this,i,r));return o.width=i.videoWidth,o.height=i.videoHeight,o._autoUpdate=!0,o._isAutoUpdating=!1,o.autoPlay=n,o.update=o.update.bind(o),o._onCanPlay=o._onCanPlay.bind(o),i.addEventListener("play",o._onPlayStart.bind(o)),i.addEventListener("pause",o._onPlayStop.bind(o)),o.hasLoaded=!1,o.__loaded=!1,o._isSourceReady()?o._onCanPlay():(i.addEventListener("canplay",o._onCanPlay),i.addEventListener("canplaythrough",o._onCanPlay)),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._isSourcePlaying=function(){var e=this.source;return e.currentTime>0&&!1===e.paused&&!1===e.ended&&e.readyState>2},t.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},t.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(Qn.add(this.update,this,B.HIGH),this._isAutoUpdating=!0)},t.prototype._onPlayStop=function(){this._isAutoUpdating&&(Qn.remove(this.update,this),this._isAutoUpdating=!1)},t.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},t.prototype.destroy=function(){this._isAutoUpdating&&Qn.remove(this.update,this),this.source&&this.source._pixiId&&(eo.default.removeFromCache(this.source._pixiId),delete this.source._pixiId,this.source.pause(),this.source.src="",this.source.load()),e.prototype.destroy.call(this)},t.fromVideo=function(e,i,r){e._pixiId||(e._pixiId="video_"+si());var n=Qt[e._pixiId];return n||(n=new t(e,i,r),eo.default.addToCache(n,e._pixiId)),n},t.fromUrl=function(e,i,r,n){var o=document.createElement("video");o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline","");var s=Array.isArray(e)?e[0].src||e[0]:e.src||e;if(void 0===r&&0!==s.indexOf("data:")?o.crossOrigin=(0,vo.default)(s):r&&(o.crossOrigin="string"==typeof r?r:"anonymous"),Array.isArray(e))for(var a=0;a<e.length;++a)o.appendChild(To(e[a].src||e[a],e[a].mime));else o.appendChild(To(s,e.mime));return o.load(),t.fromVideo(o,i,n)},$n(t,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isAutoUpdating?(Qn.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(Qn.add(this.update,this,B.HIGH),this._isAutoUpdating=!0))}}]),t}(eo.default);function To(e,t){if(!t){var i=e.split("?").shift().toLowerCase();t="video/"+i.substr(i.lastIndexOf(".")+1)}var r=document.createElement("source");return r.src=e,r.type=t,r}Vn=_o,_o.fromUrls=_o.fromUrl;var So,Eo,Oo=Ro(Kn),ko={};i(ko),e(ko,"__esModule",(()=>So),(e=>So=e)),e(ko,"default",(()=>Eo),(e=>Eo=e)),So=!0;var Mo=function(e){return e&&e.__esModule?e:{default:e}}(he);var Co=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return e.prototype.set=function(e,t,i){var r=t.width,n=t.height;if(i){var o=e.width/2/r,s=e.height/2/n,a=e.x/r+o,h=e.y/n+s;i=Mo.default.add(i,Mo.default.NW),this.x0=a+o*Mo.default.uX(i),this.y0=h+s*Mo.default.uY(i),i=Mo.default.add(i,2),this.x1=a+o*Mo.default.uX(i),this.y1=h+s*Mo.default.uY(i),i=Mo.default.add(i,2),this.x2=a+o*Mo.default.uX(i),this.y2=h+s*Mo.default.uY(i),i=Mo.default.add(i,2),this.x3=a+o*Mo.default.uX(i),this.y3=h+s*Mo.default.uY(i)}else this.x0=e.x/r,this.y0=e.y/n,this.x1=(e.x+e.width)/r,this.y1=e.y/n,this.x2=(e.x+e.width)/r,this.y2=(e.y+e.height)/n,this.x3=e.x/r,this.y3=(e.y+e.height)/n;this.uvsUint32[0]=(65535&Math.round(65535*this.y0))<<16|65535&Math.round(65535*this.x0),this.uvsUint32[1]=(65535&Math.round(65535*this.y1))<<16|65535&Math.round(65535*this.x1),this.uvsUint32[2]=(65535&Math.round(65535*this.y2))<<16|65535&Math.round(65535*this.x2),this.uvsUint32[3]=(65535&Math.round(65535*this.y3))<<16|65535&Math.round(65535*this.x3)},e}();Eo=Co;var Po=Ro(ko),Ao=Ro(rt),Io=Ro(ft);function Ro(e){return e&&e.__esModule?e:{default:e}}var No=function(e){function t(i,r,n,o,s,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var h=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));if(h.noFrame=!1,r||(h.noFrame=!0,r=new z.Rectangle(0,0,1,1)),i instanceof t&&(i=i.baseTexture),h.baseTexture=i,h._frame=r,h.trim=o,h.valid=!1,h.requiresUpdate=!1,h._uvs=null,h.orig=n||r,h._rotate=Number(s||0),!0===s)h._rotate=2;else if(h._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return i.hasLoaded?(h.noFrame&&(r=new z.Rectangle(0,0,i.width,i.height),i.on("update",h.onBaseTextureUpdated,h)),h.frame=r):i.once("loaded",h.onBaseTextureLoaded,h),h.defaultAnchor=a?new z.Point(a.x,a.y):new z.Point(0,0),h._updateID=0,h.transform=null,h.textureCacheIds=[],h}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.update=function(){this.baseTexture.update()},t.prototype.onBaseTextureLoaded=function(e){this._updateID++,this.noFrame?this.frame=new z.Rectangle(0,0,e.width,e.height):this.frame=this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},t.prototype.onBaseTextureUpdated=function(e){this._updateID++,this._frame.width=e.width,this._frame.height=e.height,this.emit("update",this)},t.prototype.destroy=function(e){this.baseTexture&&(e&&($t[this.baseTexture.imageUrl]&&t.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,t.removeFromCache(this),this.textureCacheIds=null},t.prototype.clone=function(){return new t(this.baseTexture,this.frame,this.orig,this.trim,this.rotate,this.defaultAnchor)},t.prototype._updateUvs=function(){this._uvs||(this._uvs=new Po.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},t.fromImage=function(e,i,r,n){var o=$t[e];return o||(o=new t(qn.default.fromImage(e,i,r,n)),t.addToCache(o,e)),o},t.fromFrame=function(e){var t=$t[e];if(!t)throw new Error('The frameId "'+e+'" does not exist in the texture cache');return t},t.fromCanvas=function(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";return new t(qn.default.fromCanvas(e,i,r))},t.fromVideo=function(e,i,r,n){return"string"==typeof e?t.fromVideoUrl(e,i,r,n):new t(Oo.default.fromVideo(e,i,n))},t.fromVideoUrl=function(e,i,r,n){return new t(Oo.default.fromUrl(e,i,r,n))},t.from=function(e){if("string"==typeof e){var i=$t[e];return i||(null!==e.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)?t.fromVideoUrl(e):t.fromImage(e))}return e instanceof HTMLImageElement?new t(qn.default.from(e)):e instanceof HTMLCanvasElement?t.fromCanvas(e,Io.default.SCALE_MODE,"HTMLCanvasElement"):e instanceof HTMLVideoElement?t.fromVideo(e):e instanceof qn.default?new t(e):e},t.fromLoader=function(e,i,r){var n=new qn.default(e,void 0,li(i)),o=new t(n);return n.imageUrl=i,r||(r=i),qn.default.addToCache(o.baseTexture,r),t.addToCache(o,r),r!==i&&(qn.default.addToCache(o.baseTexture,i),t.addToCache(o,i)),o},t.addToCache=function(e,t){t&&(-1===e.textureCacheIds.indexOf(t)&&e.textureCacheIds.push(t),$t[t]&&console.warn("Texture added to the cache with an id ["+t+"] that already had an entry"),$t[t]=e)},t.removeFromCache=function(e){if("string"==typeof e){var t=$t[e];if(t){var i=t.textureCacheIds.indexOf(e);return i>-1&&t.textureCacheIds.splice(i,1),delete $t[e],t}}else if(e&&e.textureCacheIds){for(var r=0;r<e.textureCacheIds.length;++r)$t[e.textureCacheIds[r]]===e&&delete $t[e.textureCacheIds[r]];return e.textureCacheIds.length=0,e}return null},Fr(t,[{key:"frame",get:function(){return this._frame},set:function(e){this._frame=e,this.noFrame=!1;var t=e.x,i=e.y,r=e.width,n=e.height,o=t+r>this.baseTexture.width,s=i+n>this.baseTexture.height;if(o||s){var a=o&&s?"and":"or",h="X: "+t+" + "+r+" = "+(t+r)+" > "+this.baseTexture.width,u="Y: "+i+" + "+n+" = "+(i+n)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+h+" "+a+" "+u)}this.valid=r&&n&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=e),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]),t}(Ao.default);function Do(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}Rr=No,No.EMPTY=new No(new qn.default),Do(No.EMPTY),Do(No.EMPTY.baseTexture),No.WHITE=function(){var e=document.createElement("canvas");e.width=10,e.height=10;var t=e.getContext("2d");return t.fillStyle="white",t.fillRect(0,0,10,10),new No(new qn.default(e))}(),Do(No.WHITE),Do(No.WHITE.baseTexture);var Lo=Fo(Dr),jo=Fo(Kt);function Fo(e){return e&&e.__esModule?e:{default:e}}var Bo=new z.Point,Uo=function(e){function t(i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return r._anchor=new z.ObservablePoint(r._onAnchorUpdate,r,i?i.defaultAnchor.x:0,i?i.defaultAnchor.y:0),r._texture=null,r._width=0,r._height=0,r._tint=null,r._tintRGB=null,r.tint=16777215,r.blendMode=k.NORMAL,r.shader=null,r.cachedTint=16777215,r.texture=i||Lo.default.EMPTY,r.vertexData=new Float32Array(8),r.vertexTrimmedData=null,r._transformID=-1,r._textureID=-1,r._transformTrimmedID=-1,r._textureTrimmedID=-1,r.pluginName="sprite",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this.cachedTint=16777215,this._width&&(this.scale.x=yi(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=yi(this.scale.y)*this._height/this._texture.orig.height)},t.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},t.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var e=this._texture,t=this.transform.worldTransform,i=t.a,r=t.b,n=t.c,o=t.d,s=t.tx,a=t.ty,h=this.vertexData,u=e.trim,l=e.orig,c=this._anchor,d=0,f=0,p=0,g=0;u?(d=(f=u.x-c._x*l.width)+u.width,p=(g=u.y-c._y*l.height)+u.height):(d=(f=-c._x*l.width)+l.width,p=(g=-c._y*l.height)+l.height),h[0]=i*f+n*g+s,h[1]=o*g+r*f+a,h[2]=i*d+n*g+s,h[3]=o*g+r*d+a,h[4]=i*d+n*p+s,h[5]=o*p+r*d+a,h[6]=i*f+n*p+s,h[7]=o*p+r*f+a}},t.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var e=this._texture,t=this.vertexTrimmedData,i=e.orig,r=this._anchor,n=this.transform.worldTransform,o=n.a,s=n.b,a=n.c,h=n.d,u=n.tx,l=n.ty,c=-r._x*i.width,d=c+i.width,f=-r._y*i.height,p=f+i.height;t[0]=o*c+a*f+u,t[1]=h*f+s*c+l,t[2]=o*d+a*f+u,t[3]=h*f+s*d+l,t[4]=o*d+a*p+u,t[5]=h*p+s*d+l,t[6]=o*c+a*p+u,t[7]=h*p+s*c+l},t.prototype._renderWebGL=function(e){this.calculateVertices(),e.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)},t.prototype._renderCanvas=function(e){e.plugins[this.pluginName].render(this)},t.prototype._calculateBounds=function(){var e=this._texture.trim,t=this._texture.orig;!e||e.width===t.width&&e.height===t.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},t.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new z.Rectangle),t=this._localBoundsRect),this._bounds.getRectangle(t)):e.prototype.getLocalBounds.call(this,t)},t.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,Bo);var t=this._texture.orig.width,i=this._texture.orig.height,r=-t*this.anchor.x,n=0;return Bo.x>=r&&Bo.x<r+t&&(n=-i*this.anchor.y,Bo.y>=n&&Bo.y<n+i)},t.prototype.destroy=function(t){if(e.prototype.destroy.call(this,t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof t?t:t&&t.texture){var i="boolean"==typeof t?t:t&&t.baseTexture;this._texture.destroy(!!i)}this._texture=null,this.shader=null},t.from=function(e){return new t(Lo.default.from(e))},t.fromFrame=function(e){var i=$t[e];if(!i)throw new Error('The frameId "'+e+'" does not exist in the texture cache');return new t(i)},t.fromImage=function(e,i,r){return new t(Lo.default.fromImage(e,i,r))},Nr(t,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){var t=yi(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){var t=yi(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}},{key:"anchor",get:function(){return this._anchor},set:function(e){this._anchor.copy(e)}},{key:"tint",get:function(){return this._tint},set:function(e){this._tint=e,this._tintRGB=(e>>16)+(65280&e)+((255&e)<<16)}},{key:"texture",get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture=e||Lo.default.EMPTY,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.hasLoaded?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}]),t}(jo.default);Pr=Uo,Object.defineProperty(x,"Sprite",{enumerable:!0,get:function(){return $d(Ar).default}});var Go,Wo,zo={};i(zo),e(zo,"__esModule",(()=>Go),(e=>Go=e)),e(zo,"default",(()=>Wo),(e=>Wo=e)),Go=!0;var Ho,Xo,Yo={};i(Yo),e(Yo,"__esModule",(()=>Ho),(e=>Ho=e)),e(Yo,"default",(()=>Xo),(e=>Xo=e)),Ho=!0;var Vo,qo,Ko={};i(Ko),e(Ko,"__esModule",(()=>Vo),(e=>Vo=e)),e(Ko,"default",(()=>qo),(e=>qo=e)),Vo=!0;var Zo,Jo,Qo=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),$o=vs(ft),es=vs(Kt),ts={};i(ts),e(ts,"__esModule",(()=>Zo),(e=>Zo=e)),e(ts,"default",(()=>Jo),(e=>Jo=e)),Zo=!0;var is,rs,ns={};i(ns),e(ns,"__esModule",(()=>is),(e=>is=e)),e(ns,"default",(()=>rs),(e=>rs=e)),is=!0;var os=as(Br),ss=as(ft);function as(e){return e&&e.__esModule?e:{default:e}}function hs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function us(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var ls=function(e){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments[2],o=arguments[3];hs(this,t);var s=us(this,e.call(this,null,n));return s.resolution=o||ss.default.RESOLUTION,s.width=Math.ceil(i),s.height=Math.ceil(r),s.realWidth=s.width*s.resolution,s.realHeight=s.height*s.resolution,s.scaleMode=void 0!==n?n:ss.default.SCALE_MODE,s.hasLoaded=!0,s._glRenderTargets={},s._canvasRenderTarget=null,s.valid=!1,s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.resize=function(e,t){e=Math.ceil(e),t=Math.ceil(t),e===this.width&&t===this.height||(this.valid=e>0&&t>0,this.width=e,this.height=t,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},t.prototype.destroy=function(){e.prototype.destroy.call(this,!0),this.renderer=null},t}(os.default);rs=ls;var cs=ds(ns);function ds(e){return e&&e.__esModule?e:{default:e}}function fs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ps(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var gs=function(e){function t(i,r){fs(this,t);var n=null;if(!(i instanceof cs.default)){var o=arguments[1],s=arguments[2],a=arguments[3],h=arguments[4];console.warn("Please use RenderTexture.create("+o+", "+s+") instead of the ctor directly."),n=arguments[0],r=null,i=new cs.default(o,s,a,h)}var u=ps(this,e.call(this,i,r));return u.legacyRenderer=n,u.valid=!0,u._updateUvs(),u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.resize=function(e,t,i){e=Math.ceil(e),t=Math.ceil(t),this.valid=e>0&&t>0,this._frame.width=this.orig.width=e,this._frame.height=this.orig.height=t,i||this.baseTexture.resize(e,t),this._updateUvs()},t.create=function(e,i,r,n){return new t(new cs.default(e,i,r,n))},t}(ds(Dr).default);Jo=gs;var ms=vs(ts),ys=vs(rt);function vs(e){return e&&e.__esModule?e:{default:e}}var bs=new z.Matrix,xs=function(e){function t(i,r,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return gi(i),"number"==typeof r&&(r=Object.assign({width:r,height:n||$o.default.RENDER_OPTIONS.height},o)),r=Object.assign({},$o.default.RENDER_OPTIONS,r),s.options=r,s.type=O.UNKNOWN,s.screen=new z.Rectangle(0,0,r.width,r.height),s.view=r.view||document.createElement("canvas"),s.resolution=r.resolution||$o.default.RESOLUTION,s.transparent=r.transparent,s.autoResize=r.autoResize||!1,s.blendModes=null,s.preserveDrawingBuffer=r.preserveDrawingBuffer,s.clearBeforeRender=r.clearBeforeRender,s.roundPixels=r.roundPixels,s._backgroundColor=0,s._backgroundColorRgba=[0,0,0,0],s._backgroundColorString="#000000",s.backgroundColor=r.backgroundColor||s._backgroundColor,s._tempDisplayObjectParent=new es.default,s._lastObjectRendered=s._tempDisplayObjectParent,s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.resize=function(e,t){this.screen.width=e,this.screen.height=t,this.view.width=e*this.resolution,this.view.height=t*this.resolution,this.autoResize&&(this.view.style.width=e+"px",this.view.style.height=t+"px")},t.prototype.generateTexture=function(e,t,i,r){r=r||e.getLocalBounds();var n=ms.default.create(0|r.width,0|r.height,t,i);return bs.tx=-r.x,bs.ty=-r.y,this.render(e,n,!1,bs,!!e.parent),n},t.prototype.destroy=function(e){e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=O.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},Qo(t,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=hi(e),ai(e,this._backgroundColorRgba)}}]),t}(ys.default);qo=xs;var ws,_s,Ts=Hs(Ko),Ss={};i(Ss),e(Ss,"__esModule",(()=>ws),(e=>ws=e)),e(Ss,"default",(()=>_s),(e=>_s=e)),ws=!0;var Es=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.renderer=t}return e.prototype.pushMask=function(e){var t=this.renderer;t.context.save();var i=e.alpha,r=e.transform.worldTransform,n=t.resolution;t.context.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n,r.ty*n),e._texture||(this.renderGraphicsShape(e),t.context.clip()),e.worldAlpha=i},e.prototype.renderGraphicsShape=function(e){var t=this.renderer.context,i=e.graphicsData.length;if(0!==i){t.beginPath();for(var r=0;r<i;r++){var n=e.graphicsData[r],o=n.shape;if(n.type===D.POLY){var s=o.points,a=n.holes,h=void 0,u=void 0;t.moveTo(s[0],s[1]);for(var l=2;l<s.length;l+=2)t.lineTo(s[l],s[l+1]);if(s[0]===s[s.length-2]&&s[1]===s[s.length-1]&&t.closePath(),a.length>0){h=0;for(var c=0;c<s.length;c+=2)h+=s[c]*s[c+3]-s[c+1]*s[c+2];for(var d=0;d<a.length;d++){s=a[d].points,u=0;for(var f=0;f<s.length;f+=2)u+=s[f]*s[f+3]-s[f+1]*s[f+2];if(t.moveTo(s[0],s[1]),u*h<0)for(var p=2;p<s.length;p+=2)t.lineTo(s[p],s[p+1]);else for(var g=s.length-2;g>=2;g-=2)t.lineTo(s[g],s[g+1])}}}else if(n.type===D.RECT)t.rect(o.x,o.y,o.width,o.height),t.closePath();else if(n.type===D.CIRC)t.arc(o.x,o.y,o.radius,0,2*Math.PI),t.closePath();else if(n.type===D.ELIP){var m=2*o.width,y=2*o.height,v=o.x-m/2,b=o.y-y/2,x=.5522848,w=m/2*x,_=y/2*x,T=v+m,S=b+y,E=v+m/2,O=b+y/2;t.moveTo(v,O),t.bezierCurveTo(v,O-_,E-w,b,E,b),t.bezierCurveTo(E+w,b,T,O-_,T,O),t.bezierCurveTo(T,O+_,E+w,S,E,S),t.bezierCurveTo(E-w,S,v,O+_,v,O),t.closePath()}else if(n.type===D.RREC){var k=o.x,M=o.y,C=o.width,P=o.height,A=o.radius,I=Math.min(C,P)/2|0;A=A>I?I:A,t.moveTo(k,M+A),t.lineTo(k,M+P-A),t.quadraticCurveTo(k,M+P,k+A,M+P),t.lineTo(k+C-A,M+P),t.quadraticCurveTo(k+C,M+P,k+C,M+P-A),t.lineTo(k+C,M+A),t.quadraticCurveTo(k+C,M,k+C-A,M),t.lineTo(k+A,M),t.quadraticCurveTo(k,M,k,M+A),t.closePath()}}}},e.prototype.popMask=function(e){e.context.restore(),e.invalidateBlendMode()},e.prototype.destroy=function(){},e}();_s=Es;var Os,ks,Ms=Hs(Ss),Cs={};i(Cs),e(Cs,"__esModule",(()=>Os),(e=>Os=e)),e(Cs,"default",(()=>ks),(e=>ks=e)),Os=!0;var Ps=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),As=function(e){return e&&e.__esModule?e:{default:e}}(ft);var Is=function(){function e(t,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||As.default.RESOLUTION,this.resize(t,i)}return e.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},e.prototype.resize=function(e,t){this.canvas.width=e*this.resolution,this.canvas.height=t*this.resolution},e.prototype.destroy=function(){this.context=null,this.canvas=null},Ps(e,[{key:"width",get:function(){return this.canvas.width},set:function(e){this.canvas.width=e}},{key:"height",get:function(){return this.canvas.height},set:function(e){this.canvas.height=e}}]),e}();ks=Is;var Rs,Ns,Ds=Hs(Cs),Ls={};i(Ls),e(Ls,"__esModule",(()=>Rs),(e=>Rs=e)),e(Ls,"default",(()=>Ns),(e=>Ns=e)),Rs=!0,Ns=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,Gs.default)()?(e[k.NORMAL]="source-over",e[k.ADD]="lighter",e[k.MULTIPLY]="multiply",e[k.SCREEN]="screen",e[k.OVERLAY]="overlay",e[k.DARKEN]="darken",e[k.LIGHTEN]="lighten",e[k.COLOR_DODGE]="color-dodge",e[k.COLOR_BURN]="color-burn",e[k.HARD_LIGHT]="hard-light",e[k.SOFT_LIGHT]="soft-light",e[k.DIFFERENCE]="difference",e[k.EXCLUSION]="exclusion",e[k.HUE]="hue",e[k.SATURATION]="saturate",e[k.COLOR]="color",e[k.LUMINOSITY]="luminosity"):(e[k.NORMAL]="source-over",e[k.ADD]="lighter",e[k.MULTIPLY]="source-over",e[k.SCREEN]="source-over",e[k.OVERLAY]="source-over",e[k.DARKEN]="source-over",e[k.LIGHTEN]="source-over",e[k.COLOR_DODGE]="source-over",e[k.COLOR_BURN]="source-over",e[k.HARD_LIGHT]="source-over",e[k.SOFT_LIGHT]="source-over",e[k.DIFFERENCE]="source-over",e[k.EXCLUSION]="source-over",e[k.HUE]="source-over",e[k.SATURATION]="source-over",e[k.COLOR]="source-over",e[k.LUMINOSITY]="source-over");return e[k.NORMAL_NPM]=e[k.NORMAL],e[k.ADD_NPM]=e[k.ADD],e[k.SCREEN_NPM]=e[k.SCREEN],e};var js,Fs,Bs={};function Us(e){var t=document.createElement("canvas");t.width=6,t.height=1;var i=t.getContext("2d");return i.fillStyle=e,i.fillRect(0,0,6,1),t}i(Bs),e(Bs,"__esModule",(()=>js),(e=>js=e)),e(Bs,"default",(()=>Fs),(e=>Fs=e)),js=!0,Fs=function(){if("undefined"==typeof document)return!1;var e=Us("#ff00ff"),t=Us("#ffff00"),i=document.createElement("canvas");i.width=6,i.height=1;var r=i.getContext("2d");r.globalCompositeOperation="multiply",r.drawImage(e,0,0),r.drawImage(t,2,0);var n=r.getImageData(2,0,1,1);if(!n)return!1;var o=n.data;return 255===o[0]&&0===o[1]&&0===o[2]};var Gs=function(e){return e&&e.__esModule?e:{default:e}}(Bs);var Ws=Hs(Ls),zs=Hs(ft);function Hs(e){return e&&e.__esModule?e:{default:e}}var Xs=function(e){function t(i,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,"Canvas",i,r,n));return o.type=O.CANVAS,o.rootContext=o.view.getContext("2d",{alpha:o.transparent}),o.context=o.rootContext,o.refresh=!0,o.maskManager=new Ms.default(o),o.smoothProperty="imageSmoothingEnabled",o.rootContext.imageSmoothingEnabled||(o.rootContext.webkitImageSmoothingEnabled?o.smoothProperty="webkitImageSmoothingEnabled":o.rootContext.mozImageSmoothingEnabled?o.smoothProperty="mozImageSmoothingEnabled":o.rootContext.oImageSmoothingEnabled?o.smoothProperty="oImageSmoothingEnabled":o.rootContext.msImageSmoothingEnabled&&(o.smoothProperty="msImageSmoothingEnabled")),o.initPlugins(),o.blendModes=(0,Ws.default)(),o._activeBlendMode=null,o.renderingToScreen=!1,o.resize(o.options.width,o.options.height),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(e,t,i,r,n){if(this.view){this.renderingToScreen=!t,this.emit("prerender");var o=this.resolution;t?((t=t.baseTexture||t)._canvasRenderTarget||(t._canvasRenderTarget=new Ds.default(t.width,t.height,t.resolution),t.source=t._canvasRenderTarget.canvas,t.valid=!0),this.context=t._canvasRenderTarget.context,this.resolution=t._canvasRenderTarget.resolution):this.context=this.rootContext;var s=this.context;if(t||(this._lastObjectRendered=e),!n){var a=e.parent,h=this._tempDisplayObjectParent.transform.worldTransform;r?(r.copy(h),this._tempDisplayObjectParent.transform._worldID=-1):h.identity(),e.parent=this._tempDisplayObjectParent,e.updateTransform(),e.parent=a}s.save(),s.setTransform(1,0,0,1,0,0),s.globalAlpha=1,this._activeBlendMode=k.NORMAL,s.globalCompositeOperation=this.blendModes[k.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(s.fillStyle="black",s.clear()),(void 0!==i?i:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?s.clearRect(0,0,this.width,this.height):(s.fillStyle=this._backgroundColorString,s.fillRect(0,0,this.width,this.height)));var u=this.context;this.context=s,e.renderCanvas(this),this.context=u,s.restore(),this.resolution=o,this.emit("postrender")}},t.prototype.clear=function(e){var t=this.context;e=e||this._backgroundColorString,!this.transparent&&e?(t.fillStyle=e,t.fillRect(0,0,this.width,this.height)):t.clearRect(0,0,this.width,this.height)},t.prototype.setBlendMode=function(e){this._activeBlendMode!==e&&(this._activeBlendMode=e,this.context.globalCompositeOperation=this.blendModes[e])},t.prototype.destroy=function(t){this.destroyPlugins(),e.prototype.destroy.call(this,t),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},t.prototype.resize=function(t,i){e.prototype.resize.call(this,t,i),this.smoothProperty&&(this.rootContext[this.smoothProperty]=zs.default.SCALE_MODE===C.LINEAR)},t.prototype.invalidateBlendMode=function(){this._activeBlendMode=this.blendModes.indexOf(this.context.globalCompositeOperation)},t}(Ts.default);Xo=Xs,ii.mixin(Xs);var Ys,Vs,qs=$s(Yo),Ks={};i(Ks),e(Ks,"__esModule",(()=>Ys),(e=>Ys=e)),e(Ks,"default",(()=>Vs),(e=>Vs=e)),Ys=!0;var Zs=function(e){return e&&e.__esModule?e:{default:e}}(Bs);var Js={getTintedTexture:function(e,t){var i=e._texture,r="#"+("00000"+(0|(t=Js.roundColor(t))).toString(16)).substr(-6);i.tintCache=i.tintCache||{};var n=i.tintCache[r],o=void 0;if(n){if(n.tintId===i._updateID)return i.tintCache[r];o=i.tintCache[r]}else o=Js.canvas||document.createElement("canvas");if(Js.tintMethod(i,t,o),o.tintId=i._updateID,Js.convertTintToImage){var s=new Image;s.src=o.toDataURL(),i.tintCache[r]=s}else i.tintCache[r]=o,Js.canvas=null;return o},tintWithMultiply:function(e,t,i){var r=i.getContext("2d"),n=e._frame.clone(),o=e.baseTexture.resolution;n.x*=o,n.y*=o,n.width*=o,n.height*=o,i.width=Math.ceil(n.width),i.height=Math.ceil(n.height),r.save(),r.fillStyle="#"+("00000"+(0|t).toString(16)).substr(-6),r.fillRect(0,0,n.width,n.height),r.globalCompositeOperation="multiply",r.drawImage(e.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),r.globalCompositeOperation="destination-atop",r.drawImage(e.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),r.restore()},tintWithOverlay:function(e,t,i){var r=i.getContext("2d"),n=e._frame.clone(),o=e.baseTexture.resolution;n.x*=o,n.y*=o,n.width*=o,n.height*=o,i.width=Math.ceil(n.width),i.height=Math.ceil(n.height),r.save(),r.globalCompositeOperation="copy",r.fillStyle="#"+("00000"+(0|t).toString(16)).substr(-6),r.fillRect(0,0,n.width,n.height),r.globalCompositeOperation="destination-atop",r.drawImage(e.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),r.restore()},tintWithPerPixel:function(e,t,i){var r=i.getContext("2d"),n=e._frame.clone(),o=e.baseTexture.resolution;n.x*=o,n.y*=o,n.width*=o,n.height*=o,i.width=Math.ceil(n.width),i.height=Math.ceil(n.height),r.save(),r.globalCompositeOperation="copy",r.drawImage(e.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),r.restore();for(var s=ai(t),a=s[0],h=s[1],u=s[2],l=r.getImageData(0,0,n.width,n.height),c=l.data,d=0;d<c.length;d+=4)c[d+0]*=a,c[d+1]*=h,c[d+2]*=u;r.putImageData(l,0,0)},roundColor:function(e){var t=Js.cacheStepsPerColorChannel,i=ai(e);return i[0]=Math.min(255,i[0]/t*t),i[1]=Math.min(255,i[1]/t*t),i[2]=Math.min(255,i[2]/t*t),ui(i)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,Zs.default)(),tintMethod:0};Js.tintMethod=Js.canUseMultiply?Js.tintWithMultiply:Js.tintWithPerPixel,Vs=Js;var Qs=$s(Ks);function $s(e){return e&&e.__esModule?e:{default:e}}var ea=new z.Matrix,ta=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.renderer=t}return e.prototype.render=function(e){var t=e._texture,i=this.renderer,r=t._frame.width,n=t._frame.height,o=e.transform.worldTransform,s=0,a=0;if(!(t.orig.width<=0||t.orig.height<=0)&&t.baseTexture.source&&(i.setBlendMode(e.blendMode),t.valid)){i.context.globalAlpha=e.worldAlpha;var h=t.baseTexture.scaleMode===C.LINEAR;i.smoothProperty&&i.context[i.smoothProperty]!==h&&(i.context[i.smoothProperty]=h),t.trim?(s=t.trim.width/2+t.trim.x-e.anchor.x*t.orig.width,a=t.trim.height/2+t.trim.y-e.anchor.y*t.orig.height):(s=(.5-e.anchor.x)*t.orig.width,a=(.5-e.anchor.y)*t.orig.height),t.rotate&&(o.copy(ea),o=ea,z.GroupD8.matrixAppendRotationInv(o,t.rotate,s,a),s=0,a=0),s-=r/2,a-=n/2,i.roundPixels?(i.context.setTransform(o.a,o.b,o.c,o.d,o.tx*i.resolution|0,o.ty*i.resolution|0),s|=0,a|=0):i.context.setTransform(o.a,o.b,o.c,o.d,o.tx*i.resolution,o.ty*i.resolution);var u=t.baseTexture.resolution;16777215!==e.tint?(e.cachedTint===e.tint&&e.tintedTexture.tintId===e._texture._updateID||(e.cachedTint=e.tint,e.tintedTexture=Qs.default.getTintedTexture(e,e.tint)),i.context.drawImage(e.tintedTexture,0,0,r*u,n*u,s*i.resolution,a*i.resolution,r*i.resolution,n*i.resolution)):i.context.drawImage(t.baseTexture.source,t._frame.x*u,t._frame.y*u,r*u,n*u,s*i.resolution,a*i.resolution,r*i.resolution,n*i.resolution)}},e.prototype.destroy=function(){this.renderer=null},e}();Wo=ta,qs.default.registerPlugin("sprite",ta),Object.defineProperty(x,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return $d(zo).default}}),Object.defineProperty(x,"CanvasTinter",{enumerable:!0,get:function(){return $d(Ks).default}});var ia,ra,na={};i(na),e(na,"__esModule",(()=>ia),(e=>ia=e)),e(na,"default",(()=>ra),(e=>ra=e)),ia=!0;var oa,sa,aa={};i(aa),e(aa,"__esModule",(()=>oa),(e=>oa=e)),e(aa,"default",(()=>sa),(e=>sa=e)),oa=!0;var ha,ua,la={};i(la),e(la,"__esModule",(()=>ha),(e=>ha=e)),e(la,"default",(()=>ua),(e=>ua=e)),ha=!0;var ca=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.renderer=t,this.renderer.on("context",this.onContextChange,this)}return e.prototype.onContextChange=function(){},e.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null},e}();ua=ca;var da=function(e){return e&&e.__esModule?e:{default:e}}(la);function fa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pa(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var ga=function(e){function t(){return fa(this,t),pa(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.flush=function(){},t.prototype.render=function(e){},t}(da.default);sa=ga;var ma,ya,va=wl(aa),ba={};i(ba),e(ba,"__esModule",(()=>ma),(e=>ma=e)),e(ba,"default",(()=>ya),(e=>ya=e)),ma=!0;var xa,wa,_a=qu(Ko),Ta={};i(Ta),e(Ta,"__esModule",(()=>xa),(e=>xa=e)),e(Ta,"default",(()=>wa),(e=>wa=e)),xa=!0;var Sa,Ea,Oa=xh(la),ka={};i(ka),e(ka,"__esModule",(()=>Sa),(e=>Sa=e)),e(ka,"default",(()=>Ea),(e=>Ea=e)),Sa=!0;var Ma,Ca,Pa={};i(Pa),e(Pa,"__esModule",(()=>Ma),(e=>Ma=e)),e(Pa,"default",(()=>Ca),(e=>Ca=e)),Ma=!0;var Aa,Ia,Ra=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),Na={};i(Na),e(Na,"__esModule",(()=>Aa),(e=>Aa=e)),e(Na,"default",(()=>Ia),(e=>Ia=e)),Aa=!0,Ia=function(e,t,i){var r=ja(e),n=ja(t);return Object.assign(r,n)};var Da=function(e){return e&&e.__esModule?e:{default:e}}(qe);var La=Da.default.shader.defaultValue;function ja(e){for(var t=new RegExp("^(projectionMatrix|uSampler|filterArea|filterClamp)$"),i={},r=void 0,n=e.replace(/\s+/g," ").split(/\s*;\s*/),o=0;o<n.length;o++){var s=n[o].trim();if(s.indexOf("uniform")>-1){var a=s.split(" "),h=a[1],u=a[2],l=1;u.indexOf("[")>-1&&(r=u.split(/\[|]/),u=r[0],l*=Number(r[1])),u.match(t)||(i[u]={value:La(h,l),name:u,type:h})}}return i}var Fa=Ua(Na),Ba=Ua(ft);function Ua(e){return e&&e.__esModule?e:{default:e}}var Ga={},Wa=function(){function e(t,i,r){for(var n in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.vertexSrc=t||e.defaultVertexSrc,this.fragmentSrc=i||e.defaultFragmentSrc,this._blendMode=k.NORMAL,this.uniformData=r||(0,Fa.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={},this.uniformData)this.uniforms[n]=this.uniformData[n].value,this.uniformData[n].type&&(this.uniformData[n].type=this.uniformData[n].type.toLowerCase());this.glShaders={},Ga[this.vertexSrc+this.fragmentSrc]||(Ga[this.vertexSrc+this.fragmentSrc]=si()),this.glShaderKey=Ga[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=Ba.default.FILTER_RESOLUTION,this.enabled=!0,this.autoFit=!0}return e.prototype.apply=function(e,t,i,r,n){e.applyFilter(this,t,i,r)},Ra(e,[{key:"blendMode",get:function(){return this._blendMode},set:function(e){this._blendMode=e}}],[{key:"defaultVertexSrc",get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n")}},{key:"defaultFragmentSrc",get:function(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")}}]),e}();Ca=Wa;var za,Ha,Xa,Ya=yh(Pa),Va={},qa=Va={};function Ka(){throw new Error("setTimeout has not been defined")}function Za(){throw new Error("clearTimeout has not been defined")}function Ja(e){if(Ha===setTimeout)return setTimeout(e,0);if((Ha===Ka||!Ha)&&setTimeout)return Ha=setTimeout,setTimeout(e,0);try{return Ha(e,0)}catch(t){try{return Ha.call(null,e,0)}catch(t){return Ha.call(this,e,0)}}}!function(){try{Ha="function"==typeof setTimeout?setTimeout:Ka}catch(e){Ha=Ka}try{Xa="function"==typeof clearTimeout?clearTimeout:Za}catch(e){Xa=Za}}();var Qa,$a=[],eh=!1,th=-1;function ih(){eh&&Qa&&(eh=!1,Qa.length?$a=Qa.concat($a):th=-1,$a.length&&rh())}function rh(){if(!eh){var e=Ja(ih);eh=!0;for(var t=$a.length;t;){for(Qa=$a,$a=[];++th<t;)Qa&&Qa[th].run();th=-1,t=$a.length}Qa=null,eh=!1,function(e){if(Xa===clearTimeout)return clearTimeout(e);if((Xa===Za||!Xa)&&clearTimeout)return Xa=clearTimeout,clearTimeout(e);try{Xa(e)}catch(t){try{return Xa.call(null,e)}catch(t){return Xa.call(this,e)}}}(e)}}function nh(e,t){this.fun=e,this.array=t}function oh(){}function sh(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}function ah(e,t){for(var i,r="",n=0,o=-1,s=0,a=0;a<=e.length;++a){if(a<e.length)i=e.charCodeAt(a);else{if(47===i)break;i=47}if(47===i){if(o===a-1||1===s);else if(o!==a-1&&2===s){if(r.length<2||2!==n||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){var h=r.lastIndexOf("/");if(h!==r.length-1){-1===h?(r="",n=0):n=(r=r.slice(0,h)).length-1-r.lastIndexOf("/"),o=a,s=0;continue}}else if(2===r.length||1===r.length){r="",n=0,o=a,s=0;continue}t&&(r.length>0?r+="/..":r="..",n=2)}else r.length>0?r+="/"+e.slice(o+1,a):r=e.slice(o+1,a),n=a-o-1;o=a,s=0}else 46===i&&-1!==s?++s:s=-1}return r}qa.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];$a.push(new nh(e,t)),1!==$a.length||eh||Ja(rh)},nh.prototype.run=function(){this.fun.apply(null,this.array)},qa.title="browser",qa.browser=!0,qa.env={},qa.argv=[],qa.version="",qa.versions={},qa.on=oh,qa.addListener=oh,qa.once=oh,qa.off=oh,qa.removeListener=oh,qa.removeAllListeners=oh,qa.emit=oh,qa.prependListener=oh,qa.prependOnceListener=oh,qa.listeners=function(e){return[]},qa.binding=function(e){throw new Error("process.binding is not supported")},qa.cwd=function(){return"/"},qa.chdir=function(e){throw new Error("process.chdir is not supported")},qa.umask=function(){return 0};var hh={resolve:function(){for(var e,t="",i=!1,r=arguments.length-1;r>=-1&&!i;r--){var n;r>=0?n=arguments[r]:(void 0===e&&(e=Va.cwd()),n=e),sh(n),0!==n.length&&(t=n+"/"+t,i=47===n.charCodeAt(0))}return t=ah(t,!i),i?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(e){if(sh(e),0===e.length)return".";var t=47===e.charCodeAt(0),i=47===e.charCodeAt(e.length-1);return 0!==(e=ah(e,!t)).length||t||(e="."),e.length>0&&i&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return sh(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0===arguments.length)return".";for(var e,t=0;t<arguments.length;++t){var i=arguments[t];sh(i),i.length>0&&(void 0===e?e=i:e+="/"+i)}return void 0===e?".":hh.normalize(e)},relative:function(e,t){if(sh(e),sh(t),e===t)return"";if((e=hh.resolve(e))===(t=hh.resolve(t)))return"";for(var i=1;i<e.length&&47===e.charCodeAt(i);++i);for(var r=e.length,n=r-i,o=1;o<t.length&&47===t.charCodeAt(o);++o);for(var s=t.length-o,a=n<s?n:s,h=-1,u=0;u<=a;++u){if(u===a){if(s>a){if(47===t.charCodeAt(o+u))return t.slice(o+u+1);if(0===u)return t.slice(o+u)}else n>a&&(47===e.charCodeAt(i+u)?h=u:0===u&&(h=0));break}var l=e.charCodeAt(i+u);if(l!==t.charCodeAt(o+u))break;47===l&&(h=u)}var c="";for(u=i+h+1;u<=r;++u)u!==r&&47!==e.charCodeAt(u)||(0===c.length?c+="..":c+="/..");return c.length>0?c+t.slice(o+h):(o+=h,47===t.charCodeAt(o)&&++o,t.slice(o))},_makeLong:function(e){return e},dirname:function(e){if(sh(e),0===e.length)return".";for(var t=e.charCodeAt(0),i=47===t,r=-1,n=!0,o=e.length-1;o>=1;--o)if(47===(t=e.charCodeAt(o))){if(!n){r=o;break}}else n=!1;return-1===r?i?"/":".":i&&1===r?"//":e.slice(0,r)},basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');sh(e);var i,r=0,n=-1,o=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var s=t.length-1,a=-1;for(i=e.length-1;i>=0;--i){var h=e.charCodeAt(i);if(47===h){if(!o){r=i+1;break}}else-1===a&&(o=!1,a=i+1),s>=0&&(h===t.charCodeAt(s)?-1==--s&&(n=i):(s=-1,n=a))}return r===n?n=a:-1===n&&(n=e.length),e.slice(r,n)}for(i=e.length-1;i>=0;--i)if(47===e.charCodeAt(i)){if(!o){r=i+1;break}}else-1===n&&(o=!1,n=i+1);return-1===n?"":e.slice(r,n)},extname:function(e){sh(e);for(var t=-1,i=0,r=-1,n=!0,o=0,s=e.length-1;s>=0;--s){var a=e.charCodeAt(s);if(47!==a)-1===r&&(n=!1,r=s+1),46===a?-1===t?t=s:1!==o&&(o=1):-1!==t&&(o=-1);else if(!n){i=s+1;break}}return-1===t||-1===r||0===o||1===o&&t===r-1&&t===i+1?"":e.slice(t,r)},format:function(e){if(null===e||"object"!=typeof e)throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return function(e,t){var i=t.dir||t.root,r=t.base||(t.name||"")+(t.ext||"");return i?i===t.root?i+r:i+e+r:r}("/",e)},parse:function(e){sh(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;var i,r=e.charCodeAt(0),n=47===r;n?(t.root="/",i=1):i=0;for(var o=-1,s=0,a=-1,h=!0,u=e.length-1,l=0;u>=i;--u)if(47!==(r=e.charCodeAt(u)))-1===a&&(h=!1,a=u+1),46===r?-1===o?o=u:1!==l&&(l=1):-1!==o&&(l=-1);else if(!h){s=u+1;break}return-1===o||-1===a||0===l||1===l&&o===a-1&&o===s+1?-1!==a&&(t.base=t.name=0===s&&n?e.slice(1,a):e.slice(s,a)):(0===s&&n?(t.name=e.slice(1,o),t.base=e.slice(1,a)):(t.name=e.slice(s,o),t.base=e.slice(s,a)),t.ext=e.slice(o,a)),s>0?t.dir=e.slice(0,s-1):n&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};hh.posix=hh,za=hh;var uh,lh,ch={};i(ch),e(ch,"__esModule",(()=>uh),(e=>uh=e)),e(ch,"default",(()=>lh),(e=>lh=e)),uh=!0;var dh=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),fh=function(e){return e&&e.__esModule?e:{default:e}}(te);var ph=new fh.default,gh=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._texture=t,this.mapCoord=new fh.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin=void 0===i?.5:i}return e.prototype.multiplyUvs=function(e,t){void 0===t&&(t=e);for(var i=this.mapCoord,r=0;r<e.length;r+=2){var n=e[r],o=e[r+1];t[r]=n*i.a+o*i.c+i.tx,t[r+1]=n*i.b+o*i.d+i.ty}return t},e.prototype.update=function(e){var t=this._texture;if(!t||!t.valid)return!1;if(!e&&this._lastTextureID===t._updateID)return!1;this._lastTextureID=t._updateID;var i=t._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var r=t.orig,n=t.trim;n&&(ph.set(r.width/n.width,0,0,r.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(ph));var o=t.baseTexture,s=this.uClampFrame,a=this.clampMargin/o.resolution,h=this.clampOffset;return s[0]=(t._frame.x+a+h)/o.width,s[1]=(t._frame.y+a+h)/o.height,s[2]=(t._frame.x+t._frame.width-a+h)/o.width,s[3]=(t._frame.y+t._frame.height-a+h)/o.height,this.uClampOffset[0]=h/o.realWidth,this.uClampOffset[1]=h/o.realHeight,!0},dh(e,[{key:"texture",get:function(){return this._texture},set:function(e){this._texture=e,this._lastTextureID=-1}}]),e}();lh=gh;var mh=yh(ch);function yh(e){return e&&e.__esModule?e:{default:e}}var vh=function(e){function t(i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=new z.Matrix,n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"));return i.renderable=!1,n.maskSprite=i,n.maskMatrix=r,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.apply=function(e,t,i,r){var n=this.maskSprite,o=this.maskSprite.texture;o.valid&&(o.transform||(o.transform=new mh.default(o,0)),o.transform.update(),this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,n).prepend(o.transform.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=o.transform.uClampFrame,e.applyFilter(this,t,i,r))},t}(Ya.default);Ea=vh;var bh=xh(ka);function xh(e){return e&&e.__esModule?e:{default:e}}var wh=function(e){function t(i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,i));return r.scissor=!1,r.scissorData=null,r.scissorRenderTarget=null,r.enableScissor=!0,r.alphaMaskPool=[],r.alphaMaskIndex=0,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.pushMask=function(e,t){if(t.texture)this.pushSpriteMask(e,t);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&t.isFastRect()){var i=t.worldTransform,r=Math.atan2(i.b,i.a);(r=Math.round(r*(180/Math.PI)))%90?this.pushStencilMask(t):this.pushScissorMask(e,t)}else this.pushStencilMask(t)},t.prototype.popMask=function(e,t){t.texture?this.popSpriteMask(e,t):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(e,t):this.popStencilMask(e,t)},t.prototype.pushSpriteMask=function(e,t){var i=this.alphaMaskPool[this.alphaMaskIndex];i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new bh.default(t)]),i[0].resolution=this.renderer.resolution,i[0].maskSprite=t;var r=e.filterArea;e.filterArea=t.getBounds(!0),this.renderer.filterManager.pushFilter(e,i),e.filterArea=r,this.alphaMaskIndex++},t.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},t.prototype.pushStencilMask=function(e){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(e)},t.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},t.prototype.pushScissorMask=function(e,t){t.renderable=!0;var i=this.renderer._activeRenderTarget,r=t.getBounds();r.fit(i.size),t.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var n=this.renderer.resolution;this.renderer.gl.scissor(r.x*n,(i.root?i.size.height-r.y-r.height:r.y)*n,r.width*n,r.height*n),this.scissorRenderTarget=i,this.scissorData=t,this.scissor=!0},t.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var e=this.renderer.gl;e.disable(e.SCISSOR_TEST)},t}(Oa.default);wa=wh;var _h,Th,Sh=qu(Ta),Eh={};i(Eh),e(Eh,"__esModule",(()=>_h),(e=>_h=e)),e(Eh,"default",(()=>Th),(e=>Th=e)),_h=!0;var Oh=function(e){return e&&e.__esModule?e:{default:e}}(la);var kh=function(e){function t(i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,i));return r.stencilMaskStack=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.setMaskStack=function(e){this.stencilMaskStack=e;var t=this.renderer.gl;0===e.length?t.disable(t.STENCIL_TEST):t.enable(t.STENCIL_TEST)},t.prototype.pushStencil=function(e){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var t=this.renderer.gl,i=this.stencilMaskStack.length;0===i&&t.enable(t.STENCIL_TEST),this.stencilMaskStack.push(e),t.colorMask(!1,!1,!1,!1),t.stencilFunc(t.EQUAL,i,this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.INCR),this.renderer.plugins.graphics.render(e),this._useCurrent()},t.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var e=this.renderer.gl,t=this.stencilMaskStack.pop();0===this.stencilMaskStack.length?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),this.renderer.plugins.graphics.render(t),this._useCurrent())},t.prototype._useCurrent=function(){var e=this.renderer.gl;e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.EQUAL,this.stencilMaskStack.length,this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)},t.prototype._getBitwiseMask=function(){return(1<<this.stencilMaskStack.length)-1},t.prototype.destroy=function(){Oh.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},t}(Oh.default);Th=kh;var Mh,Ch,Ph=qu(Eh),Ah={};i(Ah),e(Ah,"__esModule",(()=>Mh),(e=>Mh=e)),e(Ah,"default",(()=>Ch),(e=>Ch=e)),Mh=!0;var Ih,Rh,Nh=lu(la),Dh={};i(Dh),e(Dh,"__esModule",(()=>Ih),(e=>Ih=e)),e(Dh,"default",(()=>Rh),(e=>Rh=e)),Ih=!0;var Lh=function(e){return e&&e.__esModule?e:{default:e}}(ft);var jh=function(){function e(t,i,r,n,o,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.gl=t,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new z.Rectangle(0,0,1,1),this.resolution=o||Lh.default.RESOLUTION,this.projectionMatrix=new z.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new z.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.filterPoolKey="",this.scaleMode=void 0!==n?n:Lh.default.SCALE_MODE,this.root=s||!1,this.root?(this.frameBuffer=new qe.GLFramebuffer(t,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=qe.GLFramebuffer.createRGBA(t,100,100),this.scaleMode===C.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(i,r)}return e.prototype.clear=function(e){var t=e||this.clearColor;this.frameBuffer.clear(t[0],t[1],t[2],t[3])},e.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},e.prototype.setFrame=function(e,t){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||this.destinationFrame},e.prototype.activate=function(){var e=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(e.enable(e.SCISSOR_TEST),e.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):e.disable(e.SCISSOR_TEST),e.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},e.prototype.calculateProjection=function(e,t){var i=this.projectionMatrix;t=t||e,i.identity(),this.root?(i.a=1/e.width*2,i.d=-1/e.height*2,i.tx=-1-t.x*i.a,i.ty=1-t.y*i.d):(i.a=1/e.width*2,i.d=1/e.height*2,i.tx=-1-t.x*i.a,i.ty=-1-t.y*i.d)},e.prototype.resize=function(e,t){if(e|=0,t|=0,this.size.width!==e||this.size.height!==t){this.size.width=e,this.size.height=t,this.defaultFrame.width=e,this.defaultFrame.height=t,this.frameBuffer.resize(e*this.resolution,t*this.resolution);var i=this.frame||this.size;this.calculateProjection(i)}},e.prototype.destroy=function(){this.frameBuffer.stencil&&this.gl.deleteRenderbuffer(this.frameBuffer.stencil),this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},e}();Rh=jh;var Fh,Bh,Uh=lu(Dh),Gh={};i(Gh),e(Gh,"__esModule",(()=>Fh),(e=>Fh=e)),e(Gh,"default",(()=>Bh),(e=>Bh=e)),Fh=!0;var Wh,zh,Hh=Vh(qe),Xh={};i(Xh),e(Xh,"__esModule",(()=>Wh),(e=>Wh=e)),e(Xh,"default",(()=>zh),(e=>zh=e)),Wh=!0,zh=function(e){for(var t=6*e,i=new Uint16Array(t),r=0,n=0;r<t;r+=6,n+=4)i[r+0]=n+0,i[r+1]=n+1,i[r+2]=n+2,i[r+3]=n+0,i[r+4]=n+2,i[r+5]=n+3;return i};var Yh=Vh(Xh);function Vh(e){return e&&e.__esModule?e:{default:e}}var qh=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.gl=t,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var r=0;r<4;r++)this.interleaved[4*r]=this.vertices[2*r],this.interleaved[4*r+1]=this.vertices[2*r+1],this.interleaved[4*r+2]=this.uvs[2*r],this.interleaved[4*r+3]=this.uvs[2*r+1];this.indices=(0,Yh.default)(1),this.vertexBuffer=Hh.default.GLBuffer.createVertexBuffer(t,this.interleaved,t.STATIC_DRAW),this.indexBuffer=Hh.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.vao=new Hh.default.VertexArrayObject(t,i)}return e.prototype.initVao=function(e){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,e.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,e.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},e.prototype.map=function(e,t){var i=0,r=0;return this.uvs[0]=i,this.uvs[1]=r,this.uvs[2]=i+t.width/e.width,this.uvs[3]=r,this.uvs[4]=i+t.width/e.width,this.uvs[5]=r+t.height/e.height,this.uvs[6]=i,this.uvs[7]=r+t.height/e.height,i=t.x,r=t.y,this.vertices[0]=i,this.vertices[1]=r,this.vertices[2]=i+t.width,this.vertices[3]=r,this.vertices[4]=i+t.width,this.vertices[5]=r+t.height,this.vertices[6]=i,this.vertices[7]=r+t.height,this},e.prototype.upload=function(){for(var e=0;e<4;e++)this.interleaved[4*e]=this.vertices[2*e],this.interleaved[4*e+1]=this.vertices[2*e+1],this.interleaved[4*e+2]=this.uvs[2*e],this.interleaved[4*e+3]=this.uvs[2*e+1];return this.vertexBuffer.upload(this.interleaved),this},e.prototype.destroy=function(){var e=this.gl;e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.indexBuffer)},e}();Bh=qh;var Kh,Zh,Jh=lu(Gh),Qh={};i(Qh),e(Qh,"__esModule",(()=>Kh),(e=>Kh=e)),e(Qh,"default",(()=>Zh),(e=>Zh=e)),Kh=!0;var $h=function(e){return e&&e.__esModule?e:{default:e}}(ft);function eu(e,t){if(e instanceof Array){if("precision"!==e[0].substring(0,9)){var i=e.slice(0);return i.unshift("precision "+t+" float;"),i}}else if("precision"!==e.trim().substring(0,9))return"precision "+t+" float;\n"+e;return e}var tu=function(e){function t(i,r,n,o,s){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,i,eu(r,s||$h.default.PRECISION_VERTEX),eu(n,s||$h.default.PRECISION_FRAGMENT),void 0,o))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(qe.GLShader);Zh=tu;var iu,ru,nu,ou,su=lu(Qh),au={};e(au,"__esModule",(()=>iu),(e=>iu=e)),e(au,"calculateScreenSpaceMatrix",(()=>ru),(e=>ru=e)),e(au,"calculateNormalizedScreenSpaceMatrix",(()=>nu),(e=>nu=e)),e(au,"calculateSpriteMatrix",(()=>ou),(e=>ou=e)),iu=!0,ru=function(e,t,i){var r=e.identity();return r.translate(t.x/i.width,t.y/i.height),r.scale(i.width,i.height),r},nu=function(e,t,i){var r=e.identity();r.translate(t.x/i.width,t.y/i.height);var n=i.width/t.width,o=i.height/t.height;return r.scale(n,o),r},ou=function(e,t,i,r){var n=r._texture.orig,o=e.set(i.width,0,0,i.height,t.x,t.y),s=r.worldTransform.copy(z.Matrix.TEMP_MATRIX);return s.invert(),o.prepend(s),o.scale(1/n.width,1/n.height),o.translate(r.anchor.x,r.anchor.y),o};var hu=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(au),uu=lu(Un);function lu(e){return e&&e.__esModule?e:{default:e}}function cu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var du=function(){function e(){cu(this,e),this.renderTarget=null,this.target=null,this.resolution=1,this.sourceFrame=new z.Rectangle,this.destinationFrame=new z.Rectangle,this.filters=[]}return e.prototype.clear=function(){this.filters=null,this.target=null,this.renderTarget=null},e}(),fu=function(e){function t(i){cu(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,i));return r.gl=r.renderer.gl,r.quad=new Jh.default(r.gl,i.state.attribState),r.shaderCache={},r.pool={},r.filterData=null,r.managedFilters=[],r.renderer.on("prerender",r.onPrerender,r),r._screenWidth=i.view.width,r._screenHeight=i.view.height,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.pushFilter=function(e,t){var i=this.renderer,r=this.filterData;if(!r){r=this.renderer._activeRenderTarget.filterStack;var n=new du;n.sourceFrame=n.destinationFrame=this.renderer._activeRenderTarget.size,n.renderTarget=i._activeRenderTarget,this.renderer._activeRenderTarget.filterData=r={index:0,stack:[n]},this.filterData=r}var o=r.stack[++r.index],s=r.stack[0].destinationFrame;o||(o=r.stack[r.index]=new du);var a=e.filterArea&&0===e.filterArea.x&&0===e.filterArea.y&&e.filterArea.width===i.screen.width&&e.filterArea.height===i.screen.height,h=t[0].resolution,u=0|t[0].padding,l=a?i.screen:e.filterArea||e.getBounds(!0),c=o.sourceFrame,d=o.destinationFrame;c.x=(l.x*h|0)/h,c.y=(l.y*h|0)/h,c.width=(l.width*h|0)/h,c.height=(l.height*h|0)/h,a||(r.stack[0].renderTarget.transform||t[0].autoFit&&c.fit(s),c.pad(u)),d.width=c.width,d.height=c.height;var f=this.getPotRenderTarget(i.gl,c.width,c.height,h);o.target=e,o.filters=t,o.resolution=h,o.renderTarget=f,f.setFrame(d,c),i.bindRenderTarget(f),f.clear()},t.prototype.popFilter=function(){var e=this.filterData,t=e.stack[e.index-1],i=e.stack[e.index];this.quad.map(i.renderTarget.size,i.sourceFrame).upload();var r=i.filters;if(1===r.length)r[0].apply(this,i.renderTarget,t.renderTarget,!1,i),this.freePotRenderTarget(i.renderTarget);else{var n=i.renderTarget,o=this.getPotRenderTarget(this.renderer.gl,i.sourceFrame.width,i.sourceFrame.height,i.resolution);o.setFrame(i.destinationFrame,i.sourceFrame),o.clear();var s=0;for(s=0;s<r.length-1;++s){r[s].apply(this,n,o,!0,i);var a=n;n=o,o=a}r[s].apply(this,n,t.renderTarget,!1,i),this.freePotRenderTarget(n),this.freePotRenderTarget(o)}i.clear(),e.index--,0===e.index&&(this.filterData=null)},t.prototype.applyFilter=function(e,t,i,r){var n=this.renderer,o=n.gl,s=e.glShaders[n.CONTEXT_UID];s||(e.glShaderKey?(s=this.shaderCache[e.glShaderKey])||(s=new su.default(this.gl,e.vertexSrc,e.fragmentSrc),e.glShaders[n.CONTEXT_UID]=this.shaderCache[e.glShaderKey]=s,this.managedFilters.push(e)):(s=e.glShaders[n.CONTEXT_UID]=new su.default(this.gl,e.vertexSrc,e.fragmentSrc),this.managedFilters.push(e)),n.bindVao(null),this.quad.initVao(s)),n.bindVao(this.quad.vao),n.bindRenderTarget(i),r&&(o.disable(o.SCISSOR_TEST),n.clear(),o.enable(o.SCISSOR_TEST)),i===n.maskManager.scissorRenderTarget&&n.maskManager.pushScissorMask(null,n.maskManager.scissorData),n.bindShader(s);var a=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=a,this.syncUniforms(s,e),n.state.setBlendMode(e.blendMode),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,t.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),o.bindTexture(o.TEXTURE_2D,a._glTextures[this.renderer.CONTEXT_UID].texture)},t.prototype.syncUniforms=function(e,t){var i=t.uniformData,r=t.uniforms,n=1,o=void 0;if(e.uniforms.filterArea){o=this.filterData.stack[this.filterData.index];var s=e.uniforms.filterArea;s[0]=o.renderTarget.size.width,s[1]=o.renderTarget.size.height,s[2]=o.sourceFrame.x,s[3]=o.sourceFrame.y,e.uniforms.filterArea=s}if(e.uniforms.filterClamp){o=o||this.filterData.stack[this.filterData.index];var a=e.uniforms.filterClamp;a[0]=0,a[1]=0,a[2]=(o.sourceFrame.width-1)/o.renderTarget.size.width,a[3]=(o.sourceFrame.height-1)/o.renderTarget.size.height,e.uniforms.filterClamp=a}for(var h in i)if(e.uniforms.data[h]){var u=i[h].type;if("sampler2d"===u&&0!==r[h]){if(r[h].baseTexture)e.uniforms[h]=this.renderer.bindTexture(r[h].baseTexture,n);else{e.uniforms[h]=n;var l=this.renderer.gl;this.renderer.boundTextures[n]=this.renderer.emptyTextures[n],l.activeTexture(l.TEXTURE0+n),r[h].texture.bind()}n++}else if("mat3"===u)void 0!==r[h].a?e.uniforms[h]=r[h].toArray(!0):e.uniforms[h]=r[h];else if("vec2"===u)if(void 0!==r[h].x){var c=e.uniforms[h]||new Float32Array(2);c[0]=r[h].x,c[1]=r[h].y,e.uniforms[h]=c}else e.uniforms[h]=r[h];else"float"===u?e.uniforms.data[h].value!==i[h]&&(e.uniforms[h]=r[h]):e.uniforms[h]=r[h]}},t.prototype.getRenderTarget=function(e,t){var i=this.filterData.stack[this.filterData.index],r=this.getPotRenderTarget(this.renderer.gl,i.sourceFrame.width,i.sourceFrame.height,t||i.resolution);return r.setFrame(i.destinationFrame,i.sourceFrame),r},t.prototype.returnRenderTarget=function(e){this.freePotRenderTarget(e)},t.prototype.calculateScreenSpaceMatrix=function(e){var t=this.filterData.stack[this.filterData.index];return hu.calculateScreenSpaceMatrix(e,t.sourceFrame,t.renderTarget.size)},t.prototype.calculateNormalizedScreenSpaceMatrix=function(e){var t=this.filterData.stack[this.filterData.index];return hu.calculateNormalizedScreenSpaceMatrix(e,t.sourceFrame,t.renderTarget.size,t.destinationFrame)},t.prototype.calculateSpriteMatrix=function(e,t){var i=this.filterData.stack[this.filterData.index];return hu.calculateSpriteMatrix(e,i.sourceFrame,i.renderTarget.size,t)},t.prototype.destroy=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.renderer,i=this.managedFilters;t.off("prerender",this.onPrerender,this);for(var r=0;r<i.length;r++)e||i[r].glShaders[t.CONTEXT_UID].destroy(),delete i[r].glShaders[t.CONTEXT_UID];this.shaderCache={},e?this.pool={}:this.emptyPool()},t.prototype.getPotRenderTarget=function(e,t,i,r){var n="screen";i*=r,(t*=r)===this._screenWidth&&i===this._screenHeight||(n=(65535&(t=uu.default.nextPow2(t)))<<16|65535&(i=uu.default.nextPow2(i))),this.pool[n]||(this.pool[n]=[]);var o=this.pool[n].pop();if(!o){var s=this.renderer.boundTextures[0];e.activeTexture(e.TEXTURE0),o=new Uh.default(e,t,i,null,1),e.bindTexture(e.TEXTURE_2D,s._glTextures[this.renderer.CONTEXT_UID].texture)}return o.resolution=r,o.defaultFrame.width=o.size.width=t/r,o.defaultFrame.height=o.size.height=i/r,o.filterPoolKey=n,o},t.prototype.emptyPool=function(){for(var e in this.pool){var t=this.pool[e];if(t)for(var i=0;i<t.length;i++)t[i].destroy(!0)}this.pool={}},t.prototype.freePotRenderTarget=function(e){this.pool[e.filterPoolKey].push(e)},t.prototype.onPrerender=function(){if(this._screenWidth!==this.renderer.view.width||this._screenHeight!==this.renderer.view.height){this._screenWidth=this.renderer.view.width,this._screenHeight=this.renderer.view.height;var e=this.pool.screen;if(e)for(var t=0;t<e.length;t++)e[t].destroy(!0);this.pool.screen=[]}},t}(Nh.default);Ch=fu;var pu,gu,mu=qu(Ah),yu=qu(Dh),vu=qu(aa),bu={};i(bu),e(bu,"__esModule",(()=>pu),(e=>pu=e)),e(bu,"default",(()=>gu),(e=>gu=e)),pu=!0;var xu=function(e){return e&&e.__esModule?e:{default:e}}(Dh);var wu=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.renderer=t,this.gl=t.gl,this._managedTextures=[]}return e.prototype.bindTexture=function(){},e.prototype.getTexture=function(){},e.prototype.updateTexture=function(e,t){var i=this.gl,r=!!e._glRenderTargets;if(!e.hasLoaded)return null;var n=this.renderer.boundTextures;if(void 0===t){t=0;for(var o=0;o<n.length;++o)if(n[o]===e){t=o;break}}n[t]=e,i.activeTexture(i.TEXTURE0+t);var s=e._glTextures[this.renderer.CONTEXT_UID];if(s)r?e._glRenderTargets[this.renderer.CONTEXT_UID].resize(e.width,e.height):s.upload(e.source);else{if(r){var a=new xu.default(this.gl,e.width,e.height,e.scaleMode,e.resolution);a.resize(e.width,e.height),e._glRenderTargets[this.renderer.CONTEXT_UID]=a,s=a.texture,this.renderer._activeRenderTarget.root||this.renderer._activeRenderTarget.frameBuffer.bind()}else(s=new qe.GLTexture(this.gl,null,null,null,null)).bind(t),s.premultiplyAlpha=!0,s.upload(e.source);e._glTextures[this.renderer.CONTEXT_UID]=s,e.on("update",this.updateTexture,this),e.on("dispose",this.destroyTexture,this),this._managedTextures.push(e),e.isPowerOfTwo?(e.mipmap&&s.enableMipmap(),e.wrapMode===P.CLAMP?s.enableWrapClamp():e.wrapMode===P.REPEAT?s.enableWrapRepeat():s.enableWrapMirrorRepeat()):s.enableWrapClamp(),e.scaleMode===C.NEAREST?s.enableNearestScaling():s.enableLinearScaling()}return s},e.prototype.destroyTexture=function(e,t){if((e=e.baseTexture||e).hasLoaded){var i=this.renderer,r=i.CONTEXT_UID,n=e._glTextures,o=e._glRenderTargets;if(n[r]&&(i.unbindTexture(e),n[r].destroy(),e.off("update",this.updateTexture,this),e.off("dispose",this.destroyTexture,this),delete n[r],!t)){var s=this._managedTextures.indexOf(e);-1!==s&&ni(this._managedTextures,s,1)}o&&o[r]&&(i._activeRenderTarget===o[r]&&i.bindRenderTarget(i.rootRenderTarget),o[r].destroy(),delete o[r])}},e.prototype.removeAll=function(){for(var e=0;e<this._managedTextures.length;++e){var t=this._managedTextures[e];t._glTextures[this.renderer.CONTEXT_UID]&&delete t._glTextures[this.renderer.CONTEXT_UID]}},e.prototype.destroy=function(){for(var e=0;e<this._managedTextures.length;++e){var t=this._managedTextures[e];this.destroyTexture(t,!0),t.off("update",this.updateTexture,this),t.off("dispose",this.destroyTexture,this)}this._managedTextures=null},e}();gu=wu;var _u,Tu,Su=qu(bu),Eu=qu(Br),Ou={};i(Ou),e(Ou,"__esModule",(()=>_u),(e=>_u=e)),e(Ou,"default",(()=>Tu),(e=>Tu=e)),_u=!0;var ku=function(e){return e&&e.__esModule?e:{default:e}}(ft);var Mu=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=ku.default.GC_MAX_IDLE,this.checkCountMax=ku.default.GC_MAX_CHECK_COUNT,this.mode=ku.default.GC_MODE}return e.prototype.update=function(){this.count++,this.mode!==A.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run()))},e.prototype.run=function(){for(var e=this.renderer.textureManager,t=e._managedTextures,i=!1,r=0;r<t.length;r++){var n=t[r];!n._glRenderTargets&&this.count-n.touched>this.maxIdle&&(e.destroyTexture(n,!0),t[r]=null,i=!0)}if(i){for(var o=0,s=0;s<t.length;s++)null!==t[s]&&(t[o++]=t[s]);t.length=o}},e.prototype.unload=function(e){var t=this.renderer.textureManager;e._texture&&e._texture._glRenderTargets&&t.destroyTexture(e._texture,!0);for(var i=e.children.length-1;i>=0;i--)this.unload(e.children[i])},e}();Tu=Mu;var Cu,Pu,Au=qu(Ou),Iu={};i(Iu),e(Iu,"__esModule",(()=>Cu),(e=>Cu=e)),e(Iu,"default",(()=>Pu),(e=>Pu=e)),Cu=!0;var Ru,Nu,Du={};i(Du),e(Du,"__esModule",(()=>Ru),(e=>Ru=e)),e(Du,"default",(()=>Nu),(e=>Nu=e)),Ru=!0,Nu=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t[k.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[k.ADD]=[e.ONE,e.ONE],t[k.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[k.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[k.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[k.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[k.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[k.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[k.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[k.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[k.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[k.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[k.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[k.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[k.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[k.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[k.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[k.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[k.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],t[k.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t};var Lu=function(e){return e&&e.__esModule?e:{default:e}}(Du);var ju=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=t,this.maxAttribs=t.getParameter(t.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=(0,Lu.default)(t),this.nativeVaoExtension=t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object")}return e.prototype.push=function(){var e=this.stack[this.stackIndex];e||(e=this.stack[this.stackIndex]=new Uint8Array(16)),++this.stackIndex;for(var t=0;t<this.activeState.length;t++)e[t]=this.activeState[t]},e.prototype.pop=function(){var e=this.stack[--this.stackIndex];this.setState(e)},e.prototype.setState=function(e){this.setBlend(e[0]),this.setDepthTest(e[1]),this.setFrontFace(e[2]),this.setCullFace(e[3]),this.setBlendMode(e[4])},e.prototype.setBlend=function(e){e=e?1:0,this.activeState[0]!==e&&(this.activeState[0]=e,this.gl[e?"enable":"disable"](this.gl.BLEND))},e.prototype.setBlendMode=function(e){if(e!==this.activeState[4]){this.activeState[4]=e;var t=this.blendModes[e];2===t.length?this.gl.blendFunc(t[0],t[1]):this.gl.blendFuncSeparate(t[0],t[1],t[2],t[3])}},e.prototype.setDepthTest=function(e){e=e?1:0,this.activeState[1]!==e&&(this.activeState[1]=e,this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST))},e.prototype.setCullFace=function(e){e=e?1:0,this.activeState[3]!==e&&(this.activeState[3]=e,this.gl[e?"enable":"disable"](this.gl.CULL_FACE))},e.prototype.setFrontFace=function(e){e=e?1:0,this.activeState[2]!==e&&(this.activeState[2]=e,this.gl.frontFace(this.gl[e?"CW":"CCW"]))},e.prototype.resetAttributes=function(){for(var e=0;e<this.attribState.tempAttribState.length;e++)this.attribState.tempAttribState[e]=0;for(var t=0;t<this.attribState.attribState.length;t++)this.attribState.attribState[t]=0;for(var i=1;i<this.maxAttribs;i++)this.gl.disableVertexAttribArray(i)},e.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var e=0;e<this.activeState.length;++e)this.activeState[e]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},e}();Pu=ju;var Fu,Bu,Uu=qu(Iu),Gu={};i(Gu),e(Gu,"__esModule",(()=>Fu),(e=>Fu=e)),e(Gu,"default",(()=>Bu),(e=>Bu=e)),Fu=!0,Bu=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t[M.POINTS]=e.POINTS,t[M.LINES]=e.LINES,t[M.LINE_LOOP]=e.LINE_LOOP,t[M.LINE_STRIP]=e.LINE_STRIP,t[M.TRIANGLES]=e.TRIANGLES,t[M.TRIANGLE_STRIP]=e.TRIANGLE_STRIP,t[M.TRIANGLE_FAN]=e.TRIANGLE_FAN,t};var Wu,zu,Hu=qu(Gu),Xu={};i(Xu),e(Xu,"__esModule",(()=>Wu),(e=>Wu=e)),e(Xu,"default",(()=>zu),(e=>zu=e)),Wu=!0,zu=function(e){e.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")};var Yu=qu(Xu),Vu=qu(qe);function qu(e){return e&&e.__esModule?e:{default:e}}var Ku=0,Zu=function(e){function t(i,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,"WebGL",i,r,n));return o.legacy=o.options.legacy,o.legacy&&(Vu.default.VertexArrayObject.FORCE_NATIVE=!0),o.type=O.WEBGL,o.handleContextLost=o.handleContextLost.bind(o),o.handleContextRestored=o.handleContextRestored.bind(o),o.view.addEventListener("webglcontextlost",o.handleContextLost,!1),o.view.addEventListener("webglcontextrestored",o.handleContextRestored,!1),o._contextOptions={alpha:o.transparent,antialias:o.options.antialias,premultipliedAlpha:o.transparent&&"notMultiplied"!==o.transparent,stencil:!0,preserveDrawingBuffer:o.options.preserveDrawingBuffer,powerPreference:o.options.powerPreference},o._backgroundColorRgba[3]=o.transparent?0:1,o.maskManager=new Sh.default(o),o.stencilManager=new Ph.default(o),o.emptyRenderer=new vu.default(o),o.currentRenderer=o.emptyRenderer,o.textureManager=null,o.filterManager=null,o.initPlugins(),o.options.context&&(0,Yu.default)(o.options.context),o.gl=o.options.context||Vu.default.createContext(o.view,o._contextOptions),o.CONTEXT_UID=Ku++,o.state=new Uu.default(o.gl),o.renderingToScreen=!0,o.boundTextures=null,o._activeShader=null,o._activeVao=null,o._activeRenderTarget=null,o._initContext(),o.drawModes=(0,Hu.default)(o.gl),o._nextTextureLocation=0,o.setBlendMode(0),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._initContext=function(){var e=this.gl;e.isContextLost()&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").restoreContext();var t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this._activeShader=null,this._activeVao=null,this.boundTextures=new Array(t),this.emptyTextures=new Array(t),this._unknownBoundTextures=!1,this.textureManager=new Su.default(this),this.filterManager=new mu.default(this),this.textureGC=new Au.default(this),this.state.resetToDefault(),this.rootRenderTarget=new yu.default(e,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var i=new Vu.default.GLTexture.fromData(e,null,1,1),r={_glTextures:{}};r._glTextures[this.CONTEXT_UID]={};for(var n=0;n<t;n++){var o=new Eu.default;o._glTextures[this.CONTEXT_UID]=i,this.boundTextures[n]=r,this.emptyTextures[n]=o,this.bindTexture(null,n)}this.emit("context",e),this.resize(this.screen.width,this.screen.height)},t.prototype.render=function(e,t,i,r,n){if(this.renderingToScreen=!t,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(this._nextTextureLocation=0,t||(this._lastObjectRendered=e),!n){var o=e.parent;e.parent=this._tempDisplayObjectParent,e.updateTransform(),e.parent=o}this.bindRenderTexture(t,r),this.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this._activeRenderTarget.clear(),e.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},t.prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.resize=function(e,t){_a.default.prototype.resize.call(this,e,t),this.rootRenderTarget.resize(e,t),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},t.prototype.setBlendMode=function(e){this.state.setBlendMode(e)},t.prototype.clear=function(e){this._activeRenderTarget.clear(e)},t.prototype.setTransform=function(e){this._activeRenderTarget.transform=e},t.prototype.clearRenderTexture=function(e,t){var i=e.baseTexture._glRenderTargets[this.CONTEXT_UID];return i&&i.clear(t),this},t.prototype.bindRenderTexture=function(e,t){var i=void 0;if(e){var r=e.baseTexture;r._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(r,0),this.unbindTexture(r),(i=r._glRenderTargets[this.CONTEXT_UID]).setFrame(e.frame)}else i=this.rootRenderTarget;return i.transform=t,this.bindRenderTarget(i),this},t.prototype.bindRenderTarget=function(e){return e!==this._activeRenderTarget&&(this._activeRenderTarget=e,e.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=e.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(e.stencilMaskStack)),this},t.prototype.bindShader=function(e,t){return this._activeShader!==e&&(this._activeShader=e,e.bind(),!1!==t&&(e.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0))),this},t.prototype.bindTexture=function(e,t,i){if((e=(e=e||this.emptyTextures[t]).baseTexture||e).touched=this.textureGC.count,i)t=t||0;else{for(var r=0;r<this.boundTextures.length;r++)if(this.boundTextures[r]===e)return r;void 0===t&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,t=this.boundTextures.length-this._nextTextureLocation-1)}var n=this.gl,o=e._glTextures[this.CONTEXT_UID];return o?(this.boundTextures[t]=e,n.activeTexture(n.TEXTURE0+t),n.bindTexture(n.TEXTURE_2D,o.texture)):this.textureManager.updateTexture(e,t),t},t.prototype.unbindTexture=function(e){var t=this.gl;if(e=e.baseTexture||e,this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var i=0;i<this.boundTextures.length;i++)this.boundTextures[i]===this.emptyTextures[i]&&(t.activeTexture(t.TEXTURE0+i),t.bindTexture(t.TEXTURE_2D,this.emptyTextures[i]._glTextures[this.CONTEXT_UID].texture))}for(var r=0;r<this.boundTextures.length;r++)this.boundTextures[r]===e&&(this.boundTextures[r]=this.emptyTextures[r],t.activeTexture(t.TEXTURE0+r),t.bindTexture(t.TEXTURE_2D,this.emptyTextures[r]._glTextures[this.CONTEXT_UID].texture));return this},t.prototype.createVao=function(){return new Vu.default.VertexArrayObject(this.gl,this.state.attribState)},t.prototype.bindVao=function(e){return this._activeVao===e||(e?e.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=e),this},t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer),this.bindVao(null),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget,this._unknownBoundTextures=!0;for(var e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.emptyTextures[e];return this.rootRenderTarget.activate(),this.state.resetToDefault(),this},t.prototype.handleContextLost=function(e){e.preventDefault()},t.prototype.handleContextRestored=function(){this.textureManager.removeAll(),this.filterManager.destroy(!0),this._initContext()},t.prototype.destroy=function(t){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),e.prototype.destroy.call(this,t),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null},t}(_a.default);ya=Zu,ii.mixin(Zu);var Ju,Qu,$u=wl(ba),el=wl(Xh),tl={};i(tl),e(tl,"__esModule",(()=>Ju),(e=>Ju=e)),e(tl,"default",(()=>Qu),(e=>Qu=e)),Ju=!0,Qu=function(e,t){var i=rl;i=(i=i.replace(/%count%/gi,t)).replace(/%forloop%/gi,function(e){var t="";t+="\n",t+="\n";for(var i=0;i<e;i++)i>0&&(t+="\nelse "),i<e-1&&(t+="if(vTextureId < "+i+".5)"),t+="\n{",t+="\n\tcolor = texture2D(uSamplers["+i+"], vTextureCoord);",t+="\n}";return t+="\n",t+="\n"}(t));for(var r=new il.default(e,"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n",i),n=[],o=0;o<t;o++)n[o]=o;return r.bind(),r.uniforms.uSamplers=n,r};var il=function(e){return e&&e.__esModule?e:{default:e}}(Qh);var rl=["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","%forloop%","gl_FragColor = color * vColor;","}"].join("\n");var nl,ol,sl=wl(tl),al={};i(al),e(al,"__esModule",(()=>nl),(e=>nl=e)),e(al,"default",(()=>ol),(e=>ol=e)),nl=!0,ol=function(e,t){var i=!t;if(0===e)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");if(i){var r=document.createElement("canvas");r.width=1,r.height=1,t=hl.default.createContext(r)}var n=t.createShader(t.FRAGMENT_SHADER);for(;;){var o=ul.replace(/%forloop%/gi,ll(e));if(t.shaderSource(n,o),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS))break;e=e/2|0}i&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").loseContext();return e};var hl=function(e){return e&&e.__esModule?e:{default:e}}(qe);var ul=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function ll(e){for(var t="",i=0;i<e;++i)i>0&&(t+="\nelse "),i<e-1&&(t+="if(test == "+i+".0){}");return t}var cl,dl,fl=wl(al),pl={};i(pl),e(pl,"__esModule",(()=>cl),(e=>cl=e)),e(pl,"default",(()=>dl),(e=>dl=e)),cl=!0;var ml=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.vertices=new ArrayBuffer(t),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return e.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},e}();dl=ml;var yl=wl(pl),vl=wl(ft),bl=wl(qe),xl=wl(Un);function wl(e){return e&&e.__esModule?e:{default:e}}var _l=0,Tl=0,Sl=function(e){function t(i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,i));r.vertSize=5,r.vertByteSize=4*r.vertSize,r.size=vl.default.SPRITE_BATCH_SIZE,r.buffers=[];for(var n=1;n<=xl.default.nextPow2(r.size);n*=2)r.buffers.push(new yl.default(4*n*r.vertByteSize));r.indices=(0,el.default)(r.size),r.shader=null,r.currentIndex=0,r.groups=[];for(var o=0;o<r.size;o++)r.groups[o]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return r.sprites=[],r.vertexBuffers=[],r.vaos=[],r.vaoMax=2,r.vertexCount=0,r.renderer.on("prerender",r.onPrerender,r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.onContextChange=function(){var e=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),vl.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,fl.default)(this.MAX_TEXTURES,e)),this.shader=(0,sl.default)(e,this.MAX_TEXTURES),this.indexBuffer=bl.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.renderer.bindVao(null);for(var t=this.shader.attributes,i=0;i<this.vaoMax;i++){var r=this.vertexBuffers[i]=bl.default.GLBuffer.createVertexBuffer(e,null,e.STREAM_DRAW),n=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(r,t.aVertexPosition,e.FLOAT,!1,this.vertByteSize,0).addAttribute(r,t.aTextureCoord,e.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(r,t.aColor,e.UNSIGNED_BYTE,!0,this.vertByteSize,12);t.aTextureId&&n.addAttribute(r,t.aTextureId,e.FLOAT,!1,this.vertByteSize,16),this.vaos[i]=n}this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=new Array(this.MAX_TEXTURES)},t.prototype.onPrerender=function(){this.vertexCount=0},t.prototype.render=function(e){this.currentIndex>=this.size&&this.flush(),e._texture._uvs&&(this.sprites[this.currentIndex++]=e)},t.prototype.flush=function(){if(0!==this.currentIndex){var e=this.renderer.gl,t=this.MAX_TEXTURES,i=xl.default.nextPow2(this.currentIndex),r=xl.default.log2(i),n=this.buffers[r],o=this.sprites,s=this.groups,a=n.float32View,h=n.uint32View,u=this.boundTextures,l=this.renderer.boundTextures,c=this.renderer.textureGC.count,d=0,f=void 0,p=void 0,g=1,m=0,y=s[0],v=void 0,b=void 0,x=Jt[o[0]._texture.baseTexture.premultipliedAlpha?1:0][o[0].blendMode];y.textureCount=0,y.start=0,y.blend=x,_l++;var w=void 0;for(w=0;w<t;++w){var _=l[w];_._enabled!==_l?(u[w]=_,_._virtalBoundId=w,_._enabled=_l):u[w]=this.renderer.emptyTextures[w]}for(_l++,w=0;w<this.currentIndex;++w){var T=o[w];o[w]=null,f=T._texture.baseTexture;var S=Jt[Number(f.premultipliedAlpha)][T.blendMode];if(x!==S&&(x=S,p=null,m=t,_l++),p!==f&&(p=f,f._enabled!==_l)){if(m===t&&(_l++,y.size=w-y.start,m=0,(y=s[g++]).blend=x,y.textureCount=0,y.start=w),f.touched=c,-1===f._virtalBoundId)for(var E=0;E<t;++E){var O=(E+Tl)%t,k=u[O];if(k._enabled!==_l){Tl++,k._virtalBoundId=-1,f._virtalBoundId=O,u[O]=f;break}}f._enabled=_l,y.textureCount++,y.ids[m]=f._virtalBoundId,y.textures[m++]=f}if(v=T.vertexData,b=T._texture._uvs.uvsUint32,this.renderer.roundPixels){var M=this.renderer.resolution;a[d]=(v[0]*M|0)/M,a[d+1]=(v[1]*M|0)/M,a[d+5]=(v[2]*M|0)/M,a[d+6]=(v[3]*M|0)/M,a[d+10]=(v[4]*M|0)/M,a[d+11]=(v[5]*M|0)/M,a[d+15]=(v[6]*M|0)/M,a[d+16]=(v[7]*M|0)/M}else a[d]=v[0],a[d+1]=v[1],a[d+5]=v[2],a[d+6]=v[3],a[d+10]=v[4],a[d+11]=v[5],a[d+15]=v[6],a[d+16]=v[7];h[d+2]=b[0],h[d+7]=b[1],h[d+12]=b[2],h[d+17]=b[3];var C=Math.min(T.worldAlpha,1),P=C<1&&f.premultipliedAlpha?wi(T._tintRGB,C):T._tintRGB+(255*C<<24);h[d+3]=h[d+8]=h[d+13]=h[d+18]=P,a[d+4]=a[d+9]=a[d+14]=a[d+19]=f._virtalBoundId,d+=20}if(y.size=w-y.start,vl.default.CAN_UPLOAD_SAME_BUFFER)this.vertexBuffers[this.vertexCount].upload(n.vertices,0,!0);else{if(this.vaoMax<=this.vertexCount){this.vaoMax++;var A=this.shader.attributes,I=this.vertexBuffers[this.vertexCount]=bl.default.GLBuffer.createVertexBuffer(e,null,e.STREAM_DRAW),R=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(I,A.aVertexPosition,e.FLOAT,!1,this.vertByteSize,0).addAttribute(I,A.aTextureCoord,e.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(I,A.aColor,e.UNSIGNED_BYTE,!0,this.vertByteSize,12);A.aTextureId&&R.addAttribute(I,A.aTextureId,e.FLOAT,!1,this.vertByteSize,16),this.vaos[this.vertexCount]=R}this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(n.vertices,0,!1),this.vertexCount++}for(w=0;w<t;++w)l[w]._virtalBoundId=-1;for(w=0;w<g;++w){for(var N=s[w],D=N.textureCount,L=0;L<D;L++)p=N.textures[L],l[N.ids[L]]!==p&&this.renderer.bindTexture(p,N.ids[L],!0),p._virtalBoundId=-1;this.renderer.state.setBlendMode(N.blend),e.drawElements(e.TRIANGLES,6*N.size,e.UNSIGNED_SHORT,12*N.start)}this.currentIndex=0}},t.prototype.start=function(){this.renderer.bindShader(this.shader),vl.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},t.prototype.stop=function(){this.flush()},t.prototype.destroy=function(){for(var t=0;t<this.vaoMax;t++)this.vertexBuffers[t]&&this.vertexBuffers[t].destroy(),this.vaos[t]&&this.vaos[t].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),e.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var i=0;i<this.buffers.length;++i)this.buffers[i].destroy()},t}(va.default);ra=Sl,$u.default.registerPlugin("sprite",Sl),Object.defineProperty(x,"SpriteRenderer",{enumerable:!0,get:function(){return $d(na).default}});var El,Ol,kl={};i(kl),e(kl,"__esModule",(()=>El),(e=>El=e)),e(kl,"default",(()=>Ol),(e=>Ol=e)),El=!0;var Ml,Cl,Pl=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),Al=$l(Ar),Il=$l(Dr),Rl=$l(ft),Nl={};i(Nl),e(Nl,"__esModule",(()=>Ml),(e=>Ml=e)),e(Nl,"default",(()=>Cl),(e=>Cl=e)),Ml=!0;var Dl=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();var Ll={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:F.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},jl=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Fl=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.styleID=0,this.reset(),Gl(this,t,t)}return e.prototype.clone=function(){var t={};return Gl(t,this,Ll),new e(t)},e.prototype.reset=function(){Gl(this,Ll,Ll)},e.prototype.toFontString=function(){var e="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(var i=t.length-1;i>=0;i--){var r=t[i].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&jl.indexOf(r)<0&&(r='"'+r+'"'),t[i]=r}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+e+" "+t.join(",")},Dl(e,[{key:"align",get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(e){var t=Ul(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(e){var t=Ul(e);this._fill!==t&&(this._fill=t,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(e){(function(e,t){if(!Array.isArray(e)||!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(var i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0})(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}},{key:"leading",get:function(){return this._leading},set:function(e){this._leading!==e&&(this._leading=e,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(e){this._padding!==e&&(this._padding=e,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(e){var t=Ul(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(e){this._trim!==e&&(this._trim=e,this.styleID++)}},{key:"whiteSpace",get:function(){return this._whiteSpace},set:function(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}}]),e}();function Bl(e){return"number"==typeof e?hi(e):("string"==typeof e&&0===e.indexOf("0x")&&(e=e.replace("0x","#")),e)}function Ul(e){if(Array.isArray(e)){for(var t=0;t<e.length;++t)e[t]=Bl(e[t]);return e}return Bl(e)}function Gl(e,t,i){for(var r in i)Array.isArray(t[r])?e[r]=t[r].slice():e[r]=t[r]}Cl=Fl;var Wl,zl,Hl=$l(Nl),Xl={};i(Xl),e(Xl,"__esModule",(()=>Wl),(e=>Wl=e)),e(Xl,"default",(()=>zl),(e=>zl=e)),Wl=!0;var Yl=function(){function e(t,i,r,n,o,s,a,h,u){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.text=t,this.style=i,this.width=r,this.height=n,this.lines=o,this.lineWidths=s,this.lineHeight=a,this.maxLineWidth=h,this.fontProperties=u}return e.measureText=function(t,i,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e._canvas;r=null==r?i.wordWrap:r;var o=i.toFontString(),s=e.measureFont(o),a=n.getContext("2d");a.font=o;for(var h=r?e.wordWrap(t,i,n):t,u=h.split(/(?:\r\n|\r|\n)/),l=new Array(u.length),c=0,d=0;d<u.length;d++){var f=a.measureText(u[d]).width+(u[d].length-1)*i.letterSpacing;l[d]=f,c=Math.max(c,f)}var p=c+i.strokeThickness;i.dropShadow&&(p+=i.dropShadowDistance);var g=i.lineHeight||s.fontSize+i.strokeThickness,m=Math.max(g,s.fontSize+i.strokeThickness)+(u.length-1)*(g+i.leading);return i.dropShadow&&(m+=i.dropShadowDistance),new e(t,i,p,m,u,l,g+i.leading,c,s)},e.wordWrap=function(t,i){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e._canvas,n=r.getContext("2d"),o=0,s="",a="",h={},u=i.letterSpacing,l=i.whiteSpace,c=e.collapseSpaces(l),d=e.collapseNewlines(l),f=!c,p=i.wordWrapWidth+u,g=e.tokenize(t),m=0;m<g.length;m++){var y=g[m];if(e.isNewline(y)){if(!d){a+=e.addLine(s),f=!c,s="",o=0;continue}y=" "}if(c){var v=e.isBreakingSpace(y),b=e.isBreakingSpace(s[s.length-1]);if(v&&b)continue}var x=e.getFromCache(y,u,h,n);if(x>p)if(""!==s&&(a+=e.addLine(s),s="",o=0),e.canBreakWords(y,i.breakWords))for(var w=y.split(""),_=0;_<w.length;_++){for(var T=w[_],S=1;w[_+S];){var E=w[_+S],O=T[T.length-1];if(e.canBreakChars(O,E,y,_,i.breakWords))break;T+=E,S++}_+=T.length-1;var k=e.getFromCache(T,u,h,n);k+o>p&&(a+=e.addLine(s),f=!1,s="",o=0),s+=T,o+=k}else{s.length>0&&(a+=e.addLine(s),s="",o=0);var M=m===g.length-1;a+=e.addLine(y,!M),f=!1,s="",o=0}else x+o>p&&(f=!1,a+=e.addLine(s),s="",o=0),(s.length>0||!e.isBreakingSpace(y)||f)&&(s+=y,o+=x)}return a+=e.addLine(s,!1)},e.addLine=function(t){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t=e.trimRight(t),t=i?t+"\n":t},e.getFromCache=function(e,t,i,r){var n=i[e];if(void 0===n){var o=e.length*t;n=r.measureText(e).width+o,i[e]=n}return n},e.collapseSpaces=function(e){return"normal"===e||"pre-line"===e},e.collapseNewlines=function(e){return"normal"===e},e.trimRight=function(t){if("string"!=typeof t)return"";for(var i=t.length-1;i>=0;i--){var r=t[i];if(!e.isBreakingSpace(r))break;t=t.slice(0,-1)}return t},e.isNewline=function(t){return"string"==typeof t&&e._newlines.indexOf(t.charCodeAt(0))>=0},e.isBreakingSpace=function(t){return"string"==typeof t&&e._breakingSpaces.indexOf(t.charCodeAt(0))>=0},e.tokenize=function(t){var i=[],r="";if("string"!=typeof t)return i;for(var n=0;n<t.length;n++){var o=t[n];e.isBreakingSpace(o)||e.isNewline(o)?(""!==r&&(i.push(r),r=""),i.push(o)):r+=o}return""!==r&&i.push(r),i},e.canBreakWords=function(e,t){return t},e.canBreakChars=function(e,t,i,r,n){return!0},e.measureFont=function(t){if(e._fonts[t])return e._fonts[t];var i={},r=e._canvas,n=e._context;n.font=t;var o=e.METRICS_STRING+e.BASELINE_SYMBOL,s=Math.ceil(n.measureText(o).width),a=Math.ceil(n.measureText(e.BASELINE_SYMBOL).width),h=2*a;a=a*e.BASELINE_MULTIPLIER|0,r.width=s,r.height=h,n.fillStyle="#f00",n.fillRect(0,0,s,h),n.font=t,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(o,0,a);var u=n.getImageData(0,0,s,h).data,l=u.length,c=4*s,d=0,f=0,p=!1;for(d=0;d<a;++d){for(var g=0;g<c;g+=4)if(255!==u[f+g]){p=!0;break}if(p)break;f+=c}for(i.ascent=a-d,f=l-c,p=!1,d=h;d>a;--d){for(var m=0;m<c;m+=4)if(255!==u[f+m]){p=!0;break}if(p)break;f-=c}return i.descent=d-a,i.fontSize=i.ascent+i.descent,e._fonts[t]=i,i},e.clearMetrics=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t?delete e._fonts[t]:e._fonts={}},e}();zl=Yl;var Vl=document.createElement("canvas");Vl.width=Vl.height=10,Yl._canvas=Vl,Yl._context=Vl.getContext("2d"),Yl._fonts={},Yl.METRICS_STRING="|q",Yl.BASELINE_SYMBOL="M",Yl.BASELINE_MULTIPLIER=1.4,Yl._newlines=[10,13],Yl._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var ql,Kl,Zl=$l(Xl),Jl={};i(Jl),e(Jl,"__esModule",(()=>ql),(e=>ql=e)),e(Jl,"default",(()=>Kl),(e=>Kl=e)),ql=!0,Kl=function(e){var t=e.width,i=e.height,r=e.getContext("2d"),n=r.getImageData(0,0,t,i).data,o=n.length,s={top:null,left:null,right:null,bottom:null},a=null,h=void 0,u=void 0,l=void 0;for(h=0;h<o;h+=4)0!==n[h+3]&&(u=h/4%t,l=~~(h/4/t),null===s.top&&(s.top=l),(null===s.left||u<s.left)&&(s.left=u),(null===s.right||s.right<u)&&(s.right=u+1),(null===s.bottom||s.bottom<l)&&(s.bottom=l));null!==s.top&&(t=s.right-s.left,i=s.bottom-s.top+1,a=r.getImageData(s.left,s.top,t,i));return{height:i,width:t,data:a}};var Ql=$l(Jl);function $l(e){return e&&e.__esModule?e:{default:e}}var ec={texture:!0,children:!1,baseTexture:!0},tc=function(e){function t(i,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=n||document.createElement("canvas")).width=3,n.height=3;var o=Il.default.fromCanvas(n,Rl.default.SCALE_MODE,"text");o.orig=new z.Rectangle,o.trim=new z.Rectangle;var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,o));return Il.default.addToCache(s._texture,s._texture.baseTexture.textureCacheIds[0]),s.canvas=n,s.context=s.canvas.getContext("2d"),s.resolution=Rl.default.RESOLUTION,s._text=null,s._style=null,s._styleListener=null,s._font="",s.text=i,s.style=r,s.localStyleID=-1,s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.updateText=function(e){var t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),this.dirty||!e){this._font=this._style.toFontString();var i=this.context,r=Zl.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas),n=r.width,o=r.height,s=r.lines,a=r.lineHeight,h=r.lineWidths,u=r.maxLineWidth,l=r.fontProperties;this.canvas.width=Math.ceil((Math.max(1,n)+2*t.padding)*this.resolution),this.canvas.height=Math.ceil((Math.max(1,o)+2*t.padding)*this.resolution),i.scale(this.resolution,this.resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.strokeStyle=t.stroke,i.lineWidth=t.strokeThickness,i.textBaseline=t.textBaseline,i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit;var c=void 0,d=void 0;if(t.dropShadow){i.fillStyle=t.dropShadowColor,i.globalAlpha=t.dropShadowAlpha,i.shadowBlur=t.dropShadowBlur,t.dropShadowBlur>0&&(i.shadowColor=t.dropShadowColor);for(var f=Math.cos(t.dropShadowAngle)*t.dropShadowDistance,p=Math.sin(t.dropShadowAngle)*t.dropShadowDistance,g=0;g<s.length;g++)c=t.strokeThickness/2,d=t.strokeThickness/2+g*a+l.ascent,"right"===t.align?c+=u-h[g]:"center"===t.align&&(c+=(u-h[g])/2),t.fill&&(this.drawLetterSpacing(s[g],c+f+t.padding,d+p+t.padding),t.stroke&&t.strokeThickness&&(i.strokeStyle=t.dropShadowColor,this.drawLetterSpacing(s[g],c+f+t.padding,d+p+t.padding,!0),i.strokeStyle=t.stroke))}i.shadowBlur=0,i.globalAlpha=1,i.fillStyle=this._generateFillStyle(t,s);for(var m=0;m<s.length;m++)c=t.strokeThickness/2,d=t.strokeThickness/2+m*a+l.ascent,"right"===t.align?c+=u-h[m]:"center"===t.align&&(c+=(u-h[m])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(s[m],c+t.padding,d+t.padding,!0),t.fill&&this.drawLetterSpacing(s[m],c+t.padding,d+t.padding);this.updateTexture()}},t.prototype.drawLetterSpacing=function(e,t,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=this._style,o=n.letterSpacing;if(0!==o)for(var s=String.prototype.split.call(e,""),a=t,h=0,u="",l=this.context.measureText(e).width,c=0;h<e.length;)u=s[h++],r?this.context.strokeText(u,a,i):this.context.fillText(u,a,i),a+=l-(c=this.context.measureText(e.substring(h)).width)+o,l=c;else r?this.context.strokeText(e,t,i):this.context.fillText(e,t,i)},t.prototype.updateTexture=function(){var e=this.canvas;if(this._style.trim){var t=(0,Ql.default)(e);t.data&&(e.width=t.width,e.height=t.height,this.context.putImageData(t.data,0,0))}var i=this._texture,r=this._style,n=r.trim?0:r.padding,o=i.baseTexture;o.hasLoaded=!0,o.resolution=this.resolution,o.realWidth=e.width,o.realHeight=e.height,o.width=e.width/this.resolution,o.height=e.height/this.resolution,i.trim.width=i._frame.width=e.width/this.resolution,i.trim.height=i._frame.height=e.height/this.resolution,i.trim.x=-n,i.trim.y=-n,i.orig.width=i._frame.width-2*n,i.orig.height=i._frame.height-2*n,this._onTextureUpdate(),o.emit("update",o),this.dirty=!1},t.prototype.renderWebGL=function(t){this.resolution!==t.resolution&&(this.resolution=t.resolution,this.dirty=!0),this.updateText(!0),e.prototype.renderWebGL.call(this,t)},t.prototype._renderCanvas=function(t){this.resolution!==t.resolution&&(this.resolution=t.resolution,this.dirty=!0),this.updateText(!0),e.prototype._renderCanvas.call(this,t)},t.prototype.getLocalBounds=function(t){return this.updateText(!0),e.prototype.getLocalBounds.call(this,t)},t.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},t.prototype._onStyleChange=function(){this.dirty=!0},t.prototype._generateFillStyle=function(e,t){if(!Array.isArray(e.fill))return e.fill;if(navigator.isCocoonJS)return e.fill[0];var i=void 0,r=void 0,n=void 0,o=void 0,s=this.canvas.width/this.resolution,a=this.canvas.height/this.resolution,h=e.fill.slice(),u=e.fillGradientStops.slice();if(!u.length)for(var l=h.length+1,c=1;c<l;++c)u.push(c/l);if(h.unshift(e.fill[0]),u.unshift(0),h.push(e.fill[e.fill.length-1]),u.push(1),e.fillGradientType===F.LINEAR_VERTICAL){i=this.context.createLinearGradient(s/2,0,s/2,a),r=(h.length+1)*t.length,n=0;for(var d=0;d<t.length;d++){n+=1;for(var f=0;f<h.length;f++)o="number"==typeof u[f]?u[f]/t.length+d/t.length:n/r,i.addColorStop(o,h[f]),n++}}else{i=this.context.createLinearGradient(0,a/2,s,a/2),r=h.length+1,n=1;for(var p=0;p<h.length;p++)o="number"==typeof u[p]?u[p]:n/r,i.addColorStop(o,h[p]),n++}return i},t.prototype.destroy=function(t){"boolean"==typeof t&&(t={children:t}),t=Object.assign({},ec,t),e.prototype.destroy.call(this,t),this.context=null,this.canvas=null,this._style=null},Pl(t,[{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){this.updateText(!0);var t=yi(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){this.updateText(!0);var t=yi(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}},{key:"style",get:function(){return this._style},set:function(e){(e=e||{})instanceof Hl.default?this._style=e:this._style=new Hl.default(e),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(e){e=String(""===e||null==e?" ":e),this._text!==e&&(this._text=e,this.dirty=!0)}}]),t}(Al.default);Ol=tc,Object.defineProperty(x,"Text",{enumerable:!0,get:function(){return $d(kl).default}}),Object.defineProperty(x,"TextStyle",{enumerable:!0,get:function(){return $d(Nl).default}}),Object.defineProperty(x,"TextMetrics",{enumerable:!0,get:function(){return $d(Xl).default}});var ic,rc,nc={};i(nc),e(nc,"__esModule",(()=>ic),(e=>ic=e)),e(nc,"default",(()=>rc),(e=>rc=e)),ic=!0;var oc,sc,ac=xc(Kt),hc=xc(ts),uc=xc(Dr),lc={};i(lc),e(lc,"__esModule",(()=>oc),(e=>oc=e)),e(lc,"default",(()=>sc),(e=>sc=e)),oc=!0;var cc=function(){function e(t,i,r,n,o,s,a,h,u){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.lineWidth=t,this.lineAlignment=u,this.nativeLines=a,this.lineColor=i,this.lineAlpha=r,this._lineTint=i,this.fillColor=n,this.fillAlpha=o,this._fillTint=n,this.fill=s,this.holes=[],this.shape=h,this.type=h.type}return e.prototype.clone=function(){return new e(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape,this.lineAlignment)},e.prototype.addHole=function(e){this.holes.push(e)},e.prototype.destroy=function(){this.shape=null,this.holes=null},e}();sc=cc;var dc,fc,pc=xc(lc),gc=xc(Ar),mc=xc(Qe),yc={};i(yc),e(yc,"__esModule",(()=>dc),(e=>dc=e)),e(yc,"default",(()=>fc),(e=>fc=e)),dc=!0,fc=function(e,t,i,r,n,o,s,a,h){var u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[],l=0,c=0,d=0,f=0,p=0;u.push(e,t);for(var g=1,m=0;g<=h;++g)d=(c=(l=1-(m=g/h))*l)*l,p=(f=m*m)*m,u.push(d*e+3*c*m*i+3*l*f*n+p*s,d*t+3*c*m*r+3*l*f*o+p*a);return u};var vc=xc(yc),bc=xc(Yo);function xc(e){return e&&e.__esModule?e:{default:e}}function wc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Tc=void 0,Sc=new z.Matrix,Ec=new z.Point,Oc=new Float32Array(4),kc=new Float32Array(4),Mc=function(e){function t(){var i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];wc(this,t);var r=_c(this,e.call(this));return r.fillAlpha=1,r.lineWidth=0,r.nativeLines=i,r.lineColor=0,r.lineAlignment=.5,r.graphicsData=[],r.tint=16777215,r._prevTint=16777215,r.blendMode=k.NORMAL,r.currentPath=null,r._webGL={},r.isMask=!1,r.boundsPadding=0,r._localBounds=new mc.default,r.dirty=0,r.fastRectDirty=-1,r.clearDirty=0,r.boundsDirty=-1,r.cachedSpriteDirty=!1,r._spriteRect=null,r._fastRect=!1,r._prevRectTint=null,r._prevRectFillColor=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.clone=function(){var e=new t;e.renderable=this.renderable,e.fillAlpha=this.fillAlpha,e.lineWidth=this.lineWidth,e.lineColor=this.lineColor,e.lineAlignment=this.lineAlignment,e.tint=this.tint,e.blendMode=this.blendMode,e.isMask=this.isMask,e.boundsPadding=this.boundsPadding,e.dirty=0,e.cachedSpriteDirty=this.cachedSpriteDirty;for(var i=0;i<this.graphicsData.length;++i)e.graphicsData.push(this.graphicsData[i].clone());return e.currentPath=e.graphicsData[e.graphicsData.length-1],e.updateLocalBounds(),e},t.prototype._quadraticCurveLength=function(e,t,i,r,n,o){var s=e-2*i+n,a=t-2*r+o,h=2*i-2*e,u=2*r-2*t,l=4*(s*s+a*a),c=4*(s*h+a*u),d=h*h+u*u,f=2*Math.sqrt(l+c+d),p=Math.sqrt(l),g=2*l*p,m=2*Math.sqrt(d),y=c/p;return(g*f+p*c*(f-m)+(4*d*l-c*c)*Math.log((2*p+y+f)/(y+m)))/(4*g)},t.prototype._bezierCurveLength=function(e,t,i,r,n,o,s,a){for(var h=0,u=0,l=0,c=0,d=0,f=0,p=0,g=0,m=0,y=0,v=0,b=e,x=t,w=1;w<=10;++w)y=b-(g=(p=(f=(d=1-(u=w/10))*d)*d)*e+3*f*u*i+3*d*(l=u*u)*n+(c=l*u)*s),v=x-(m=p*t+3*f*u*r+3*d*l*o+c*a),b=g,x=m,h+=Math.sqrt(y*y+v*v);return h},t.prototype._segmentsCount=function(e){var i=Math.ceil(e/t.CURVES.maxLength);return i<t.CURVES.minSegments?i=t.CURVES.minSegments:i>t.CURVES.maxSegments&&(i=t.CURVES.maxSegments),i},t.prototype.lineStyle=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;if(this.lineWidth=e,this.lineColor=t,this.lineAlpha=i,this.lineAlignment=r,this.currentPath)if(this.currentPath.shape.points.length){var n=new z.Polygon(this.currentPath.shape.points.slice(-2));n.closed=!1,this.drawShape(n)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha,this.currentPath.lineAlignment=this.lineAlignment;return this},t.prototype.moveTo=function(e,t){var i=new z.Polygon([e,t]);return i.closed=!1,this.drawShape(i),this},t.prototype.lineTo=function(e,t){var i=this.currentPath.shape.points,r=i[i.length-2],n=i[i.length-1];return r===e&&n===t||(i.push(e,t),this.dirty++),this},t.prototype.quadraticCurveTo=function(e,i,r,n){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var o=this.currentPath.shape.points,s=0,a=0;0===o.length&&this.moveTo(0,0);for(var h=o[o.length-2],u=o[o.length-1],l=t.CURVES.adaptive?this._segmentsCount(this._quadraticCurveLength(h,u,e,i,r,n)):20,c=1;c<=l;++c){var d=c/l;s=h+(e-h)*d,a=u+(i-u)*d,o.push(s+(e+(r-e)*d-s)*d,a+(i+(n-i)*d-a)*d)}return this.dirty++,this},t.prototype.bezierCurveTo=function(e,i,r,n,o,s){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var a=this.currentPath.shape.points,h=a[a.length-2],u=a[a.length-1];a.length-=2;var l=t.CURVES.adaptive?this._segmentsCount(this._bezierCurveLength(h,u,e,i,r,n,o,s)):20;return(0,vc.default)(h,u,e,i,r,n,o,s,l,a),this.dirty++,this},t.prototype.arcTo=function(e,t,i,r,n){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(e,t):this.moveTo(e,t);var o=this.currentPath.shape.points,s=o[o.length-2],a=o[o.length-1]-t,h=s-e,u=r-t,l=i-e,c=Math.abs(a*l-h*u);if(c<1e-8||0===n)o[o.length-2]===e&&o[o.length-1]===t||o.push(e,t);else{var d=a*a+h*h,f=u*u+l*l,p=a*u+h*l,g=n*Math.sqrt(d)/c,m=n*Math.sqrt(f)/c,y=g*p/d,v=m*p/f,b=g*l+m*h,x=g*u+m*a,w=h*(m+y),_=a*(m+y),T=l*(g+v),S=u*(g+v),E=Math.atan2(_-x,w-b),O=Math.atan2(S-x,T-b);this.arc(b+e,x+t,n,E,O,h*u>l*a)}return this.dirty++,this},t.prototype.arc=function(e,i,r,n,o){var s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(n===o)return this;!s&&o<=n?o+=T:s&&n<=o&&(n+=T);var a=o-n,h=t.CURVES.adaptive?this._segmentsCount(Math.abs(a)*r):40*Math.ceil(Math.abs(a)/T);if(0===a)return this;var u=e+Math.cos(n)*r,l=i+Math.sin(n)*r,c=this.currentPath?this.currentPath.shape.points:null;if(c){var d=Math.abs(c[c.length-2]-u),f=Math.abs(c[c.length-1]-l);d<.001&&f<.001||c.push(u,l)}else this.moveTo(u,l),c=this.currentPath.shape.points;for(var p=a/(2*h),g=2*p,m=Math.cos(p),y=Math.sin(p),v=h-1,b=v%1/v,x=0;x<=v;++x){var w=x+b*x,_=p+n+g*w,S=Math.cos(_),E=-Math.sin(_);c.push((m*S+y*E)*r+e,(m*-E+y*S)*r+i)}return this.dirty++,this},t.prototype.beginFill=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.filling=!0,this.fillColor=e,this.fillAlpha=t,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},t.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},t.prototype.drawRect=function(e,t,i,r){return this.drawShape(new z.Rectangle(e,t,i,r)),this},t.prototype.drawRoundedRect=function(e,t,i,r,n){return this.drawShape(new z.RoundedRectangle(e,t,i,r,n)),this},t.prototype.drawCircle=function(e,t,i){return this.drawShape(new z.Circle(e,t,i)),this},t.prototype.drawEllipse=function(e,t,i,r){return this.drawShape(new z.Ellipse(e,t,i,r)),this},t.prototype.drawPolygon=function(e){var t=e,i=!0;if(t instanceof z.Polygon&&(i=t.closed,t=t.points),!Array.isArray(t)){t=new Array(arguments.length);for(var r=0;r<t.length;++r)t[r]=arguments[r]}var n=new z.Polygon(t);return n.closed=i,this.drawShape(n),this},t.prototype.drawStar=function(e,t,i,r,n){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;n=n||r/2;for(var s=-1*Math.PI/2+o,a=2*i,h=T/a,u=[],l=0;l<a;l++){var c=l%2?n:r,d=l*h+s;u.push(e+c*Math.cos(d),t+c*Math.sin(d))}return this.drawPolygon(u)},t.prototype.clear=function(){return(this.lineWidth||this.filling||this.graphicsData.length>0)&&(this.lineWidth=0,this.lineAlignment=.5,this.filling=!1,this.boundsDirty=-1,this.canvasTintDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},t.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===D.RECT&&!this.graphicsData[0].lineWidth},t.prototype._renderWebGL=function(e){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(e):(e.setObjectRenderer(e.plugins.graphics),e.plugins.graphics.render(this))},t.prototype._renderSpriteRect=function(e){var t=this.graphicsData[0].shape;this._spriteRect||(this._spriteRect=new gc.default(new uc.default(uc.default.WHITE)));var i=this._spriteRect,r=this.graphicsData[0].fillColor;if(16777215===this.tint)i.tint=r;else if(this.tint!==this._prevRectTint||r!==this._prevRectFillColor){var n=Oc,o=kc;ai(r,n),ai(this.tint,o),n[0]*=o[0],n[1]*=o[1],n[2]*=o[2],i.tint=ui(n),this._prevRectTint=this.tint,this._prevRectFillColor=r}i.alpha=this.graphicsData[0].fillAlpha,i.worldAlpha=this.worldAlpha*i.alpha,i.blendMode=this.blendMode,i._texture._frame.width=t.width,i._texture._frame.height=t.height,i.transform.worldTransform=this.transform.worldTransform,i.anchor.set(-t.x/t.width,-t.y/t.height),i._onAnchorUpdate(),i._renderWebGL(e)},t.prototype._renderCanvas=function(e){!0!==this.isMask&&e.plugins.graphics.render(this)},t.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var e=this._localBounds;this._bounds.addFrame(this.transform,e.minX,e.minY,e.maxX,e.maxY)},t.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,Ec);for(var t=this.graphicsData,i=0;i<t.length;++i){var r=t[i];if(r.fill&&(r.shape&&r.shape.contains(Ec.x,Ec.y))){var n=!1;if(r.holes)for(var o=0;o<r.holes.length;o++){if(r.holes[o].contains(Ec.x,Ec.y)){n=!0;break}}if(!n)return!0}}return!1},t.prototype.updateLocalBounds=function(){var e=1/0,t=-1/0,i=1/0,r=-1/0;if(this.graphicsData.length)for(var n=0,o=0,s=0,a=0,h=0,u=0;u<this.graphicsData.length;u++){var l=this.graphicsData[u],c=l.type,d=l.lineWidth*l.lineAlignment;if(n=l.shape,c===D.RECT||c===D.RREC)o=n.x-d,s=n.y-d,e=o<e?o:e,t=o+(a=n.width+2*d)>t?o+a:t,i=s<i?s:i,r=s+(h=n.height+2*d)>r?s+h:r;else if(c===D.CIRC)o=n.x,s=n.y,e=o-(a=n.radius+d)<e?o-a:e,t=o+a>t?o+a:t,i=s-(h=n.radius+d)<i?s-h:i,r=s+h>r?s+h:r;else if(c===D.ELIP)o=n.x,s=n.y,e=o-(a=n.width+d)<e?o-a:e,t=o+a>t?o+a:t,i=s-(h=n.height+d)<i?s-h:i,r=s+h>r?s+h:r;else for(var f=n.points,p=0,g=0,m=0,y=0,v=0,b=0,x=0,w=0,_=0;_+2<f.length;_+=2)o=f[_],s=f[_+1],p=f[_+2],g=f[_+3],m=Math.abs(p-o),y=Math.abs(g-s),h=2*d,(a=Math.sqrt(m*m+y*y))<1e-9||(e=(x=(p+o)/2)-(v=(h/a*y+m)/2)<e?x-v:e,t=x+v>t?x+v:t,i=(w=(g+s)/2)-(b=(h/a*m+y)/2)<i?w-b:i,r=w+b>r?w+b:r)}else e=0,t=0,i=0,r=0;var T=this.boundsPadding;this._localBounds.minX=e-T,this._localBounds.maxX=t+T,this._localBounds.minY=i-T,this._localBounds.maxY=r+T},t.prototype.drawShape=function(e){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var t=new pc.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,e,this.lineAlignment);return this.graphicsData.push(t),t.type===D.POLY&&(t.shape.closed=t.shape.closed,this.currentPath=t),this.dirty++,t},t.prototype.generateCanvasTexture=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=this.getLocalBounds(),r=hc.default.create(i.width,i.height,e,t);Tc||(Tc=new bc.default),this.transform.updateLocalTransform(),this.transform.localTransform.copy(Sc),Sc.invert(),Sc.tx-=i.x,Sc.ty-=i.y,Tc.render(this,r,!0,Sc);var n=uc.default.fromCanvas(r.baseTexture._canvasRenderTarget.canvas,e,"graphics");return n.baseTexture.resolution=t,n.baseTexture.update(),n},t.prototype.closePath=function(){var e=this.currentPath;return e&&e.shape&&e.shape.close(),this},t.prototype.addHole=function(){var e=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(e.shape),this.currentPath=null,this},t.prototype.destroy=function(t){e.prototype.destroy.call(this,t);for(var i=0;i<this.graphicsData.length;++i)this.graphicsData[i].destroy();for(var r in this._webGL)for(var n=0;n<this._webGL[r].data.length;++n)this._webGL[r].data[n].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webGL=null,this._localBounds=null},t}(ac.default);rc=Mc,Mc._SPRITE_TEXTURE=null,Mc.CURVES={adaptive:!1,maxLength:10,minSegments:8,maxSegments:2048},Object.defineProperty(x,"Graphics",{enumerable:!0,get:function(){return $d(nc).default}}),Object.defineProperty(x,"GraphicsData",{enumerable:!0,get:function(){return $d(lc).default}});var Cc,Pc,Ac={};i(Ac),e(Ac,"__esModule",(()=>Cc),(e=>Cc=e)),e(Ac,"default",(()=>Pc),(e=>Pc=e)),Cc=!0;var Ic,Rc,Nc=wd(aa),Dc=wd(ba),Lc={};i(Lc),e(Lc,"__esModule",(()=>Ic),(e=>Ic=e)),e(Lc,"default",(()=>Rc),(e=>Rc=e)),Ic=!0;var jc=function(e){return e&&e.__esModule?e:{default:e}}(qe);var Fc=function(){function e(t,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.gl=t,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=jc.default.GLBuffer.createVertexBuffer(t),this.indexBuffer=jc.default.GLBuffer.createIndexBuffer(t),this.dirty=!0,this.nativeLines=!1,this.glPoints=null,this.glIndices=null,this.shader=i,this.vao=new jc.default.VertexArrayObject(t,r).addIndex(this.indexBuffer).addAttribute(this.buffer,i.attributes.aVertexPosition,t.FLOAT,!1,24,0).addAttribute(this.buffer,i.attributes.aColor,t.FLOAT,!1,24,8)}return e.prototype.reset=function(){this.points.length=0,this.indices.length=0},e.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},e.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},e}();Rc=Fc;var Bc,Uc,Gc=wd(Lc),Wc={};i(Wc),e(Wc,"__esModule",(()=>Bc),(e=>Bc=e)),e(Wc,"default",(()=>Uc),(e=>Uc=e)),Bc=!0;var zc=function(e){return e&&e.__esModule?e:{default:e}}(Qh);var Hc=function(e){function t(i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,i,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n")))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(zc.default);Uc=Hc;var Xc,Yc,Vc=wd(Wc),qc={};i(qc),e(qc,"__esModule",(()=>Xc),(e=>Xc=e)),e(qc,"default",(()=>Yc),(e=>Yc=e)),Xc=!0,Yc=function(e,t,i){e.points=e.shape.points.slice();var r=e.points;if(e.fill&&r.length>=6){for(var n=[],o=e.holes,s=0;s<o.length;s++){var a=o[s];n.push(r.length/2),r=r.concat(a.points)}var h=t.points,u=t.indices,l=r.length/2,c=ai(e.fillColor),d=e.fillAlpha,f=c[0]*d,p=c[1]*d,g=c[2]*d,m=(0,$c.default)(r,n,2);if(!m)return;for(var y=h.length/6,v=0;v<m.length;v+=3)u.push(m[v]+y),u.push(m[v]+y),u.push(m[v+1]+y),u.push(m[v+2]+y),u.push(m[v+2]+y);for(var b=0;b<l;b++)h.push(r[2*b],r[2*b+1],f,p,g,d)}e.lineWidth>0&&(0,Qc.default)(e,t,i)};var Kc,Zc,Jc={};i(Jc),e(Jc,"__esModule",(()=>Kc),(e=>Kc=e)),e(Jc,"default",(()=>Zc),(e=>Zc=e)),Kc=!0,Zc=function(e,t,i){e.nativeLines?function(e,t){var i=0,r=e.points;if(0===r.length)return;var n=t.points,o=r.length/2,s=ai(e.lineColor),a=e.lineAlpha,h=s[0]*a,u=s[1]*a,l=s[2]*a;for(i=1;i<o;i++){var c=r[2*(i-1)],d=r[2*(i-1)+1],f=r[2*i],p=r[2*i+1];n.push(c,d),n.push(h,u,l,a),n.push(f,p),n.push(h,u,l,a)}}(e,i):function(e,t){var i=e.points;if(0===i.length)return;var r=new z.Point(i[0],i[1]),n=new z.Point(i[i.length-2],i[i.length-1]);if(r.x===n.x&&r.y===n.y){(i=i.slice()).pop(),i.pop();var o=(n=new z.Point(i[i.length-2],i[i.length-1])).x+.5*(r.x-n.x),s=n.y+.5*(r.y-n.y);i.unshift(o,s),i.push(o,s)}var a=t.points,h=t.indices,u=i.length/2,l=i.length,c=a.length/6,d=e.lineWidth/2,f=ai(e.lineColor),p=e.lineAlpha,g=f[0]*p,m=f[1]*p,y=f[2]*p,v=i[0],b=i[1],x=i[2],w=i[3],_=0,T=0,S=-(b-w),E=v-x,O=0,k=0,M=0,C=0,P=Math.sqrt(S*S+E*E);S/=P,E/=P,S*=d,E*=d;var A=e.lineAlignment,I=2*(1-A),R=2*A;a.push(v-S*I,b-E*I,g,m,y,p),a.push(v+S*R,b+E*R,g,m,y,p);for(var N=1;N<u-1;++N){v=i[2*(N-1)],b=i[2*(N-1)+1],x=i[2*N],w=i[2*N+1],_=i[2*(N+1)],T=i[2*(N+1)+1],S=-(b-w),E=v-x,S/=P=Math.sqrt(S*S+E*E),E/=P,S*=d,E*=d,O=-(w-T),k=x-_,O/=P=Math.sqrt(O*O+k*k),k/=P;var D=-E+b-(-E+w),L=-S+x-(-S+v),j=(-S+v)*(-E+w)-(-S+x)*(-E+b),F=-(k*=d)+T-(-k+w),B=-(O*=d)+x-(-O+_),U=(-O+_)*(-k+w)-(-O+x)*(-k+T),G=D*B-F*L;if(Math.abs(G)<.1)G+=10.1,a.push(x-S*I,w-E*I,g,m,y,p),a.push(x+S*R,w+E*R,g,m,y,p);else{var W=(L*U-B*j)/G,H=(F*j-D*U)/G;(W-x)*(W-x)+(H-w)*(H-w)>196*d*d?(M=S-O,C=E-k,M/=P=Math.sqrt(M*M+C*C),C/=P,M*=d,C*=d,a.push(x-M*I,w-C*I),a.push(g,m,y,p),a.push(x+M*R,w+C*R),a.push(g,m,y,p),a.push(x-M*R*I,w-C*I),a.push(g,m,y,p),l++):(a.push(x+(W-x)*I,w+(H-w)*I),a.push(g,m,y,p),a.push(x-(W-x)*R,w-(H-w)*R),a.push(g,m,y,p))}}v=i[2*(u-2)],b=i[2*(u-2)+1],x=i[2*(u-1)],w=i[2*(u-1)+1],S=-(b-w),E=v-x,P=Math.sqrt(S*S+E*E),S/=P,E/=P,S*=d,E*=d,a.push(x-S*I,w-E*I),a.push(g,m,y,p),a.push(x+S*R,w+E*R),a.push(g,m,y,p),h.push(c);for(var X=0;X<l;++X)h.push(c++);h.push(c-1)}(e,t)};var Qc=ed(Jc),$c=ed(Yi);function ed(e){return e&&e.__esModule?e:{default:e}}var td,id,rd=wd(qc),nd={};i(nd),e(nd,"__esModule",(()=>td),(e=>td=e)),e(nd,"default",(()=>id),(e=>id=e)),td=!0,id=function(e,t,i){var r=e.shape,n=r.x,o=r.y,s=r.width,a=r.height;if(e.fill){var h=ai(e.fillColor),u=e.fillAlpha,l=h[0]*u,c=h[1]*u,d=h[2]*u,f=t.points,p=t.indices,g=f.length/6;f.push(n,o),f.push(l,c,d,u),f.push(n+s,o),f.push(l,c,d,u),f.push(n,o+a),f.push(l,c,d,u),f.push(n+s,o+a),f.push(l,c,d,u),p.push(g,g,g+1,g+2,g+3,g+3)}if(e.lineWidth){var m=e.points;e.points=[n,o,n+s,o,n+s,o+a,n,o+a,n,o],(0,od.default)(e,t,i),e.points=m}};var od=function(e){return e&&e.__esModule?e:{default:e}}(Jc);var sd,ad,hd=wd(nd),ud={};i(ud),e(ud,"__esModule",(()=>sd),(e=>sd=e)),e(ud,"default",(()=>ad),(e=>ad=e)),sd=!0,ad=function(e,t,i){var r=e.shape,n=r.x,o=r.y,s=r.width,a=r.height,h=r.radius,u=[];if(u.push(n+h,o),pd(n+s-h,o,n+s,o,n+s,o+h,u),pd(n+s,o+a-h,n+s,o+a,n+s-h,o+a,u),pd(n+h,o+a,n,o+a,n,o+a-h,u),pd(n,o+h,n,o,n+h+1e-10,o,u),e.fill){for(var l=ai(e.fillColor),c=e.fillAlpha,d=l[0]*c,f=l[1]*c,p=l[2]*c,g=t.points,m=t.indices,y=g.length/6,v=(0,ld.default)(u,null,2),b=0,x=v.length;b<x;b+=3)m.push(v[b]+y),m.push(v[b]+y),m.push(v[b+1]+y),m.push(v[b+2]+y),m.push(v[b+2]+y);for(var w=0,_=u.length;w<_;w++)g.push(u[w],u[++w],d,f,p,c)}if(e.lineWidth){var T=e.points;e.points=u,(0,cd.default)(e,t,i),e.points=T}};var ld=dd(Yi),cd=dd(Jc);function dd(e){return e&&e.__esModule?e:{default:e}}function fd(e,t,i){return e+(t-e)*i}function pd(e,t,i,r,n,o){for(var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],a=20,h=s,u=0,l=0,c=0,d=0,f=0,p=0,g=0,m=0;g<=a;++g)u=fd(e,i,m=g/a),l=fd(t,r,m),c=fd(i,n,m),d=fd(r,o,m),f=fd(u,c,m),p=fd(l,d,m),h.push(f,p);return h}var gd,md,yd=wd(ud),vd={};i(vd),e(vd,"__esModule",(()=>gd),(e=>gd=e)),e(vd,"default",(()=>md),(e=>md=e)),gd=!0,md=function(e,t,i){var r=e.shape,n=r.x,o=r.y,s=void 0,a=void 0;e.type===D.CIRC?(s=r.radius,a=r.radius):(s=r.width,a=r.height);if(0===s||0===a)return;var h=Math.floor(30*Math.sqrt(r.radius))||Math.floor(15*Math.sqrt(r.width+r.height)),u=2*Math.PI/h;if(e.fill){var l=ai(e.fillColor),c=e.fillAlpha,d=l[0]*c,f=l[1]*c,p=l[2]*c,g=t.points,m=t.indices,y=g.length/6;m.push(y);for(var v=0;v<h+1;v++)g.push(n,o,d,f,p,c),g.push(n+Math.sin(u*v)*s,o+Math.cos(u*v)*a,d,f,p,c),m.push(y++,y++);m.push(y-1)}if(e.lineWidth){var b=e.points;e.points=[];for(var x=0;x<h;x++)e.points.push(n+Math.sin(u*-x)*s,o+Math.cos(u*-x)*a);e.points.push(e.points[0],e.points[1]),(0,bd.default)(e,t,i),e.points=b}};var bd=function(e){return e&&e.__esModule?e:{default:e}}(Jc);var xd=wd(vd);function wd(e){return e&&e.__esModule?e:{default:e}}var _d=function(e){function t(i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,i));return r.graphicsDataPool=[],r.primitiveShader=null,r.gl=i.gl,r.CONTEXT_UID=0,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new Vc.default(this.gl)},t.prototype.destroy=function(){Nc.default.prototype.destroy.call(this);for(var e=0;e<this.graphicsDataPool.length;++e)this.graphicsDataPool[e].destroy();this.graphicsDataPool=null},t.prototype.render=function(e){var t=this.renderer,i=t.gl,r=void 0,n=e._webGL[this.CONTEXT_UID];n&&e.dirty===n.dirty||(this.updateGraphics(e),n=e._webGL[this.CONTEXT_UID]);var o=this.primitiveShader;t.bindShader(o),t.state.setBlendMode(e.blendMode);for(var s=0,a=n.data.length;s<a;s++){var h=(r=n.data[s]).shader;t.bindShader(h),h.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),h.uniforms.tint=ai(e.tint),h.uniforms.alpha=e.worldAlpha,t.bindVao(r.vao),r.nativeLines?i.drawArrays(i.LINES,0,r.points.length/6):r.vao.draw(i.TRIANGLE_STRIP,r.indices.length)}},t.prototype.updateGraphics=function(e){var t=this.renderer.gl,i=e._webGL[this.CONTEXT_UID];if(i||(i=e._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:t,clearDirty:-1,dirty:-1}),i.dirty=e.dirty,e.clearDirty!==i.clearDirty){i.clearDirty=e.clearDirty;for(var r=0;r<i.data.length;r++)this.graphicsDataPool.push(i.data[r]);i.data.length=0,i.lastIndex=0}for(var n=void 0,o=void 0,s=i.lastIndex;s<e.graphicsData.length;s++){var a=e.graphicsData[s];n=this.getWebGLData(i,0),a.nativeLines&&a.lineWidth&&(o=this.getWebGLData(i,0,!0),i.lastIndex++),a.type===D.POLY&&(0,rd.default)(a,n,o),a.type===D.RECT?(0,hd.default)(a,n,o):a.type===D.CIRC||a.type===D.ELIP?(0,xd.default)(a,n,o):a.type===D.RREC&&(0,yd.default)(a,n,o),i.lastIndex++}this.renderer.bindVao(null);for(var h=0;h<i.data.length;h++)(n=i.data[h]).dirty&&n.upload()},t.prototype.getWebGLData=function(e,t,i){var r=e.data[e.data.length-1];return(!r||r.nativeLines!==i||r.points.length>32e4)&&((r=this.graphicsDataPool.pop()||new Gc.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState)).nativeLines=i,r.reset(t),e.data.push(r)),r.dirty=!0,r},t}(Nc.default);Pc=_d,Dc.default.registerPlugin("graphics",_d),Object.defineProperty(x,"GraphicsRenderer",{enumerable:!0,get:function(){return $d(Ac).default}});var Td,Sd,Ed={};i(Ed),e(Ed,"__esModule",(()=>Td),(e=>Td=e)),e(Ed,"default",(()=>Sd),(e=>Sd=e)),Td=!0;var Od=function(e){return e&&e.__esModule?e:{default:e}}(Yo);var kd=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.renderer=t}return e.prototype.render=function(e){var t=this.renderer,i=t.context,r=e.worldAlpha,n=e.transform.worldTransform,o=t.resolution;i.setTransform(n.a*o,n.b*o,n.c*o,n.d*o,n.tx*o,n.ty*o),e.canvasTintDirty===e.dirty&&e._prevTint===e.tint||this.updateGraphicsTint(e),t.setBlendMode(e.blendMode);for(var s=0;s<e.graphicsData.length;s++){var a=e.graphicsData[s],h=a.shape,u=a._fillTint,l=a._lineTint;if(i.lineWidth=a.lineWidth,a.type===D.POLY){i.beginPath();var c=h.points,d=a.holes,f=void 0,p=void 0,g=void 0,m=void 0;i.moveTo(c[0],c[1]);for(var y=2;y<c.length;y+=2)i.lineTo(c[y],c[y+1]);if(h.closed&&i.closePath(),d.length>0){f=0,g=c[0],m=c[1];for(var v=2;v+2<c.length;v+=2)f+=(c[v]-g)*(c[v+3]-m)-(c[v+2]-g)*(c[v+1]-m);for(var b=0;b<d.length;b++)if(c=d[b].points){p=0,g=c[0],m=c[1];for(var x=2;x+2<c.length;x+=2)p+=(c[x]-g)*(c[x+3]-m)-(c[x+2]-g)*(c[x+1]-m);if(p*f<0){i.moveTo(c[0],c[1]);for(var w=2;w<c.length;w+=2)i.lineTo(c[w],c[w+1])}else{i.moveTo(c[c.length-2],c[c.length-1]);for(var _=c.length-4;_>=0;_-=2)i.lineTo(c[_],c[_+1])}d[b].close&&i.closePath()}}a.fill&&(i.globalAlpha=a.fillAlpha*r,i.fillStyle="#"+("00000"+(0|u).toString(16)).substr(-6),i.fill()),a.lineWidth&&(i.globalAlpha=a.lineAlpha*r,i.strokeStyle="#"+("00000"+(0|l).toString(16)).substr(-6),i.stroke())}else if(a.type===D.RECT)(a.fillColor||0===a.fillColor)&&(i.globalAlpha=a.fillAlpha*r,i.fillStyle="#"+("00000"+(0|u).toString(16)).substr(-6),i.fillRect(h.x,h.y,h.width,h.height)),a.lineWidth&&(i.globalAlpha=a.lineAlpha*r,i.strokeStyle="#"+("00000"+(0|l).toString(16)).substr(-6),i.strokeRect(h.x,h.y,h.width,h.height));else if(a.type===D.CIRC)i.beginPath(),i.arc(h.x,h.y,h.radius,0,2*Math.PI),i.closePath(),a.fill&&(i.globalAlpha=a.fillAlpha*r,i.fillStyle="#"+("00000"+(0|u).toString(16)).substr(-6),i.fill()),a.lineWidth&&(i.globalAlpha=a.lineAlpha*r,i.strokeStyle="#"+("00000"+(0|l).toString(16)).substr(-6),i.stroke());else if(a.type===D.ELIP){var T=2*h.width,S=2*h.height,E=h.x-T/2,O=h.y-S/2;i.beginPath();var k=.5522848,M=T/2*k,C=S/2*k,P=E+T,A=O+S,I=E+T/2,R=O+S/2;i.moveTo(E,R),i.bezierCurveTo(E,R-C,I-M,O,I,O),i.bezierCurveTo(I+M,O,P,R-C,P,R),i.bezierCurveTo(P,R+C,I+M,A,I,A),i.bezierCurveTo(I-M,A,E,R+C,E,R),i.closePath(),a.fill&&(i.globalAlpha=a.fillAlpha*r,i.fillStyle="#"+("00000"+(0|u).toString(16)).substr(-6),i.fill()),a.lineWidth&&(i.globalAlpha=a.lineAlpha*r,i.strokeStyle="#"+("00000"+(0|l).toString(16)).substr(-6),i.stroke())}else if(a.type===D.RREC){var N=h.x,L=h.y,j=h.width,F=h.height,B=h.radius,U=Math.min(j,F)/2|0;B=B>U?U:B,i.beginPath(),i.moveTo(N,L+B),i.lineTo(N,L+F-B),i.quadraticCurveTo(N,L+F,N+B,L+F),i.lineTo(N+j-B,L+F),i.quadraticCurveTo(N+j,L+F,N+j,L+F-B),i.lineTo(N+j,L+B),i.quadraticCurveTo(N+j,L,N+j-B,L),i.lineTo(N+B,L),i.quadraticCurveTo(N,L,N,L+B),i.closePath(),(a.fillColor||0===a.fillColor)&&(i.globalAlpha=a.fillAlpha*r,i.fillStyle="#"+("00000"+(0|u).toString(16)).substr(-6),i.fill()),a.lineWidth&&(i.globalAlpha=a.lineAlpha*r,i.strokeStyle="#"+("00000"+(0|l).toString(16)).substr(-6),i.stroke())}}},e.prototype.updateGraphicsTint=function(e){e._prevTint=e.tint,e.canvasTintDirty=e.dirty;for(var t=(e.tint>>16&255)/255,i=(e.tint>>8&255)/255,r=(255&e.tint)/255,n=0;n<e.graphicsData.length;++n){var o=e.graphicsData[n],s=0|o.fillColor,a=0|o.lineColor;o._fillTint=((s>>16&255)/255*t*255<<16)+((s>>8&255)/255*i*255<<8)+(255&s)/255*r*255,o._lineTint=((a>>16&255)/255*t*255<<16)+((a>>8&255)/255*i*255<<8)+(255&a)/255*r*255}},e.prototype.renderPolygon=function(e,t,i){i.moveTo(e[0],e[1]);for(var r=1;r<e.length/2;++r)i.lineTo(e[2*r],e[2*r+1]);t&&i.closePath()},e.prototype.destroy=function(){this.renderer=null},e}();Sd=kd,Od.default.registerPlugin("graphics",kd),Object.defineProperty(x,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return $d(Ed).default}});var Md,Cd,Pd={};i(Pd),e(Pd,"__esModule",(()=>Md),(e=>Md=e)),e(Pd,"default",(()=>Cd),(e=>Cd=e)),Md=!0;var Ad=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();function Id(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Rd=function(){function e(t,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;Id(this,e),this.baseTexture=t,this.textures={},this.animations={},this.data=i,this.resolution=this._updateResolution(r||this.baseTexture.imageUrl),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return Ad(e,null,[{key:"BATCH_SIZE",get:function(){return 1e3}}]),e.prototype._updateResolution=function(e){var t=this.data.meta.scale,i=li(e,null);return null===i&&(i=void 0!==t?parseFloat(t):1),1!==i&&(this.baseTexture.resolution=i,this.baseTexture.update()),i},e.prototype.parse=function(t){this._batchIndex=0,this._callback=t,this._frameKeys.length<=e.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},e.prototype._processFrames=function(t){for(var i=t,r=e.BATCH_SIZE,n=this.baseTexture.sourceScale;i-t<r&&i<this._frameKeys.length;){var o=this._frameKeys[i],s=this._frames[o],a=s.frame;if(a){var h=null,u=null,l=!1!==s.trimmed&&s.sourceSize?s.sourceSize:s.frame,c=new x.Rectangle(0,0,Math.floor(l.w*n)/this.resolution,Math.floor(l.h*n)/this.resolution);h=s.rotated?new x.Rectangle(Math.floor(a.x*n)/this.resolution,Math.floor(a.y*n)/this.resolution,Math.floor(a.h*n)/this.resolution,Math.floor(a.w*n)/this.resolution):new x.Rectangle(Math.floor(a.x*n)/this.resolution,Math.floor(a.y*n)/this.resolution,Math.floor(a.w*n)/this.resolution,Math.floor(a.h*n)/this.resolution),!1!==s.trimmed&&s.spriteSourceSize&&(u=new x.Rectangle(Math.floor(s.spriteSourceSize.x*n)/this.resolution,Math.floor(s.spriteSourceSize.y*n)/this.resolution,Math.floor(a.w*n)/this.resolution,Math.floor(a.h*n)/this.resolution)),this.textures[o]=new x.Texture(this.baseTexture,h,c,u,s.rotated?2:0,s.anchor),x.Texture.addToCache(this.textures[o],o)}i++}},e.prototype._processAnimations=function(){var e=this.data.animations||{};for(var t in e){this.animations[t]=[];var i=e[t],r=Array.isArray(i),n=0;for(i=r?i:i[Symbol.iterator]();;){var o;if(r){if(n>=i.length)break;o=i[n++]}else{if((n=i.next()).done)break;o=n.value}var s=o;this.animations[t].push(this.textures[s])}}},e.prototype._parseComplete=function(){var e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)},e.prototype._nextBatch=function(){var t=this;this._processFrames(this._batchIndex*e.BATCH_SIZE),this._batchIndex++,setTimeout((function(){t._batchIndex*e.BATCH_SIZE<t._frameKeys.length?t._nextBatch():(t._processAnimations(),t._parseComplete())}),0)},e.prototype.destroy=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(var t in this.textures)this.textures[t].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&this.baseTexture.destroy(),this.baseTexture=null},e}();Cd=Rd,Object.defineProperty(x,"Spritesheet",{enumerable:!0,get:function(){return $d(Pd).default}}),Object.defineProperty(x,"Texture",{enumerable:!0,get:function(){return $d(Dr).default}}),Object.defineProperty(x,"TextureMatrix",{enumerable:!0,get:function(){return $d(ch).default}}),Object.defineProperty(x,"BaseTexture",{enumerable:!0,get:function(){return $d(Br).default}}),Object.defineProperty(x,"RenderTexture",{enumerable:!0,get:function(){return $d(ts).default}}),Object.defineProperty(x,"BaseRenderTexture",{enumerable:!0,get:function(){return $d(ns).default}}),Object.defineProperty(x,"VideoBaseTexture",{enumerable:!0,get:function(){return $d(Kn).default}}),Object.defineProperty(x,"TextureUvs",{enumerable:!0,get:function(){return $d(ko).default}}),Object.defineProperty(x,"CanvasRenderTarget",{enumerable:!0,get:function(){return $d(Cs).default}}),Object.defineProperty(x,"Shader",{enumerable:!0,get:function(){return $d(Qh).default}}),Object.defineProperty(x,"WebGLManager",{enumerable:!0,get:function(){return $d(la).default}}),Object.defineProperty(x,"ObjectRenderer",{enumerable:!0,get:function(){return $d(aa).default}}),Object.defineProperty(x,"RenderTarget",{enumerable:!0,get:function(){return $d(Dh).default}}),Object.defineProperty(x,"Quad",{enumerable:!0,get:function(){return $d(Gh).default}}),Object.defineProperty(x,"SpriteMaskFilter",{enumerable:!0,get:function(){return $d(ka).default}}),Object.defineProperty(x,"Filter",{enumerable:!0,get:function(){return $d(Pa).default}});var Nd,Dd,Ld={};i(Ld),e(Ld,"__esModule",(()=>Nd),(e=>Nd=e)),e(Ld,"default",(()=>Dd),(e=>Dd=e)),Nd=!0;var jd,Fd=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();jd=function(e,t,i,r){var n=e&&e.forceCanvas;void 0!==r&&(n=r);return!n&&Bd.isWebGLSupported()?new Gd.default(e,t,i):new Ud.default(e,t,i)};var Bd=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(Ei),Ud=Wd(Yo),Gd=Wd(ba);function Wd(e){return e&&e.__esModule?e:{default:e}}var zd=Xd(Kt),Hd=Xd(ft);function Xd(e){return e&&e.__esModule?e:{default:e}}var Yd=function(){function e(t,i,r,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"number"==typeof t&&(t=Object.assign({width:t,height:i||Hd.default.RENDER_OPTIONS.height,forceCanvas:!!n,sharedTicker:!!o},r)),this._options=t=Object.assign({autoStart:!0,sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},t),this.renderer=jd(t),this.stage=new zd.default,this._ticker=null,this.ticker=t.sharedTicker?Qn:new Jn,t.autoStart&&this.start()}return e.prototype.render=function(){this.renderer.render(this.stage)},e.prototype.stop=function(){this._ticker.stop()},e.prototype.start=function(){this._ticker.start()},e.prototype.destroy=function(e,t){if(this._ticker){var i=this._ticker;this.ticker=null,i.destroy()}this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null,this._options=null},Fd(e,[{key:"ticker",set:function(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,B.LOW)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]),e}();Dd=Yd,Object.defineProperty(x,"Application",{enumerable:!0,get:function(){return $d(Ld).default}}),Object.defineProperty(x,"autoDetectRenderer",{enumerable:!0,get:function(){return jd}});var Vd=Qd(Ei),qd=Qd(to),Kd=$d(ft),Zd=$d(Yo),Jd=$d(ba);function Qd(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function $d(e){return e&&e.__esModule?e:{default:e}}x.settings=Kd.default,x.utils=Vd,x.ticker=qd,x.CanvasRenderer=Zd.default,x.WebGLRenderer=Jd.default,Object.keys(x).forEach((function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(s,e,{enumerable:!0,get:function(){return x[e]}})}));var ef,tf,rf={};i(rf),e(rf,"__esModule",(()=>ef),(e=>ef=e)),e(rf,"default",(()=>tf),(e=>tf=e)),ef=!0,tf=function(e){var t=e.mesh,i=e.particles,r=e.extras,n=e.filters,o=e.prepare,s=e.loaders,a=e.interaction;Object.defineProperties(e,{SpriteBatch:{get:function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")}},AssetLoader:{get:function(){throw new ReferenceError("The loader system was overhauled in PixiJS v3, please see the new PIXI.loaders.Loader class.")}},Stage:{get:function(){return of("You do not need to use a PIXI Stage any more, you can simply render any container."),e.Container}},DisplayObjectContainer:{get:function(){return of("DisplayObjectContainer has been shortened to Container, please use Container from now on."),e.Container}},Strip:{get:function(){return of("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),t.Mesh}},Rope:{get:function(){return of("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),t.Rope}},ParticleContainer:{get:function(){return of("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."),i.ParticleContainer}},MovieClip:{get:function(){return of("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."),r.AnimatedSprite}},TilingSprite:{get:function(){return of("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),r.TilingSprite}},BitmapText:{get:function(){return of("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),r.BitmapText}},blendModes:{get:function(){return of("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),e.BLEND_MODES}},scaleModes:{get:function(){return of("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),e.SCALE_MODES}},BaseTextureCache:{get:function(){return of("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),e.utils.BaseTextureCache}},TextureCache:{get:function(){return of("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),e.utils.TextureCache}},math:{get:function(){return of("The math namespace is deprecated, please access members already accessible on PIXI."),e}},AbstractFilter:{get:function(){return of("AstractFilter has been renamed to Filter, please use PIXI.Filter"),e.Filter}},TransformManual:{get:function(){return of("TransformManual has been renamed to TransformBase, please update your pixi-spine"),e.TransformBase}},TARGET_FPMS:{get:function(){return of("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),e.settings.TARGET_FPMS},set:function(t){of("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),e.settings.TARGET_FPMS=t}},FILTER_RESOLUTION:{get:function(){return of("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),e.settings.FILTER_RESOLUTION},set:function(t){of("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),e.settings.FILTER_RESOLUTION=t}},RESOLUTION:{get:function(){return of("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),e.settings.RESOLUTION},set:function(t){of("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),e.settings.RESOLUTION=t}},MIPMAP_TEXTURES:{get:function(){return of("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),e.settings.MIPMAP_TEXTURES},set:function(t){of("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),e.settings.MIPMAP_TEXTURES=t}},SPRITE_BATCH_SIZE:{get:function(){return of("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),e.settings.SPRITE_BATCH_SIZE},set:function(t){of("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),e.settings.SPRITE_BATCH_SIZE=t}},SPRITE_MAX_TEXTURES:{get:function(){return of("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),e.settings.SPRITE_MAX_TEXTURES},set:function(t){of("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),e.settings.SPRITE_MAX_TEXTURES=t}},RETINA_PREFIX:{get:function(){return of("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),e.settings.RETINA_PREFIX},set:function(t){of("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),e.settings.RETINA_PREFIX=t}},DEFAULT_RENDER_OPTIONS:{get:function(){return of("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"),e.settings.RENDER_OPTIONS}}});for(var h=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION_FRAGMENT"}],u=function(t){var i=h[t];Object.defineProperty(e[i.parent],"DEFAULT",{get:function(){return of("PIXI."+i.parent+".DEFAULT has been deprecated, please use PIXI.settings."+i.target),e.settings[i.target]},set:function(t){of("PIXI."+i.parent+".DEFAULT has been deprecated, please use PIXI.settings."+i.target),e.settings[i.target]=t}})},l=0;l<h.length;l++)u(l);Object.defineProperties(e.settings,{PRECISION:{get:function(){return of("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),e.settings.PRECISION_FRAGMENT},set:function(t){of("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),e.settings.PRECISION_FRAGMENT=t}}}),r.AnimatedSprite&&Object.defineProperties(r,{MovieClip:{get:function(){return of("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."),r.AnimatedSprite}}});r&&Object.defineProperties(r,{TextureTransform:{get:function(){return of("The TextureTransform class has been renamed to TextureMatrix, please use PIXI.TextureMatrix from now on."),e.TextureMatrix}}});e.DisplayObject.prototype.generateTexture=function(e,t,i){return of("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"),e.generateTexture(this,t,i)},e.Graphics.prototype.generateTexture=function(e,t){return of("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"),this.generateCanvasTexture(e,t)},e.GroupD8.isSwapWidthHeight=function(t){return of("GroupD8.isSwapWidthHeight was renamed to GroupD8.isVertical"),e.GroupD8.isVertical(t)},e.RenderTexture.prototype.render=function(e,t,i,r){this.legacyRenderer.render(e,this,i,t,!r),of("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")},e.RenderTexture.prototype.getImage=function(e){return of("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"),this.legacyRenderer.extract.image(e)},e.RenderTexture.prototype.getBase64=function(e){return of("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyRenderer.extract.base64(e)},e.RenderTexture.prototype.getCanvas=function(e){return of("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyRenderer.extract.canvas(e)},e.RenderTexture.prototype.getPixels=function(e){return of("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyRenderer.pixels(e)},e.Sprite.prototype.setTexture=function(e){this.texture=e,of("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},r.BitmapText&&(r.BitmapText.prototype.setText=function(e){this.text=e,of("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")});e.Text.prototype.setText=function(e){this.text=e,of("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},e.Text.calculateFontProperties=function(t){return of("Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont"),e.TextMetrics.measureFont(t)},Object.defineProperties(e.Text,{fontPropertiesCache:{get:function(){return of("Text.fontPropertiesCache is deprecated"),e.TextMetrics._fonts}},fontPropertiesCanvas:{get:function(){return of("Text.fontPropertiesCanvas is deprecated"),e.TextMetrics._canvas}},fontPropertiesContext:{get:function(){return of("Text.fontPropertiesContext is deprecated"),e.TextMetrics._context}}}),e.Text.prototype.setStyle=function(e){this.style=e,of("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},e.Text.prototype.determineFontProperties=function(t){return of("determineFontProperties is now deprecated, please use TextMetrics.measureFont method"),e.TextMetrics.measureFont(t)},e.Text.getFontStyle=function(t){return of("getFontStyle is now deprecated, please use TextStyle.toFontString() instead"),(t=t||{})instanceof e.TextStyle||(t=new e.TextStyle(t)),t.toFontString()},Object.defineProperties(e.TextStyle.prototype,{font:{get:function(){of("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");var e="number"==typeof this._fontSize?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+e+" "+this._fontFamily},set:function(e){of("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"),e.indexOf("italic")>1?this._fontStyle="italic":e.indexOf("oblique")>-1?this._fontStyle="oblique":this._fontStyle="normal",e.indexOf("small-caps")>-1?this._fontVariant="small-caps":this._fontVariant="normal";var t=e.split(" "),i=-1;this._fontSize=26;for(var r=0;r<t.length;++r)if(t[r].match(/(px|pt|em|%)/)){i=r,this._fontSize=t[r];break}this._fontWeight="normal";for(var n=0;n<i;++n)if(t[n].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=t[n];break}if(i>-1&&i<t.length-1){this._fontFamily="";for(var o=i+1;o<t.length;++o)this._fontFamily+=t[o]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),e.Texture.prototype.setFrame=function(e){this.frame=e,of("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")},e.Texture.addTextureToCache=function(t,i){e.Texture.addToCache(t,i),of("Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.")},e.Texture.removeTextureFromCache=function(t){return of("Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache"),e.BaseTexture.removeFromCache(t),e.Texture.removeFromCache(t)},Object.defineProperties(n,{AbstractFilter:{get:function(){return of("AstractFilter has been renamed to Filter, please use PIXI.Filter"),e.AbstractFilter}},SpriteMaskFilter:{get:function(){return of("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),e.SpriteMaskFilter}},VoidFilter:{get:function(){return of("VoidFilter has been renamed to AlphaFilter, please use PIXI.filters.AlphaFilter"),n.AlphaFilter}}}),e.utils.uuid=function(){return of("utils.uuid() is deprecated, please use utils.uid() from now on."),e.utils.uid()},e.utils.canUseNewCanvasBlendModes=function(){return of("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"),e.CanvasTinter.canUseMultiply};var c=!0;Object.defineProperty(e.utils,"_saidHello",{set:function(e){e&&(of("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello()),c=e},get:function(){return c}}),o.BasePrepare&&(o.BasePrepare.prototype.register=function(e,t){return of("renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook"),e&&this.registerFindHook(e),t&&this.registerUploadHook(t),this});o.canvas&&Object.defineProperty(o.canvas,"UPLOADS_PER_FRAME",{set:function(){of("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return of("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}});o.webgl&&Object.defineProperty(o.webgl,"UPLOADS_PER_FRAME",{set:function(){of("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return of("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}});if(s.Loader){var d=s.Resource,f=s.Loader;Object.defineProperties(d.prototype,{isJson:{get:function(){return of("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`."),this.type===d.TYPE.JSON}},isXml:{get:function(){return of("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`."),this.type===d.TYPE.XML}},isImage:{get:function(){return of("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`."),this.type===d.TYPE.IMAGE}},isAudio:{get:function(){return of("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`."),this.type===d.TYPE.AUDIO}},isVideo:{get:function(){return of("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`."),this.type===d.TYPE.VIDEO}}}),Object.defineProperties(f.prototype,{before:{get:function(){return of("The before() method is deprecated, please use pre()."),this.pre}},after:{get:function(){return of("The after() method is deprecated, please use use()."),this.use}}})}a.interactiveTarget&&Object.defineProperty(a.interactiveTarget,"defaultCursor",{set:function(e){of("Property defaultCursor has been replaced with 'cursor'. "),this.cursor=e},get:function(){return of("Property defaultCursor has been replaced with 'cursor'. "),this.cursor}});a.InteractionManager&&(Object.defineProperty(a.InteractionManager,"defaultCursorStyle",{set:function(e){of("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default=e},get:function(){return of("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default}}),Object.defineProperty(a.InteractionManager,"currentCursorStyle",{set:function(e){of("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode=e},get:function(){return of("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode}}))};var nf={};function of(e){if(!nf[e]){var t=(new Error).stack;void 0===t?console.warn("Deprecation Warning: ",e):(t=t.split("\n").splice(3).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cDeprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e),console.warn(t),console.groupEnd()):(console.warn("Deprecation Warning: ",e),console.warn(t))),nf[e]=!0}}var sf,af,hf=function(e){return e&&e.__esModule?e:{default:e}}(rf),uf={__esModule:!0},lf={};i(lf),e(lf,"__esModule",(()=>sf),(e=>sf=e)),e(lf,"default",(()=>af),(e=>af=e)),sf=!0,af={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1},Object.defineProperty(uf,"accessibleTarget",{enumerable:!0,get:function(){return bf(lf).default}});var cf,df,ff={};i(ff),e(ff,"__esModule",(()=>cf),(e=>cf=e)),e(ff,"default",(()=>df),(e=>df=e)),cf=!0;var pf=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(x),gf=yf(yt),mf=yf(lf);function yf(e){return e&&e.__esModule?e:{default:e}}pf.utils.mixins.delayMixin(pf.DisplayObject.prototype,mf.default);var vf=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!gf.default.tablet&&!gf.default.phone||navigator.isCocoonJS||this.createTouchHook();var i=document.createElement("div");i.style.width="100px",i.style.height="100px",i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.style.zIndex=2,this.div=i,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=t,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener("keydown",this._onKeyDown,!1)}return e.prototype.createTouchHook=function(){var e=this,t=document.createElement("button");t.style.width="1px",t.style.height="1px",t.style.position="absolute",t.style.top="-1000px",t.style.left="-1000px",t.style.zIndex=2,t.style.backgroundColor="#FF0000",t.title="HOOK DIV",t.addEventListener("focus",(function(){e.isMobileAccessabillity=!0,e.activate(),document.body.removeChild(t)})),document.body.appendChild(t)},e.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},e.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},e.prototype.updateAccessibleObjects=function(e){if(e.visible){e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);for(var t=e.children,i=0;i<t.length;i++)this.updateAccessibleObjects(t[i])}},e.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),t=e.width/this.renderer.width,i=e.height/this.renderer.height,r=this.div;r.style.left=e.left+"px",r.style.top=e.top+"px",r.style.width=this.renderer.width+"px",r.style.height=this.renderer.height+"px";for(var n=0;n<this.children.length;n++){var o=this.children[n];if(o.renderId!==this.renderId)o._accessibleActive=!1,pf.utils.removeItems(this.children,n,1),this.div.removeChild(o._accessibleDiv),this.pool.push(o._accessibleDiv),o._accessibleDiv=null,n--,0===this.children.length&&this.deactivate();else{r=o._accessibleDiv;var s=o.hitArea,a=o.worldTransform;o.hitArea?(r.style.left=(a.tx+s.x*a.a)*t+"px",r.style.top=(a.ty+s.y*a.d)*i+"px",r.style.width=s.width*a.a*t+"px",r.style.height=s.height*a.d*i+"px"):(s=o.getBounds(),this.capHitArea(s),r.style.left=s.x*t+"px",r.style.top=s.y*i+"px",r.style.width=s.width*t+"px",r.style.height=s.height*i+"px",r.title!==o.accessibleTitle&&null!==o.accessibleTitle&&(r.title=o.accessibleTitle),r.getAttribute("aria-label")!==o.accessibleHint&&null!==o.accessibleHint&&r.setAttribute("aria-label",o.accessibleHint))}}this.renderId++}},e.prototype.capHitArea=function(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0),e.x+e.width>this.renderer.width&&(e.width=this.renderer.width-e.x),e.y+e.height>this.renderer.height&&(e.height=this.renderer.height-e.y)},e.prototype.addChild=function(e){var t=this.pool.pop();t||((t=document.createElement("button")).style.width="100px",t.style.height="100px",t.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=2,t.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),e.accessibleTitle&&null!==e.accessibleTitle?t.title=e.accessibleTitle:e.accessibleHint&&null!==e.accessibleHint||(t.title="displayObject "+e.tabIndex),e.accessibleHint&&null!==e.accessibleHint&&t.setAttribute("aria-label",e.accessibleHint),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex},e.prototype._onClick=function(e){var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"click",t.eventData)},e.prototype._onFocus=function(e){e.target.getAttribute("aria-live","off")||e.target.setAttribute("aria-live","assertive");var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"mouseover",t.eventData)},e.prototype._onFocusOut=function(e){e.target.getAttribute("aria-live","off")||e.target.setAttribute("aria-live","polite");var t=this.renderer.plugins.interaction;t.dispatchEvent(e.target.displayObject,"mouseout",t.eventData)},e.prototype._onKeyDown=function(e){9===e.keyCode&&this.activate()},e.prototype._onMouseMove=function(e){0===e.movementX&&0===e.movementY||this.deactivate()},e.prototype.destroy=function(){this.div=null;for(var e=0;e<this.children.length;e++)this.children[e].div=null;window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},e}();function bf(e){return e&&e.__esModule?e:{default:e}}df=vf,pf.WebGLRenderer.registerPlugin("accessibility",vf),pf.CanvasRenderer.registerPlugin("accessibility",vf),Object.defineProperty(uf,"AccessibilityManager",{enumerable:!0,get:function(){return bf(ff).default}});var xf,wf,_f=lx(uf),Tf={__esModule:!0},Sf={};i(Sf),e(Sf,"__esModule",(()=>xf),(e=>xf=e)),e(Sf,"default",(()=>wf),(e=>wf=e)),xf=!0;var Ef=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(x);var Of=new Ef.Rectangle,kf=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.renderer=t,t.extract=this}return e.prototype.image=function(e){var t=new Image;return t.src=this.base64(e),t},e.prototype.base64=function(e){return this.canvas(e).toDataURL()},e.prototype.canvas=function(e){var t=this.renderer,i=void 0,r=void 0,n=void 0,o=!1,s=void 0,a=!1;e&&(e instanceof Ef.RenderTexture?s=e:(s=this.renderer.generateTexture(e),a=!0)),s?(r=(i=s.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID]).resolution,n=s.frame,o=!1):(r=(i=this.renderer.rootRenderTarget).resolution,o=!0,(n=Of).width=i.size.width,n.height=i.size.height);var h=Math.floor(n.width*r+1e-4),u=Math.floor(n.height*r+1e-4),l=new Ef.CanvasRenderTarget(h,u,1);if(i){t.bindRenderTarget(i);var c=new Uint8Array(4*h*u),d=t.gl;d.readPixels(n.x*r,n.y*r,h,u,d.RGBA,d.UNSIGNED_BYTE,c);var f=l.context.getImageData(0,0,h,u);f.data.set(c),l.context.putImageData(f,0,0),o&&(l.context.scale(1,-1),l.context.drawImage(l.canvas,0,-u))}return a&&s.destroy(!0),l.canvas},e.prototype.pixels=function(e){var t=this.renderer,i=void 0,r=void 0,n=void 0,o=void 0,s=!1;e&&(e instanceof Ef.RenderTexture?o=e:(o=this.renderer.generateTexture(e),s=!0)),o?(r=(i=o.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID]).resolution,n=o.frame):(r=(i=this.renderer.rootRenderTarget).resolution,(n=Of).width=i.size.width,n.height=i.size.height);var a=n.width*r,h=n.height*r,u=new Uint8Array(4*a*h);if(i){t.bindRenderTarget(i);var l=t.gl;l.readPixels(n.x*r,n.y*r,a,h,l.RGBA,l.UNSIGNED_BYTE,u)}return s&&o.destroy(!0),u},e.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},e}();wf=kf,Ef.WebGLRenderer.registerPlugin("extract",kf),Object.defineProperty(Tf,"webgl",{enumerable:!0,get:function(){return Nf(Sf).default}});var Mf,Cf,Pf={};i(Pf),e(Pf,"__esModule",(()=>Mf),(e=>Mf=e)),e(Pf,"default",(()=>Cf),(e=>Cf=e)),Mf=!0;var Af=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(x);var If=new Af.Rectangle,Rf=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.renderer=t,t.extract=this}return e.prototype.image=function(e){var t=new Image;return t.src=this.base64(e),t},e.prototype.base64=function(e){return this.canvas(e).toDataURL()},e.prototype.canvas=function(e){var t=this.renderer,i=void 0,r=void 0,n=void 0,o=void 0;e&&(o=e instanceof Af.RenderTexture?e:t.generateTexture(e)),o?(i=o.baseTexture._canvasRenderTarget.context,r=o.baseTexture._canvasRenderTarget.resolution,n=o.frame):(i=t.rootContext,r=t.resolution,(n=If).width=this.renderer.width,n.height=this.renderer.height);var s=Math.floor(n.width*r+1e-4),a=Math.floor(n.height*r+1e-4),h=new Af.CanvasRenderTarget(s,a,1),u=i.getImageData(n.x*r,n.y*r,s,a);return h.context.putImageData(u,0,0),h.canvas},e.prototype.pixels=function(e){var t=this.renderer,i=void 0,r=void 0,n=void 0,o=void 0;return e&&(o=e instanceof Af.RenderTexture?e:t.generateTexture(e)),o?(i=o.baseTexture._canvasRenderTarget.context,r=o.baseTexture._canvasRenderTarget.resolution,n=o.frame):(i=t.rootContext,(n=If).width=t.width,n.height=t.height),i.getImageData(0,0,n.width*r,n.height*r).data},e.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},e}();function Nf(e){return e&&e.__esModule?e:{default:e}}Cf=Rf,Af.CanvasRenderer.registerPlugin("extract",Rf),Object.defineProperty(Tf,"canvas",{enumerable:!0,get:function(){return Nf(Pf).default}});var Df=lx(Tf),Lf={__esModule:!0};Lf.BitmapText=Lf.TilingSpriteRenderer=Lf.TilingSprite=Lf.AnimatedSprite=void 0;var jf,Ff,Bf={};i(Bf),e(Bf,"__esModule",(()=>jf),(e=>jf=e)),e(Bf,"default",(()=>Ff),(e=>Ff=e)),jf=!0;var Uf=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),Gf=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(x);var Wf=function(e){function t(i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,i[0]instanceof Gf.Texture?i[0]:i[0].texture));return n._textures=null,n._durations=null,n.textures=i,n._autoUpdate=!1!==r,n.animationSpeed=1,n.loop=!0,n.updateAnchor=!1,n.onComplete=null,n.onFrameChange=null,n.onLoop=null,n._currentTime=0,n.playing=!1,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&Gf.ticker.shared.remove(this.update,this))},t.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&Gf.ticker.shared.add(this.update,this,Gf.UPDATE_PRIORITY.HIGH))},t.prototype.gotoAndStop=function(e){this.stop();var t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this.updateTexture()},t.prototype.gotoAndPlay=function(e){var t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this.updateTexture(),this.play()},t.prototype.update=function(e){var t=this.animationSpeed*e,i=this.currentFrame;if(null!==this._durations){var r=this._currentTime%1*this._durations[this.currentFrame];for(r+=t/60*1e3;r<0;)this._currentTime--,r+=this._durations[this.currentFrame];var n=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);r>=this._durations[this.currentFrame];)r-=this._durations[this.currentFrame]*n,this._currentTime+=n;this._currentTime+=r/this._durations[this.currentFrame]}else this._currentTime+=t;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i||this.animationSpeed<0&&this.currentFrame>i)&&this.onLoop(),this.updateTexture())},t.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.cachedTint=16777215,this.updateAnchor&&this._anchor.copy(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame)},t.prototype.destroy=function(t){this.stop(),e.prototype.destroy.call(this,t)},t.fromFrames=function(e){for(var i=[],r=0;r<e.length;++r)i.push(Gf.Texture.fromFrame(e[r]));return new t(i)},t.fromImages=function(e){for(var i=[],r=0;r<e.length;++r)i.push(Gf.Texture.fromImage(e[r]));return new t(i)},Uf(t,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(e){if(e[0]instanceof Gf.Texture)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(var t=0;t<e.length;t++)this._textures.push(e[t].texture),this._durations.push(e[t].time)}this.gotoAndStop(0),this.updateTexture()}},{key:"currentFrame",get:function(){var e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e}}]),t}(Gf.Sprite);Ff=Wf,Object.defineProperty(Lf,"AnimatedSprite",{enumerable:!0,get:function(){return Ep(Bf).default}});var zf,Hf,Xf={};i(Xf),e(Xf,"__esModule",(()=>zf),(e=>zf=e)),e(Xf,"default",(()=>Hf),(e=>Hf=e)),zf=!0;var Yf=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),Vf=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(x),qf=function(e){return e&&e.__esModule?e:{default:e}}(Ks);function Kf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zf(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Jf=new Vf.Point,Qf=function(e){function t(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;Kf(this,t);var o=Zf(this,e.call(this,i));return o.tileTransform=new Vf.TransformStatic,o._width=r,o._height=n,o._canvasPattern=null,o.uvTransform=i.transform||new Vf.TextureMatrix(i),o.pluginName="tilingSprite",o.uvRespectAnchor=!1,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture),this.cachedTint=16777215},t.prototype._renderWebGL=function(e){var t=this._texture;t&&t.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),e.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))},t.prototype._renderCanvas=function(e){var t=this._texture;if(t.baseTexture.hasLoaded){var i=e.context,r=this.worldTransform,n=e.resolution,o=2===t.rotate,s=t.baseTexture,a=s.resolution,h=this.tilePosition.x/this.tileScale.x%t.orig.width*a,u=this.tilePosition.y/this.tileScale.y%t.orig.height*a;if(this._textureID!==this._texture._updateID||this.cachedTint!==this.tint){this._textureID=this._texture._updateID;var l=new Vf.CanvasRenderTarget(t.orig.width,t.orig.height,a);if(16777215!==this.tint)this.tintedTexture=qf.default.getTintedTexture(this,this.tint),l.context.drawImage(this.tintedTexture,0,0);else{var c=t._frame.x*a,d=t._frame.y*a,f=t._frame.width*a,p=t._frame.height*a,g=(t.trim?t.trim.width:t.orig.width)*a,m=(t.trim?t.trim.height:t.orig.height)*a,y=(t.trim?t.trim.x:0)*a,v=(t.trim?t.trim.y:0)*a;o?(l.context.rotate(-Math.PI/2),l.context.translate(-m,0),l.context.drawImage(s.source,c,d,f,p,-v,y,m,g)):l.context.drawImage(s.source,c,d,f,p,y,v,g,m)}this.cachedTint=this.tint,this._canvasPattern=l.context.createPattern(l.canvas,"repeat")}i.globalAlpha=this.worldAlpha,i.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n,r.ty*n),e.setBlendMode(this.blendMode),i.fillStyle=this._canvasPattern,i.scale(this.tileScale.x/a,this.tileScale.y/a);var b=this.anchor.x*-this._width*a,x=this.anchor.y*-this._height*a;this.uvRespectAnchor?(i.translate(h,u),i.fillRect(-h+b,-u+x,this._width/this.tileScale.x*a,this._height/this.tileScale.y*a)):(i.translate(h+b,u+x),i.fillRect(-h,-u,this._width/this.tileScale.x*a,this._height/this.tileScale.y*a))}},t.prototype._calculateBounds=function(){var e=this._width*-this._anchor._x,t=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),r=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,t,i,r)},t.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Vf.Rectangle),t=this._localBoundsRect),this._bounds.getRectangle(t)):e.prototype.getLocalBounds.call(this,t)},t.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,Jf);var t=this._width,i=this._height,r=-t*this.anchor._x;if(Jf.x>=r&&Jf.x<r+t){var n=-i*this.anchor._y;if(Jf.y>=n&&Jf.y<n+i)return!0}return!1},t.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this.tileTransform=null,this.uvTransform=null},t.from=function(e,i,r){return new t(Vf.Texture.from(e),i,r)},t.fromFrame=function(e,i,r){var n=Vf.utils.TextureCache[e];if(!n)throw new Error('The frameId "'+e+'" does not exist in the texture cache '+this);return new t(n,i,r)},t.fromImage=function(e,i,r,n,o){return new t(Vf.Texture.fromImage(e,n,o),i,r)},Yf(t,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(e){this.uvTransform.clampMargin=e,this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(e){this.tileTransform.scale.copy(e)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(e){this.tileTransform.position.copy(e)}},{key:"width",get:function(){return this._width},set:function(e){this._width=e}},{key:"height",get:function(){return this._height},set:function(e){this._height=e}}]),t}(Vf.Sprite);Hf=Qf,Object.defineProperty(Lf,"TilingSprite",{enumerable:!0,get:function(){return Ep(Xf).default}});var $f,ep,tp={};i(tp),e(tp,"__esModule",(()=>$f),(e=>$f=e)),e(tp,"default",(()=>ep),(e=>ep=e)),$f=!0;var ip=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(x);var rp=new ip.Matrix,np=function(e){function t(i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,i));return r.shader=null,r.simpleShader=null,r.quad=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.onContextChange=function(){var e=this.renderer.gl;this.shader=new ip.Shader(e,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    gl_FragColor = sample * uColor;\n}\n"),this.simpleShader=new ip.Shader(e,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n"),this.renderer.bindVao(null),this.quad=new ip.Quad(e,this.renderer.state.attribState),this.quad.initVao(this.shader)},t.prototype.render=function(e){var t=this.renderer,i=this.quad;t.bindVao(i.vao);var r=i.vertices;r[0]=r[6]=e._width*-e.anchor.x,r[1]=r[3]=e._height*-e.anchor.y,r[2]=r[4]=e._width*(1-e.anchor.x),r[5]=r[7]=e._height*(1-e.anchor.y),e.uvRespectAnchor&&((r=i.uvs)[0]=r[6]=-e.anchor.x,r[1]=r[3]=-e.anchor.y,r[2]=r[4]=1-e.anchor.x,r[5]=r[7]=1-e.anchor.y),i.upload();var n=e._texture,o=n.baseTexture,s=e.tileTransform.localTransform,a=e.uvTransform,h=o.isPowerOfTwo&&n.frame.width===o.width&&n.frame.height===o.height;h&&(o._glTextures[t.CONTEXT_UID]?h=o.wrapMode!==P.CLAMP:o.wrapMode===P.CLAMP&&(o.wrapMode=P.REPEAT));var u=h?this.simpleShader:this.shader;t.bindShader(u);var l=n.width,c=n.height,d=e._width,f=e._height;rp.set(s.a*l/d,s.b*l/f,s.c*c/d,s.d*c/f,s.tx/d,s.ty/f),rp.invert(),h?rp.prepend(a.mapCoord):(u.uniforms.uMapCoord=a.mapCoord.toArray(!0),u.uniforms.uClampFrame=a.uClampFrame,u.uniforms.uClampOffset=a.uClampOffset),u.uniforms.uTransform=rp.toArray(!0),u.uniforms.uColor=ip.utils.premultiplyTintToRgba(e.tint,e.worldAlpha,u.uniforms.uColor,o.premultipliedAlpha),u.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),u.uniforms.uSampler=t.bindTexture(n),t.setBlendMode(ip.utils.correctBlendMode(e.blendMode,o.premultipliedAlpha)),i.vao.draw(this.renderer.gl.TRIANGLES,6,0)},t}(ip.ObjectRenderer);ep=np,ip.WebGLRenderer.registerPlugin("tilingSprite",np),Object.defineProperty(Lf,"TilingSpriteRenderer",{enumerable:!0,get:function(){return Ep(tp).default}});var op,sp,ap={};i(ap),e(ap,"__esModule",(()=>op),(e=>op=e)),e(ap,"default",(()=>sp),(e=>sp=e)),op=!0;var hp=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),up=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(x),lp=dp(K),cp=dp(ft);function dp(e){return e&&e.__esModule?e:{default:e}}function fp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pp(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var gp=function(e){function t(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};fp(this,t);var n=pp(this,e.call(this));return n._textWidth=0,n._textHeight=0,n._glyphs=[],n._font={tint:void 0!==r.tint?r.tint:16777215,align:r.align||"left",name:null,size:0},n.font=r.font,n._text=i,n._maxWidth=0,n._maxLineHeight=0,n._letterSpacing=0,n._anchor=new lp.default((function(){n.dirty=!0}),n,0,0),n.dirty=!1,n.updateText(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.updateText=function(){for(var e=t.fonts[this._font.name],i=this._font.size/e.size,r=new up.Point,n=[],o=[],s=this.text.replace(/(?:\r\n|\r)/g,"\n"),a=s.length,h=this._maxWidth*e.size/this._font.size,u=null,l=0,c=0,d=0,f=-1,p=0,g=0,m=0,y=0;y<a;y++){var v=s.charCodeAt(y),b=s.charAt(y);if(/(?:\s)/.test(b)&&(f=y,p=l),"\r"!==b&&"\n"!==b){var x=e.chars[v];x&&(u&&x.kerning[u]&&(r.x+=x.kerning[u]),n.push({texture:x.texture,line:d,charCode:v,position:new up.Point(r.x+x.xOffset+this._letterSpacing/2,r.y+x.yOffset)}),r.x+=x.xAdvance+this._letterSpacing,l=r.x,m=Math.max(m,x.yOffset+x.texture.height),u=v,-1!==f&&h>0&&r.x>h&&(++g,up.utils.removeItems(n,1+f-g,1+y-f),y=f,f=-1,o.push(p),c=Math.max(c,p),d++,r.x=0,r.y+=e.lineHeight,u=null))}else o.push(l),c=Math.max(c,l),++d,++g,r.x=0,r.y+=e.lineHeight,u=null}var w=s.charAt(s.length-1);"\r"!==w&&"\n"!==w&&(/(?:\s)/.test(w)&&(l=p),o.push(l),c=Math.max(c,l));for(var _=[],T=0;T<=d;T++){var S=0;"right"===this._font.align?S=c-o[T]:"center"===this._font.align&&(S=(c-o[T])/2),_.push(S)}for(var E=n.length,O=this.tint,k=0;k<E;k++){var M=this._glyphs[k];M?M.texture=n[k].texture:(M=new up.Sprite(n[k].texture),this._glyphs.push(M)),M.position.x=(n[k].position.x+_[n[k].line])*i,M.position.y=n[k].position.y*i,M.scale.x=M.scale.y=i,M.tint=O,M.parent||this.addChild(M)}for(var C=E;C<this._glyphs.length;++C)this.removeChild(this._glyphs[C]);if(this._textWidth=c*i,this._textHeight=(r.y+e.lineHeight)*i,0!==this.anchor.x||0!==this.anchor.y)for(var P=0;P<E;P++)this._glyphs[P].x-=this._textWidth*this.anchor.x,this._glyphs[P].y-=this._textHeight*this.anchor.y;this._maxLineHeight=m*i},t.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},t.prototype.getLocalBounds=function(){return this.validate(),e.prototype.getLocalBounds.call(this)},t.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},t.registerFont=function(e,i){var r={},n=e.getElementsByTagName("info")[0],o=e.getElementsByTagName("common")[0],s=e.getElementsByTagName("page"),a=li(s[0].getAttribute("file"),cp.default.RESOLUTION),h={};r.font=n.getAttribute("face"),r.size=parseInt(n.getAttribute("size"),10),r.lineHeight=parseInt(o.getAttribute("lineHeight"),10)/a,r.chars={},i instanceof up.Texture&&(i=[i]);for(var u=0;u<s.length;u++){var l=s[u].getAttribute("id"),c=s[u].getAttribute("file");h[l]=i instanceof Array?i[u]:i[c]}for(var d=e.getElementsByTagName("char"),f=0;f<d.length;f++){var p=d[f],g=parseInt(p.getAttribute("id"),10),m=p.getAttribute("page")||0,y=new up.Rectangle(parseInt(p.getAttribute("x"),10)/a+h[m].frame.x/a,parseInt(p.getAttribute("y"),10)/a+h[m].frame.y/a,parseInt(p.getAttribute("width"),10)/a,parseInt(p.getAttribute("height"),10)/a);r.chars[g]={xOffset:parseInt(p.getAttribute("xoffset"),10)/a,yOffset:parseInt(p.getAttribute("yoffset"),10)/a,xAdvance:parseInt(p.getAttribute("xadvance"),10)/a,kerning:{},texture:new up.Texture(h[m].baseTexture,y),page:m}}for(var v=e.getElementsByTagName("kerning"),b=0;b<v.length;b++){var x=v[b],w=parseInt(x.getAttribute("first"),10)/a,_=parseInt(x.getAttribute("second"),10)/a,T=parseInt(x.getAttribute("amount"),10)/a;r.chars[_]&&(r.chars[_].kerning[w]=T)}return t.fonts[r.font]=r,r},hp(t,[{key:"tint",get:function(){return this._font.tint},set:function(e){this._font.tint="number"==typeof e&&e>=0?e:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(e){this._font.align=e||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(e){"number"==typeof e?this._anchor.set(e):this._anchor.copy(e)}},{key:"font",get:function(){return this._font},set:function(e){e&&("string"==typeof e?(e=e.split(" "),this._font.name=1===e.length?e[0]:e.slice(1).join(" "),this._font.size=e.length>=2?parseInt(e[0],10):t.fonts[this._font.name].size):(this._font.name=e.name,this._font.size="number"==typeof e.size?e.size:parseInt(e.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(e){e=e.toString()||" ",this._text!==e&&(this._text=e,this.dirty=!0)}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}},{key:"maxLineHeight",get:function(){return this.validate(),this._maxLineHeight}},{key:"textWidth",get:function(){return this.validate(),this._textWidth}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}},{key:"textHeight",get:function(){return this.validate(),this._textHeight}}]),t}(up.Container);sp=gp,gp.fonts={},Object.defineProperty(Lf,"BitmapText",{enumerable:!0,get:function(){return Ep(ap).default}});var mp=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(x),yp=bp(Dr),vp=bp(Br);function bp(e){return e&&e.__esModule?e:{default:e}}var xp=mp.DisplayObject,wp=new mp.Matrix;xp.prototype._cacheAsBitmap=!1,xp.prototype._cacheData=!1;var _p=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.textureCacheId=null,this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(xp.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(e){if(this._cacheAsBitmap!==e){this._cacheAsBitmap=e;var t=void 0;e?(this._cacheData||(this._cacheData=new _p),(t=this._cacheData).originalRenderWebGL=this.renderWebGL,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((t=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=t.originalRenderWebGL,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}}}),xp.prototype._renderCachedWebGL=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(e))},xp.prototype._initCachedDisplayObject=function(e){if(!this._cacheData||!this._cacheData.sprite){var t=this.alpha;this.alpha=1,e.currentRenderer.flush();var i=this.getLocalBounds().clone();if(this._filters&&this._filters.length){var r=this._filters[0].padding;i.pad(r)}i.ceil(mp.settings.RESOLUTION);var n=e._activeRenderTarget,o=e.filterManager.filterStack,s=mp.RenderTexture.create(i.width,i.height),a="cacheAsBitmap_"+si();this._cacheData.textureCacheId=a,vp.default.addToCache(s.baseTexture,a),yp.default.addToCache(s,a);var h=wp;h.tx=-i.x,h.ty=-i.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,e.render(this,s,!0,h,!0),e.bindRenderTarget(n),e.filterManager.filterStack=o,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var u=new mp.Sprite(s);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-i.x/i.width,u.anchor.y=-i.y/i.height,u.alpha=t,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)}},xp.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))},xp.prototype._initCachedDisplayObjectCanvas=function(e){if(!this._cacheData||!this._cacheData.sprite){var t=this.getLocalBounds(),i=this.alpha;this.alpha=1;var r=e.context;t.ceil(mp.settings.RESOLUTION);var n=mp.RenderTexture.create(t.width,t.height),o="cacheAsBitmap_"+si();this._cacheData.textureCacheId=o,vp.default.addToCache(n.baseTexture,o),yp.default.addToCache(n,o);var s=wp;this.transform.localTransform.copy(s),s.invert(),s.tx-=t.x,s.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,n,!0,s,!1),e.context=r,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var a=new mp.Sprite(n);a.transform.worldTransform=this.transform.worldTransform,a.anchor.x=-t.x/t.width,a.anchor.y=-t.y/t.height,a.alpha=i,a._bounds=this._bounds,this._cacheData.sprite=a,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=a.containsPoint.bind(a)}},xp.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._lastBoundsID=this._boundsID},xp.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},xp.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,vp.default.removeFromCache(this._cacheData.textureCacheId),yp.default.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},xp.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)};var Tp=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(x);Tp.DisplayObject.prototype.name=null,Tp.Container.prototype.getChildByName=function(e){for(var t=0;t<this.children.length;t++)if(this.children[t].name===e)return this.children[t];return null};var Sp=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(x);function Ep(e){return e&&e.__esModule?e:{default:e}}Sp.DisplayObject.prototype.getGlobalPosition=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Sp.Point,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toGlobal(this.position,e,t):(e.x=this.position.x,e.y=this.position.y),e};var Op,kp,Mp=lx(Lf),Cp={__esModule:!0},Pp={};i(Pp),e(Pp,"__esModule",(()=>Op),(e=>Op=e)),e(Pp,"default",(()=>kp),(e=>kp=e)),Op=!0;var Ap=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(x);var Ip=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n'))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(Ap.Filter);kp=Ip,Object.defineProperty(Cp,"FXAAFilter",{enumerable:!0,get:function(){return qg(Pp).default}});var Rp,Np,Dp={};i(Dp),e(Dp,"__esModule",(()=>Rp),(e=>Rp=e)),e(Dp,"default",(()=>Np),(e=>Np=e)),Rp=!0;var Lp=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),jp=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(x);function Fp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bp(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Up=function(e){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random();Fp(this,t);var n=Bp(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n"));return n.noise=i,n.seed=r,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Lp(t,[{key:"noise",get:function(){return this.uniforms.uNoise},set:function(e){this.uniforms.uNoise=e}},{key:"seed",get:function(){return this.uniforms.uSeed},set:function(e){this.uniforms.uSeed=e}}]),t}(jp.Filter);Np=Up,Object.defineProperty(Cp,"NoiseFilter",{enumerable:!0,get:function(){return qg(Dp).default}});var Gp,Wp,zp={};i(zp),e(zp,"__esModule",(()=>Gp),(e=>Gp=e)),e(zp,"default",(()=>Wp),(e=>Wp=e)),Gp=!0;var Hp=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),Xp=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(x);var Yp=function(e){function t(i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=new Xp.Matrix;i.renderable=!1;var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy *= scale / filterArea.xy;\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"));return o.maskSprite=i,o.maskMatrix=n,o.uniforms.mapSampler=i._texture,o.uniforms.filterMatrix=n,o.uniforms.scale={x:1,y:1},null==r&&(r=20),o.scale=new Xp.Point(r,r),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.apply=function(e,t,i){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y,e.applyFilter(this,t,i)},Hp(t,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(e){this.uniforms.mapSampler=e}}]),t}(Xp.Filter);Wp=Yp,Object.defineProperty(Cp,"DisplacementFilter",{enumerable:!0,get:function(){return qg(zp).default}});var Vp,qp,Kp={};i(Kp),e(Kp,"__esModule",(()=>Vp),(e=>Vp=e)),e(Kp,"default",(()=>qp),(e=>qp=e)),Vp=!0;var Zp,Jp,Qp=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),$p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(x),eg={};i(eg),e(eg,"__esModule",(()=>Zp),(e=>Zp=e)),e(eg,"default",(()=>Jp),(e=>Jp=e)),Zp=!0;var tg,ig,rg=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),ng=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(x),og={};i(og),e(og,"__esModule",(()=>tg),(e=>tg=e)),e(og,"default",(()=>ig),(e=>ig=e)),tg=!0,ig=function(e,t){var i=Math.ceil(e/2),r=sg,n="",o=void 0;o=t?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var s=0;s<e;s++){var a=o.replace("%index%",s);a=a.replace("%sampleIndex%",s-(i-1)+".0"),n+=a,n+="\n"}return r=(r=r.replace("%blur%",n)).replace("%size%",e)};var sg=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n");var ag,hg,ug=vg(og),lg={};i(lg),e(lg,"__esModule",(()=>ag),(e=>ag=e)),e(lg,"default",(()=>hg),(e=>hg=e)),ag=!0,hg=function(e){for(var t=cg[e],i=t.length,r=dg,n="",o=void 0,s=0;s<e;s++){var a="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",s);o=s,s>=i&&(o=e-s-1),a=a.replace("%value%",t[o]),n+=a,n+="\n"}return r=(r=r.replace("%blur%",n)).replace("%size%",e)};var cg={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},dg=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");var fg,pg,gg=vg(lg),mg={};i(mg),e(mg,"__esModule",(()=>fg),(e=>fg=e)),e(mg,"default",(()=>pg),(e=>pg=e)),fg=!0,pg=function(e){var t=e.getParameter(e.MAX_VARYING_VECTORS),i=15;for(;i>t;)i-=2;return i};var yg=vg(mg);function vg(e){return e&&e.__esModule?e:{default:e}}var bg=function(e){function t(i,r,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=o||5;var s=(0,ug.default)(o,!0),a=(0,gg.default)(o),h=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,s,a));return h.resolution=n||ng.settings.RESOLUTION,h._quality=0,h.quality=r||4,h.strength=i||8,h.firstRun=!0,h}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.apply=function(e,t,i,r){if(this.firstRun){var n=e.renderer.gl,o=(0,yg.default)(n);this.vertexSrc=(0,ug.default)(o,!0),this.fragmentSrc=(0,gg.default)(o),this.firstRun=!1}if(this.uniforms.strength=1/i.size.width*(i.size.width/t.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)e.applyFilter(this,t,i,r);else{for(var s=e.getRenderTarget(!0),a=t,h=s,u=0;u<this.passes-1;u++){e.applyFilter(this,a,h,!0);var l=h;h=a,a=l}e.applyFilter(this,a,i,r),e.returnRenderTarget(s)}},rg(t,[{key:"blur",get:function(){return this.strength},set:function(e){this.padding=2*Math.abs(e),this.strength=e}},{key:"quality",get:function(){return this._quality},set:function(e){this._quality=e,this.passes=e}}]),t}(ng.Filter);Jp=bg;var xg,wg,_g=Ig(eg),Tg={};i(Tg),e(Tg,"__esModule",(()=>xg),(e=>xg=e)),e(Tg,"default",(()=>wg),(e=>wg=e)),xg=!0;var Sg=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),Eg=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(x),Og=Cg(og),kg=Cg(lg),Mg=Cg(mg);function Cg(e){return e&&e.__esModule?e:{default:e}}var Pg=function(e){function t(i,r,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=o||5;var s=(0,Og.default)(o,!1),a=(0,kg.default)(o),h=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,s,a));return h.resolution=n||Eg.settings.RESOLUTION,h._quality=0,h.quality=r||4,h.strength=i||8,h.firstRun=!0,h}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.apply=function(e,t,i,r){if(this.firstRun){var n=e.renderer.gl,o=(0,Mg.default)(n);this.vertexSrc=(0,Og.default)(o,!1),this.fragmentSrc=(0,kg.default)(o),this.firstRun=!1}if(this.uniforms.strength=1/i.size.height*(i.size.height/t.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)e.applyFilter(this,t,i,r);else{for(var s=e.getRenderTarget(!0),a=t,h=s,u=0;u<this.passes-1;u++){e.applyFilter(this,a,h,!0);var l=h;h=a,a=l}e.applyFilter(this,a,i,r),e.returnRenderTarget(s)}},Sg(t,[{key:"blur",get:function(){return this.strength},set:function(e){this.padding=2*Math.abs(e),this.strength=e}},{key:"quality",get:function(){return this._quality},set:function(e){this._quality=e,this.passes=e}}]),t}(Eg.Filter);wg=Pg;var Ag=Ig(Tg);function Ig(e){return e&&e.__esModule?e:{default:e}}var Rg=function(e){function t(i,r,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return s.blurXFilter=new _g.default(i,r,n,o),s.blurYFilter=new Ag.default(i,r,n,o),s.padding=0,s.resolution=n||$p.settings.RESOLUTION,s.quality=r||4,s.blur=i||8,s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.apply=function(e,t,i){var r=e.getRenderTarget(!0);this.blurXFilter.apply(e,t,r,!0),this.blurYFilter.apply(e,r,i,!1),e.returnRenderTarget(r)},Qp(t,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(e){this.blurXFilter.quality=this.blurYFilter.quality=e}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(e){this.blurYFilter.blur=e,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blendMode",get:function(){return this.blurYFilter._blendMode},set:function(e){this.blurYFilter._blendMode=e}}]),t}($p.Filter);qp=Rg,Object.defineProperty(Cp,"BlurFilter",{enumerable:!0,get:function(){return qg(Kp).default}}),Object.defineProperty(Cp,"BlurXFilter",{enumerable:!0,get:function(){return qg(eg).default}}),Object.defineProperty(Cp,"BlurYFilter",{enumerable:!0,get:function(){return qg(Tg).default}});var Ng,Dg,Lg={};i(Lg),e(Lg,"__esModule",(()=>Ng),(e=>Ng=e)),e(Lg,"default",(()=>Dg),(e=>Dg=e)),Ng=!0;var jg=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),Fg=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(x);var Bg=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n"));return i.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],i.alpha=1,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._loadMatrix=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e;t&&(this._multiply(i,this.uniforms.m,e),i=this._colorMatrix(i)),this.uniforms.m=i},t.prototype._multiply=function(e,t,i){return e[0]=t[0]*i[0]+t[1]*i[5]+t[2]*i[10]+t[3]*i[15],e[1]=t[0]*i[1]+t[1]*i[6]+t[2]*i[11]+t[3]*i[16],e[2]=t[0]*i[2]+t[1]*i[7]+t[2]*i[12]+t[3]*i[17],e[3]=t[0]*i[3]+t[1]*i[8]+t[2]*i[13]+t[3]*i[18],e[4]=t[0]*i[4]+t[1]*i[9]+t[2]*i[14]+t[3]*i[19]+t[4],e[5]=t[5]*i[0]+t[6]*i[5]+t[7]*i[10]+t[8]*i[15],e[6]=t[5]*i[1]+t[6]*i[6]+t[7]*i[11]+t[8]*i[16],e[7]=t[5]*i[2]+t[6]*i[7]+t[7]*i[12]+t[8]*i[17],e[8]=t[5]*i[3]+t[6]*i[8]+t[7]*i[13]+t[8]*i[18],e[9]=t[5]*i[4]+t[6]*i[9]+t[7]*i[14]+t[8]*i[19]+t[9],e[10]=t[10]*i[0]+t[11]*i[5]+t[12]*i[10]+t[13]*i[15],e[11]=t[10]*i[1]+t[11]*i[6]+t[12]*i[11]+t[13]*i[16],e[12]=t[10]*i[2]+t[11]*i[7]+t[12]*i[12]+t[13]*i[17],e[13]=t[10]*i[3]+t[11]*i[8]+t[12]*i[13]+t[13]*i[18],e[14]=t[10]*i[4]+t[11]*i[9]+t[12]*i[14]+t[13]*i[19]+t[14],e[15]=t[15]*i[0]+t[16]*i[5]+t[17]*i[10]+t[18]*i[15],e[16]=t[15]*i[1]+t[16]*i[6]+t[17]*i[11]+t[18]*i[16],e[17]=t[15]*i[2]+t[16]*i[7]+t[17]*i[12]+t[18]*i[17],e[18]=t[15]*i[3]+t[16]*i[8]+t[17]*i[13]+t[18]*i[18],e[19]=t[15]*i[4]+t[16]*i[9]+t[17]*i[14]+t[18]*i[19]+t[19],e},t.prototype._colorMatrix=function(e){var t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t},t.prototype.brightness=function(e,t){var i=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(i,t)},t.prototype.greyscale=function(e,t){var i=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(i,t)},t.prototype.blackAndWhite=function(e){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],e)},t.prototype.hue=function(e,t){e=(e||0)/180*Math.PI;var i=Math.cos(e),r=Math.sin(e),n=1/3,o=(0,Math.sqrt)(n),s=[i+(1-i)*n,n*(1-i)-o*r,n*(1-i)+o*r,0,0,n*(1-i)+o*r,i+n*(1-i),n*(1-i)-o*r,0,0,n*(1-i)-o*r,n*(1-i)+o*r,i+n*(1-i),0,0,0,0,0,1,0];this._loadMatrix(s,t)},t.prototype.contrast=function(e,t){var i=(e||0)+1,r=-.5*(i-1),n=[i,0,0,0,r,0,i,0,0,r,0,0,i,0,r,0,0,0,1,0];this._loadMatrix(n,t)},t.prototype.saturate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1],i=2*e/3+1,r=-.5*(i-1),n=[i,r,r,0,0,r,i,r,0,0,r,r,i,0,0,0,0,0,1,0];this._loadMatrix(n,t)},t.prototype.desaturate=function(){this.saturate(-1)},t.prototype.negative=function(e){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],e)},t.prototype.sepia=function(e){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],e)},t.prototype.technicolor=function(e){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],e)},t.prototype.polaroid=function(e){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],e)},t.prototype.toBGR=function(e){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],e)},t.prototype.kodachrome=function(e){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],e)},t.prototype.browni=function(e){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],e)},t.prototype.vintage=function(e){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],e)},t.prototype.colorTone=function(e,t,i,r,n){var o=((i=i||16770432)>>16&255)/255,s=(i>>8&255)/255,a=(255&i)/255,h=((r=r||3375104)>>16&255)/255,u=(r>>8&255)/255,l=(255&r)/255,c=[.3,.59,.11,0,0,o,s,a,e=e||.2,0,h,u,l,t=t||.15,0,o-h,s-u,a-l,0,0];this._loadMatrix(c,n)},t.prototype.night=function(e,t){var i=[-2*(e=e||.1),-e,0,0,0,-e,0,e,0,0,0,e,2*e,0,0,0,0,0,1,0];this._loadMatrix(i,t)},t.prototype.predator=function(e,t){var i=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(i,t)},t.prototype.lsd=function(e){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],e)},t.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},jg(t,[{key:"matrix",get:function(){return this.uniforms.m},set:function(e){this.uniforms.m=e}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e}}]),t}(Fg.Filter);Dg=Bg,Bg.prototype.grayscale=Bg.prototype.greyscale,Object.defineProperty(Cp,"ColorMatrixFilter",{enumerable:!0,get:function(){return qg(Lg).default}});var Ug,Gg,Wg={};i(Wg),e(Wg,"__esModule",(()=>Ug),(e=>Ug=e)),e(Wg,"default",(()=>Gg),(e=>Gg=e)),Ug=!0;var zg=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),Hg=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(x);function Xg(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yg(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var Vg=function(e){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;Xg(this,t);var r=Yg(this,e.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n"));return r.alpha=i,r.glShaderKey="alpha",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),zg(t,[{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e}}]),t}(Hg.Filter);function qg(e){return e&&e.__esModule?e:{default:e}}Gg=Vg,Object.defineProperty(Cp,"AlphaFilter",{enumerable:!0,get:function(){return qg(Wg).default}});var Kg,Zg,Jg=lx(Cp),Qg={__esModule:!0},$g={};i($g),e($g,"__esModule",(()=>Kg),(e=>Kg=e)),e($g,"default",(()=>Zg),(e=>Zg=e)),Kg=!0;var em=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),tm=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(x);var im=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.global=new tm.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return e.prototype.getLocalPosition=function(e,t,i){return e.worldTransform.applyInverse(i||this.global,t)},e.prototype.copyEvent=function(e){e.isPrimary&&(this.isPrimary=!0),this.button=e.button,this.buttons=Number.isInteger(e.buttons)?e.buttons:e.which,this.width=e.width,this.height=e.height,this.tiltX=e.tiltX,this.tiltY=e.tiltY,this.pointerType=e.pointerType,this.pressure=e.pressure,this.rotationAngle=e.rotationAngle,this.twist=e.twist||0,this.tangentialPressure=e.tangentialPressure||0},e.prototype.reset=function(){this.isPrimary=!1},em(e,[{key:"pointerId",get:function(){return this.identifier}}]),e}();Zg=im,Object.defineProperty(Qg,"InteractionData",{enumerable:!0,get:function(){return Mm($g).default}});var rm,nm,om={};i(om),e(om,"__esModule",(()=>rm),(e=>rm=e)),e(om,"default",(()=>nm),(e=>nm=e)),rm=!0;var sm,am,hm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},um=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(x),lm=Em($g),cm={};i(cm),e(cm,"__esModule",(()=>sm),(e=>sm=e)),e(cm,"default",(()=>am),(e=>am=e)),sm=!0;var dm=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return e.prototype.stopPropagation=function(){this.stopped=!0},e.prototype.reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},e}();am=dm;var fm,pm,gm=Em(cm),mm={};i(mm),e(mm,"__esModule",(()=>fm),(e=>fm=e)),e(mm,"default",(()=>pm),(e=>pm=e)),fm=!0;var ym=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();var vm=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._pointerId=t,this._flags=e.FLAGS.NONE}return e.prototype._doSet=function(e,t){this._flags=t?this._flags|e:this._flags&~e},ym(e,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(e){this._flags=e}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return 0!=(this._flags&this.constructor.FLAGS.OVER)},set:function(e){this._doSet(this.constructor.FLAGS.OVER,e)}},{key:"rightDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},set:function(e){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,e)}},{key:"leftDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.LEFT_DOWN)},set:function(e){this._doSet(this.constructor.FLAGS.LEFT_DOWN,e)}}]),e}();pm=vm,vm.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4});var bm,xm,wm=Em(mm),_m=Em(rt),Tm={};i(Tm),e(Tm,"__esModule",(()=>bm),(e=>bm=e)),e(Tm,"default",(()=>xm),(e=>xm=e)),bm=!0,xm={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(e){e?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};var Sm=Em(Tm);function Em(e){return e&&e.__esModule?e:{default:e}}um.utils.mixins.delayMixin(um.DisplayObject.prototype,Sm.default);var Om={target:null,data:{global:null}},km=function(e){function t(i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return r=r||{},n.renderer=i,n.autoPreventDefault=void 0===r.autoPreventDefault||r.autoPreventDefault,n.interactionFrequency=r.interactionFrequency||10,n.mouse=new lm.default,n.mouse.identifier=1,n.mouse.global.set(-999999),n.activeInteractionData={},n.activeInteractionData[1]=n.mouse,n.interactionDataPool=[],n.eventData=new gm.default,n.interactionDOMElement=null,n.moveWhenInside=!1,n.eventsAdded=!1,n.mouseOverRenderer=!1,n.supportsTouchEvents="ontouchstart"in window,n.supportsPointerEvents=!!window.PointerEvent,n.onPointerUp=n.onPointerUp.bind(n),n.processPointerUp=n.processPointerUp.bind(n),n.onPointerCancel=n.onPointerCancel.bind(n),n.processPointerCancel=n.processPointerCancel.bind(n),n.onPointerDown=n.onPointerDown.bind(n),n.processPointerDown=n.processPointerDown.bind(n),n.onPointerMove=n.onPointerMove.bind(n),n.processPointerMove=n.processPointerMove.bind(n),n.onPointerOut=n.onPointerOut.bind(n),n.processPointerOverOut=n.processPointerOverOut.bind(n),n.onPointerOver=n.onPointerOver.bind(n),n.cursorStyles={default:"inherit",pointer:"pointer"},n.currentCursorMode=null,n.cursor=null,n._tempPoint=new um.Point,n.resolution=1,n.setTargetElement(n.renderer.view,n.renderer.resolution),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.hitTest=function(e,t){return Om.target=null,Om.data.global=e,t||(t=this.renderer._lastObjectRendered),this.processInteractive(Om,t,null,!0),Om.target},t.prototype.setTargetElement=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.removeEvents(),this.interactionDOMElement=e,this.resolution=t,this.addEvents()},t.prototype.addEvents=function(){this.interactionDOMElement&&(um.ticker.shared.add(this.update,this,um.UPDATE_PRIORITY.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},t.prototype.removeEvents=function(){this.interactionDOMElement&&(um.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},t.prototype.update=function(e){if(this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement))if(this.didMove)this.didMove=!1;else{for(var t in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var i=this.activeInteractionData[t];if(i.originalEvent&&"touch"!==i.pointerType){var r=this.configureInteractionEventForDOMEvent(this.eventData,i.originalEvent,i);this.processInteractive(r,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},t.prototype.setCursorMode=function(e){if(e=e||"default",this.currentCursorMode!==e){this.currentCursorMode=e;var t=this.cursorStyles[e];if(t)switch(void 0===t?"undefined":hm(t)){case"string":this.interactionDOMElement.style.cursor=t;break;case"function":t(e);break;case"object":Object.assign(this.interactionDOMElement.style,t)}else"string"!=typeof e||Object.prototype.hasOwnProperty.call(this.cursorStyles,e)||(this.interactionDOMElement.style.cursor=e)}},t.prototype.dispatchEvent=function(e,t,i){i.stopped||(i.currentTarget=e,i.type=t,e.emit(t,i),e[t]&&e[t](i))},t.prototype.mapPositionToPoint=function(e,t,i){var r=void 0;r=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var n=navigator.isCocoonJS?this.resolution:1/this.resolution;e.x=(t-r.left)*(this.interactionDOMElement.width/r.width)*n,e.y=(i-r.top)*(this.interactionDOMElement.height/r.height)*n},t.prototype.processInteractive=function(e,t,i,r,n){if(!t||!t.visible)return!1;var o=e.data.global,s=!1,a=n=t.interactive||n,h=!0;if(t.hitArea?(r&&(t.worldTransform.applyInverse(o,this._tempPoint),t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?s=!0:(r=!1,h=!1)),a=!1):t._mask&&r&&(t._mask.containsPoint(o)||(r=!1,h=!1)),h&&t.interactiveChildren&&t.children)for(var u=t.children,l=u.length-1;l>=0;l--){var c=u[l],d=this.processInteractive(e,c,i,r,a);if(d){if(!c.parent)continue;a=!1,d&&(e.target&&(r=!1),s=!0)}}return n&&(r&&!e.target&&!t.hitArea&&t.containsPoint&&t.containsPoint(o)&&(s=!0),t.interactive&&(s&&!e.target&&(e.target=t),i&&i(e,t,!!s))),s},t.prototype.onPointerDown=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&e.preventDefault();for(var i=t.length,r=0;r<i;r++){var n=t[r],o=this.getInteractionDataForPointerId(n),s=this.configureInteractionEventForDOMEvent(this.eventData,n,o);if(s.data.originalEvent=e,this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",s),"touch"===n.pointerType)this.emit("touchstart",s);else if("mouse"===n.pointerType||"pen"===n.pointerType){var a=2===n.button;this.emit(a?"rightdown":"mousedown",this.eventData)}}}},t.prototype.processPointerDown=function(e,t,i){var r=e.data,n=e.data.identifier;if(i)if(t.trackedPointers[n]||(t.trackedPointers[n]=new wm.default(n)),this.dispatchEvent(t,"pointerdown",e),"touch"===r.pointerType)this.dispatchEvent(t,"touchstart",e);else if("mouse"===r.pointerType||"pen"===r.pointerType){var o=2===r.button;o?t.trackedPointers[n].rightDown=!0:t.trackedPointers[n].leftDown=!0,this.dispatchEvent(t,o?"rightdown":"mousedown",e)}},t.prototype.onPointerComplete=function(e,t,i){for(var r=this.normalizeToPointerData(e),n=r.length,o=e.target!==this.interactionDOMElement?"outside":"",s=0;s<n;s++){var a=r[s],h=this.getInteractionDataForPointerId(a),u=this.configureInteractionEventForDOMEvent(this.eventData,a,h);if(u.data.originalEvent=e,this.processInteractive(u,this.renderer._lastObjectRendered,i,t||!o),this.emit(t?"pointercancel":"pointerup"+o,u),"mouse"===a.pointerType||"pen"===a.pointerType){var l=2===a.button;this.emit(l?"rightup"+o:"mouseup"+o,u)}else"touch"===a.pointerType&&(this.emit(t?"touchcancel":"touchend"+o,u),this.releaseInteractionDataForPointerId(a.pointerId,h))}},t.prototype.onPointerCancel=function(e){this.supportsTouchEvents&&"touch"===e.pointerType||this.onPointerComplete(e,!0,this.processPointerCancel)},t.prototype.processPointerCancel=function(e,t){var i=e.data,r=e.data.identifier;void 0!==t.trackedPointers[r]&&(delete t.trackedPointers[r],this.dispatchEvent(t,"pointercancel",e),"touch"===i.pointerType&&this.dispatchEvent(t,"touchcancel",e))},t.prototype.onPointerUp=function(e){this.supportsTouchEvents&&"touch"===e.pointerType||this.onPointerComplete(e,!1,this.processPointerUp)},t.prototype.processPointerUp=function(e,t,i){var r=e.data,n=e.data.identifier,o=t.trackedPointers[n],s="touch"===r.pointerType,a="mouse"===r.pointerType||"pen"===r.pointerType,h=!1;if(a){var u=2===r.button,l=wm.default.FLAGS,c=u?l.RIGHT_DOWN:l.LEFT_DOWN,d=void 0!==o&&o.flags&c;i?(this.dispatchEvent(t,u?"rightup":"mouseup",e),d&&(this.dispatchEvent(t,u?"rightclick":"click",e),h=!0)):d&&this.dispatchEvent(t,u?"rightupoutside":"mouseupoutside",e),o&&(u?o.rightDown=!1:o.leftDown=!1)}i?(this.dispatchEvent(t,"pointerup",e),s&&this.dispatchEvent(t,"touchend",e),o&&(a&&!h||this.dispatchEvent(t,"pointertap",e),s&&(this.dispatchEvent(t,"tap",e),o.over=!1))):o&&(this.dispatchEvent(t,"pointerupoutside",e),s&&this.dispatchEvent(t,"touchendoutside",e)),o&&o.none&&delete t.trackedPointers[n]},t.prototype.onPointerMove=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var t=this.normalizeToPointerData(e);"mouse"!==t[0].pointerType&&"pen"!==t[0].pointerType||(this.didMove=!0,this.cursor=null);for(var i=t.length,r=0;r<i;r++){var n=t[r],o=this.getInteractionDataForPointerId(n),s=this.configureInteractionEventForDOMEvent(this.eventData,n,o);s.data.originalEvent=e;var a="touch"!==n.pointerType||this.moveWhenInside;this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerMove,a),this.emit("pointermove",s),"touch"===n.pointerType&&this.emit("touchmove",s),"mouse"!==n.pointerType&&"pen"!==n.pointerType||this.emit("mousemove",s)}"mouse"===t[0].pointerType&&this.setCursorMode(this.cursor)}},t.prototype.processPointerMove=function(e,t,i){var r=e.data,n="touch"===r.pointerType,o="mouse"===r.pointerType||"pen"===r.pointerType;o&&this.processPointerOverOut(e,t,i),this.moveWhenInside&&!i||(this.dispatchEvent(t,"pointermove",e),n&&this.dispatchEvent(t,"touchmove",e),o&&this.dispatchEvent(t,"mousemove",e))},t.prototype.onPointerOut=function(e){if(!this.supportsTouchEvents||"touch"!==e.pointerType){var t=this.normalizeToPointerData(e)[0];"mouse"===t.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var i=this.getInteractionDataForPointerId(t),r=this.configureInteractionEventForDOMEvent(this.eventData,t,i);r.data.originalEvent=t,this.processInteractive(r,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",r),"mouse"===t.pointerType||"pen"===t.pointerType?this.emit("mouseout",r):this.releaseInteractionDataForPointerId(i.identifier)}},t.prototype.processPointerOverOut=function(e,t,i){var r=e.data,n=e.data.identifier,o="mouse"===r.pointerType||"pen"===r.pointerType,s=t.trackedPointers[n];i&&!s&&(s=t.trackedPointers[n]=new wm.default(n)),void 0!==s&&(i&&this.mouseOverRenderer?(s.over||(s.over=!0,this.dispatchEvent(t,"pointerover",e),o&&this.dispatchEvent(t,"mouseover",e)),o&&null===this.cursor&&(this.cursor=t.cursor)):s.over&&(s.over=!1,this.dispatchEvent(t,"pointerout",this.eventData),o&&this.dispatchEvent(t,"mouseout",e),s.none&&delete t.trackedPointers[n]))},t.prototype.onPointerOver=function(e){var t=this.normalizeToPointerData(e)[0],i=this.getInteractionDataForPointerId(t),r=this.configureInteractionEventForDOMEvent(this.eventData,t,i);r.data.originalEvent=t,"mouse"===t.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",r),"mouse"!==t.pointerType&&"pen"!==t.pointerType||this.emit("mouseover",r)},t.prototype.getInteractionDataForPointerId=function(e){var t=e.pointerId,i=void 0;return 1===t||"mouse"===e.pointerType?i=this.mouse:this.activeInteractionData[t]?i=this.activeInteractionData[t]:((i=this.interactionDataPool.pop()||new lm.default).identifier=t,this.activeInteractionData[t]=i),i.copyEvent(e),i},t.prototype.releaseInteractionDataForPointerId=function(e){var t=this.activeInteractionData[e];t&&(delete this.activeInteractionData[e],t.reset(),this.interactionDataPool.push(t))},t.prototype.configureInteractionEventForDOMEvent=function(e,t,i){return e.data=i,this.mapPositionToPoint(i.global,t.clientX,t.clientY),navigator.isCocoonJS&&"touch"===t.pointerType&&(i.global.x=i.global.x/this.resolution,i.global.y=i.global.y/this.resolution),"touch"===t.pointerType&&(t.globalX=i.global.x,t.globalY=i.global.y),i.originalEvent=t,e.reset(),e},t.prototype.normalizeToPointerData=function(e){var t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(var i=0,r=e.changedTouches.length;i<r;i++){var n=e.changedTouches[i];void 0===n.button&&(n.button=e.touches.length?1:0),void 0===n.buttons&&(n.buttons=e.touches.length?1:0),void 0===n.isPrimary&&(n.isPrimary=1===e.touches.length&&"touchstart"===e.type),void 0===n.width&&(n.width=n.radiusX||1),void 0===n.height&&(n.height=n.radiusY||1),void 0===n.tiltX&&(n.tiltX=0),void 0===n.tiltY&&(n.tiltY=0),void 0===n.pointerType&&(n.pointerType="touch"),void 0===n.pointerId&&(n.pointerId=n.identifier||0),void 0===n.pressure&&(n.pressure=n.force||.5),void 0===n.twist&&(n.twist=0),void 0===n.tangentialPressure&&(n.tangentialPressure=0),void 0===n.layerX&&(n.layerX=n.offsetX=n.clientX),void 0===n.layerY&&(n.layerY=n.offsetY=n.clientY),n.isNormalized=!0,t.push(n)}else!(e instanceof MouseEvent)||this.supportsPointerEvents&&e instanceof window.PointerEvent||(void 0===e.isPrimary&&(e.isPrimary=!0),void 0===e.width&&(e.width=1),void 0===e.height&&(e.height=1),void 0===e.tiltX&&(e.tiltX=0),void 0===e.tiltY&&(e.tiltY=0),void 0===e.pointerType&&(e.pointerType="mouse"),void 0===e.pointerId&&(e.pointerId=1),void 0===e.pressure&&(e.pressure=.5),void 0===e.twist&&(e.twist=0),void 0===e.tangentialPressure&&(e.tangentialPressure=0),e.isNormalized=!0),t.push(e);return t},t.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null},t}(_m.default);function Mm(e){return e&&e.__esModule?e:{default:e}}nm=km,um.WebGLRenderer.registerPlugin("interaction",km),um.CanvasRenderer.registerPlugin("interaction",km),Object.defineProperty(Qg,"InteractionManager",{enumerable:!0,get:function(){return Mm(om).default}}),Object.defineProperty(Qg,"interactiveTarget",{enumerable:!0,get:function(){return Mm(Tm).default}}),Object.defineProperty(Qg,"InteractionTrackingData",{enumerable:!0,get:function(){return Mm(mm).default}}),Object.defineProperty(Qg,"InteractionEvent",{enumerable:!0,get:function(){return Mm(cm).default}});var Cm=lx(Qg),Pm={__esModule:!0};Pm.shared=Pm.Resource=Pm.textureParser=Pm.getResourcePath=Pm.spritesheetParser=Pm.parseBitmapFontData=Pm.bitmapFontParser=Pm.Loader=void 0;var Am,Im,Rm,Nm={};i(Nm),e(Nm,"__esModule",(()=>Am),(e=>Am=e)),e(Nm,"parse",(()=>Im),(e=>Im=e)),e(Nm,"default",(()=>Rm),(e=>Rm=e)),Am=!0,Im=Sy,Rm=function(){return function(e,t){if(e.data&&e.type===jm.Resource.TYPE.XML)if(0!==e.data.getElementsByTagName("page").length&&0!==e.data.getElementsByTagName("info").length&&null!==e.data.getElementsByTagName("info")[0].getAttribute("face")){var i=e.isDataUrl?"":Lm.dirname(e.url);e.isDataUrl&&("."===i&&(i=""),this.baseUrl&&i&&"/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(i+="/")),(i=i.replace(this.baseUrl,""))&&"/"!==i.charAt(i.length-1)&&(i+="/");for(var r=e.data.getElementsByTagName("page"),n={},o=function(i){n[i.metadata.pageFile]=i.texture,Object.keys(n).length===r.length&&(Sy(e,n),t())},s=0;s<r.length;++s){var a=r[s].getAttribute("file"),h=i+a,u=!1;for(var l in this.resources){var c=this.resources[l];if(c.url===h){c.metadata.pageFile=a,c.texture?o(c):c.onAfterMiddleware.add(o),u=!0;break}}if(!u){var d={crossOrigin:e.crossOrigin,loadType:jm.Resource.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:a},e.metadata.imageMetadata),parentResource:e};this.add(h,d,o)}}}else t();else t()}};var Dm,Lm=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(za),jm={};var Fm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bm=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),Um={};Object.defineProperty(Um,"__esModule",{value:!0});var Gm=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();function Wm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var zm=function(){function e(t,i,r){void 0===i&&(i=!1),Wm(this,e),this._fn=t,this._once=i,this._thisArg=r,this._next=this._prev=this._owner=null}return Gm(e,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),e}();function Hm(e,t){return e._head?(e._tail._next=t,t._prev=e._tail,e._tail=t):(e._head=t,e._tail=t),t._owner=e,t}var Xm=function(){function e(){Wm(this,e),this._head=this._tail=void 0}return Gm(e,[{key:"handlers",value:function(){var e=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],t=this._head;if(e)return!!t;for(var i=[];t;)i.push(t),t=t._next;return i}},{key:"has",value:function(e){if(!(e instanceof zm))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return e._owner===this}},{key:"dispatch",value:function(){var e=this._head;if(!e)return!1;for(;e;)e._once&&this.detach(e),e._fn.apply(e._thisArg,arguments),e=e._next;return!0}},{key:"add",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof e)throw new Error("MiniSignal#add(): First arg must be a Function.");return Hm(this,new zm(e,!1,t))}},{key:"once",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof e)throw new Error("MiniSignal#once(): First arg must be a Function.");return Hm(this,new zm(e,!0,t))}},{key:"detach",value:function(e){if(!(e instanceof zm))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return e._owner!==this||(e._prev&&(e._prev._next=e._next),e._next&&(e._next._prev=e._prev),e===this._head?(this._head=e._next,null===e._next&&(this._tail=null)):e===this._tail&&(this._tail=e._prev,this._tail._next=null),e._owner=null),this}},{key:"detachAll",value:function(){var e=this._head;if(!e)return this;for(this._head=this._tail=null;e;)e._owner=null,e=e._next;return this}}]),e}();Xm.MiniSignalBinding=zm,Um.default=Xm;var Ym,Vm,qm,Km,Zm=fy(Um=Um.default),Jm=fy(Ym=function(e,t){t=t||{};for(var i={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=i.parser[t.strictMode?"strict":"loose"].exec(e),n={},o=14;o--;)n[i.key[o]]=r[o]||"";return n[i.q.name]={},n[i.key[12]].replace(i.q.parser,(function(e,t,r){t&&(n[i.q.name][t]=r)})),n}),Qm={};function $m(){}function ey(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}}e(Qm,"__esModule",(()=>Vm),(e=>Vm=e)),e(Qm,"eachSeries",(()=>qm),(e=>qm=e)),e(Qm,"queue",(()=>Km),(e=>Km=e)),Vm=!0,qm=function(e,t,i,r){var n=0,o=e.length;!function s(a){a||n===o?i&&i(a):r?setTimeout((function(){t(e[n++],s)}),1):t(e[n++],s)}()},Km=function(e,t){if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var i=0,r={_tasks:[],concurrency:t,saturated:$m,unsaturated:$m,buffer:t/4,empty:$m,drain:$m,error:$m,started:!1,paused:!1,push:function(e,t){n(e,!1,t)},kill:function(){i=0,r.drain=$m,r.started=!1,r._tasks=[]},unshift:function(e,t){n(e,!0,t)},process:function(){for(;!r.paused&&i<r.concurrency&&r._tasks.length;){var t=r._tasks.shift();0===r._tasks.length&&r.empty(),(i+=1)===r.concurrency&&r.saturated(),e(t.data,ey(o(t)))}},length:function(){return r._tasks.length},running:function(){return i},idle:function(){return r._tasks.length+i===0},pause:function(){!0!==r.paused&&(r.paused=!0)},resume:function(){if(!1!==r.paused){r.paused=!1;for(var e=1;e<=r.concurrency;e++)r.process()}}};function n(e,t,i){if(null!=i&&"function"!=typeof i)throw new Error("task callback must be a function");if(r.started=!0,null==e&&r.idle())setTimeout((function(){return r.drain()}),1);else{var n={data:e,callback:"function"==typeof i?i:$m};t?r._tasks.unshift(n):r._tasks.push(n),setTimeout((function(){return r.process()}),1)}}function o(e){return function(){i-=1,e.callback.apply(e,arguments),null!=arguments[0]&&r.error(arguments[0],e.data),i<=r.concurrency-r.buffer&&r.unsaturated(),r.idle()&&r.drain(),r.process()}}return r};var ty,iy=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(Qm);ty=void 0;var ry=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),ny=sy(Ym),oy=sy(Um);function sy(e){return e&&e.__esModule?e:{default:e}}var ay=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),hy=null;function uy(){}var ly=ty=function(){function e(t,i,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"string"!=typeof t||"string"!=typeof i)throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(e.STATUS_FLAGS.DATA_URL,0===i.indexOf("data:")),this.name=t,this.url=i,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===r.crossOrigin?"anonymous":r.crossOrigin,this.timeout=r.timeout||0,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=e.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=uy,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new oy.default,this.onProgress=new oy.default,this.onComplete=new oy.default,this.onAfterMiddleware=new oy.default}return e.setExtensionLoadType=function(t,i){cy(e._loadTypeMap,t,i)},e.setExtensionXhrType=function(t,i){cy(e._xhrTypeMap,t,i)},e.prototype.complete=function(){this._clearEvents(),this._finish()},e.prototype.abort=function(t){if(!this.error){if(this.error=new Error(t),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=e.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},e.prototype.load=function(t){var i=this;if(!this.isLoading)if(this.isComplete)t&&setTimeout((function(){return t(i)}),1);else switch(t&&this.onComplete.once(t),this._setFlag(e.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case e.LOAD_TYPE.IMAGE:this.type=e.TYPE.IMAGE,this._loadElement("image");break;case e.LOAD_TYPE.AUDIO:this.type=e.TYPE.AUDIO,this._loadSourceElement("audio");break;case e.LOAD_TYPE.VIDEO:this.type=e.TYPE.VIDEO,this._loadSourceElement("video");break;case e.LOAD_TYPE.XHR:default:ay&&this.crossOrigin?this._loadXdr():this._loadXhr()}},e.prototype._hasFlag=function(e){return 0!=(this._flags&e)},e.prototype._setFlag=function(e,t){this._flags=t?this._flags|e:this._flags&~e},e.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},e.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(e.STATUS_FLAGS.COMPLETE,!0),this._setFlag(e.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},e.prototype._loadElement=function(e){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===e&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(e),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},e.prototype._loadSourceElement=function(e){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===e&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(e),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var t=this.metadata.mimeType,i=0;i<this.url.length;++i)this.data.appendChild(this._createSource(e,this.url[i],Array.isArray(t)?t[i]:t));else{var r=this.metadata.mimeType;this.data.appendChild(this._createSource(e,this.url,Array.isArray(r)?r[0]:r))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+e)},e.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;t.open("GET",this.url,!0),t.timeout=this.timeout,this.xhrType===e.XHR_RESPONSE_TYPE.JSON||this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=e.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("timeout",this._boundXhrOnTimeout,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},e.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XDomainRequest;e.timeout=this.timeout||5e3,e.onerror=this._boundXhrOnError,e.ontimeout=this._boundXhrOnTimeout,e.onprogress=this._boundOnProgress,e.onload=this._boundXhrOnLoad,e.open("GET",this.url,!0),setTimeout((function(){return e.send()}),1)},e.prototype._createSource=function(e,t,i){i||(i=e+"/"+this._getExtension(t));var r=document.createElement("source");return r.src=t,r.type=i,r},e.prototype._onError=function(e){this.abort("Failed to load element using: "+e.target.nodeName)},e.prototype._onProgress=function(e){e&&e.lengthComputable&&this.onProgress.dispatch(this,e.loaded/e.total)},e.prototype._onTimeout=function(){this.abort("Load timed out.")},e.prototype._xhrOnError=function(){var e=this.xhr;this.abort(dy(e)+" Request failed. Status: "+e.status+', text: "'+e.statusText+'"')},e.prototype._xhrOnTimeout=function(){var e=this.xhr;this.abort(dy(e)+" Request timed out.")},e.prototype._xhrOnAbort=function(){var e=this.xhr;this.abort(dy(e)+" Request was aborted by the user.")},e.prototype._xhrOnLoad=function(){var t=this.xhr,i="",r=void 0===t.status?200:t.status;if(""!==t.responseType&&"text"!==t.responseType&&void 0!==t.responseType||(i=t.responseText),0===r&&(i.length>0||t.responseType===e.XHR_RESPONSE_TYPE.BUFFER)?r=200:1223===r&&(r=204),2===(r/100|0)){if(this.xhrType===e.XHR_RESPONSE_TYPE.TEXT)this.data=i,this.type=e.TYPE.TEXT;else if(this.xhrType===e.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(i),this.type=e.TYPE.JSON}catch(e){return void this.abort("Error trying to parse loaded json: "+e)}else if(this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var n=new DOMParser;this.data=n.parseFromString(i,"text/xml")}else{var o=document.createElement("div");o.innerHTML=i,this.data=o}this.type=e.TYPE.XML}catch(e){return void this.abort("Error trying to parse loaded xml: "+e)}else this.data=t.response||i;this.complete()}else this.abort("["+t.status+"] "+t.statusText+": "+t.responseURL)},e.prototype._determineCrossOrigin=function(e,t){if(0===e.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";t=t||window.location,hy||(hy=document.createElement("a")),hy.href=e;var i=!(e=(0,ny.default)(hy.href,{strictMode:!0})).port&&""===t.port||e.port===t.port,r=e.protocol?e.protocol+":":"";return e.host===t.hostname&&i&&r===t.protocol?"":"anonymous"},e.prototype._determineXhrType=function(){return e._xhrTypeMap[this.extension]||e.XHR_RESPONSE_TYPE.TEXT},e.prototype._determineLoadType=function(){return e._loadTypeMap[this.extension]||e.LOAD_TYPE.XHR},e.prototype._getExtension=function(){var e=this.url,t="";if(this.isDataUrl){var i=e.indexOf("/");t=e.substring(i+1,e.indexOf(";",i))}else{var r=e.indexOf("?"),n=e.indexOf("#"),o=Math.min(r>-1?r:e.length,n>-1?n:e.length);t=(e=e.substring(0,o)).substring(e.lastIndexOf(".")+1)}return t.toLowerCase()},e.prototype._getMimeFromXhrType=function(t){switch(t){case e.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case e.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case e.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case e.XHR_RESPONSE_TYPE.JSON:return"application/json";case e.XHR_RESPONSE_TYPE.DEFAULT:case e.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},ry(e,[{key:"isDataUrl",get:function(){return this._hasFlag(e.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(e.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(e.STATUS_FLAGS.LOADING)}}]),e}();function cy(e,t,i){t&&0===t.indexOf(".")&&(t=t.substring(1)),t&&(e[t]=i)}function dy(e){return e.toString().replace("object ","")}function fy(e){return e&&e.__esModule?e:{default:e}}function py(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}ly.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},ly.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},ly.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},ly.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},ly._loadTypeMap={gif:ly.LOAD_TYPE.IMAGE,png:ly.LOAD_TYPE.IMAGE,bmp:ly.LOAD_TYPE.IMAGE,jpg:ly.LOAD_TYPE.IMAGE,jpeg:ly.LOAD_TYPE.IMAGE,tif:ly.LOAD_TYPE.IMAGE,tiff:ly.LOAD_TYPE.IMAGE,webp:ly.LOAD_TYPE.IMAGE,tga:ly.LOAD_TYPE.IMAGE,svg:ly.LOAD_TYPE.IMAGE,"svg+xml":ly.LOAD_TYPE.IMAGE,mp3:ly.LOAD_TYPE.AUDIO,ogg:ly.LOAD_TYPE.AUDIO,wav:ly.LOAD_TYPE.AUDIO,mp4:ly.LOAD_TYPE.VIDEO,webm:ly.LOAD_TYPE.VIDEO},ly._xhrTypeMap={xhtml:ly.XHR_RESPONSE_TYPE.DOCUMENT,html:ly.XHR_RESPONSE_TYPE.DOCUMENT,htm:ly.XHR_RESPONSE_TYPE.DOCUMENT,xml:ly.XHR_RESPONSE_TYPE.DOCUMENT,tmx:ly.XHR_RESPONSE_TYPE.DOCUMENT,svg:ly.XHR_RESPONSE_TYPE.DOCUMENT,tsx:ly.XHR_RESPONSE_TYPE.DOCUMENT,gif:ly.XHR_RESPONSE_TYPE.BLOB,png:ly.XHR_RESPONSE_TYPE.BLOB,bmp:ly.XHR_RESPONSE_TYPE.BLOB,jpg:ly.XHR_RESPONSE_TYPE.BLOB,jpeg:ly.XHR_RESPONSE_TYPE.BLOB,tif:ly.XHR_RESPONSE_TYPE.BLOB,tiff:ly.XHR_RESPONSE_TYPE.BLOB,webp:ly.XHR_RESPONSE_TYPE.BLOB,tga:ly.XHR_RESPONSE_TYPE.BLOB,json:ly.XHR_RESPONSE_TYPE.JSON,text:ly.XHR_RESPONSE_TYPE.TEXT,txt:ly.XHR_RESPONSE_TYPE.TEXT,ttf:ly.XHR_RESPONSE_TYPE.BUFFER,otf:ly.XHR_RESPONSE_TYPE.BUFFER},ly.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==";var gy=/(#[\w-]+)?$/,my=Dm=function(){function e(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;py(this,e),this.baseUrl=i,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(e,i){return t._loadResource(e,i)},this._queue=iy.queue(this._boundLoadResource,r),this._queue.pause(),this.resources={},this.onProgress=new Zm.default,this.onError=new Zm.default,this.onLoad=new Zm.default,this.onStart=new Zm.default,this.onComplete=new Zm.default;for(var n=0;n<e._defaultBeforeMiddleware.length;++n)this.pre(e._defaultBeforeMiddleware[n]);for(var o=0;o<e._defaultAfterMiddleware.length;++o)this.use(e._defaultAfterMiddleware[o])}return e.prototype.add=function(e,t,i,r){if(Array.isArray(e)){for(var n=0;n<e.length;++n)this.add(e[n]);return this}if("object"===(void 0===e?"undefined":Fm(e))&&(r=t||e.callback||e.onComplete,i=e,t=e.url,e=e.name||e.key||e.url),"string"!=typeof t&&(r=i,i=t,t=e),"string"!=typeof t)throw new Error("No url passed to add resource to loader.");if("function"==typeof i&&(r=i,i=null),this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[e])throw new Error('Resource named "'+e+'" already exists.');if(t=this._prepareUrl(t),this.resources[e]=new ty(e,t,i),"function"==typeof r&&this.resources[e].onAfterMiddleware.once(r),this.loading){for(var o=i.parentResource,s=[],a=0;a<o.children.length;++a)o.children[a].isComplete||s.push(o.children[a]);var h=o.progressChunk*(s.length+1)/(s.length+2);o.children.push(this.resources[e]),o.progressChunk=h;for(var u=0;u<s.length;++u)s[u].progressChunk=h;this.resources[e].progressChunk=h}return this._queue.push(this.resources[e]),this},e.prototype.pre=function(e){return this._beforeMiddleware.push(e),this},e.prototype.use=function(e){return this._afterMiddleware.push(e),this},e.prototype.reset=function(){for(var e in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var t=this.resources[e];t._onLoadBinding&&t._onLoadBinding.detach(),t.isLoading&&t.abort()}return this.resources={},this},e.prototype.load=function(e){if("function"==typeof e&&this.onComplete.once(e),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var t=100/this._queue._tasks.length,i=0;i<this._queue._tasks.length;++i)this._queue._tasks[i].data.progressChunk=t;this._onStart(),this._queue.resume()}return this},e.prototype._prepareUrl=function(e){var t=(0,Jm.default)(e,{strictMode:!0}),i=void 0;if(i=t.protocol||!t.path||0===e.indexOf("//")?e:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==e.charAt(0)?this.baseUrl+"/"+e:this.baseUrl+e,this.defaultQueryString){var r=gy.exec(i)[0];-1!==(i=i.substr(0,i.length-r.length)).indexOf("?")?i+="&"+this.defaultQueryString:i+="?"+this.defaultQueryString,i+=r}return i},e.prototype._loadResource=function(e,t){var i=this;e._dequeue=t,iy.eachSeries(this._beforeMiddleware,(function(t,r){t.call(i,e,(function(){r(e.isComplete?{}:null)}))}),(function(){e.isComplete?i._onLoad(e):(e._onLoadBinding=e.onComplete.once(i._onLoad,i),e.load())}),!0)},e.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},e.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},e.prototype._onLoad=function(e){var t=this;e._onLoadBinding=null,this._resourcesParsing.push(e),e._dequeue(),iy.eachSeries(this._afterMiddleware,(function(i,r){i.call(t,e,r)}),(function(){e.onAfterMiddleware.dispatch(e),t.progress=Math.min(100,t.progress+e.progressChunk),t.onProgress.dispatch(t,e),e.error?t.onError.dispatch(e.error,t,e):t.onLoad.dispatch(t,e),t._resourcesParsing.splice(t._resourcesParsing.indexOf(e),1),t._queue.idle()&&0===t._resourcesParsing.length&&t._onComplete()}),!0)},Bm(e,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(e){this._queue.concurrency=e}}]),e}();my._defaultBeforeMiddleware=[],my._defaultAfterMiddleware=[],my.pre=function(e){return my._defaultBeforeMiddleware.push(e),my},my.use=function(e){return my._defaultAfterMiddleware.push(e),my};var yy,vy,by,xy=Dm,wy=ty,_y={};i(_y),e(_y,"__esModule",(()=>yy),(e=>yy=e)),e(_y,"encodeBinary",(()=>vy),(e=>vy=e)),e(_y,"default",(()=>by),(e=>by=e)),yy=!0,vy=Ty;function Ty(e){for(var t="",i=0;i<e.length;){for(var r=[0,0,0],n=[0,0,0,0],o=0;o<r.length;++o)i<e.length?r[o]=255&e.charCodeAt(i++):r[o]=0;switch(n[0]=r[0]>>2,n[1]=(3&r[0])<<4|r[1]>>4,n[2]=(15&r[1])<<2|r[2]>>6,n[3]=63&r[2],i-(e.length-1)){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64}for(var s=0;s<n.length;++s)t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(n[s])}return t}function Sy(e,t){e.bitmapFont=Lf.BitmapText.registerFont(e.data,t)}by=Ty,xy.Resource=wy,xy.async=Qm,xy.encodeBinary=_y,xy.base64=_y,(jm=xy).Loader=xy,jm.default=xy,Object.defineProperty(Pm,"bitmapFontParser",{enumerable:!0,get:function(){return Jy(Nm).default}}),Object.defineProperty(Pm,"parseBitmapFontData",{enumerable:!0,get:function(){return Nm.parse}});var Ey,Oy,ky,My={};i(My),e(My,"__esModule",(()=>Ey),(e=>Ey=e)),e(My,"default",(()=>Oy),(e=>Oy=e)),e(My,"getResourcePath",(()=>ky),(e=>ky=e)),Ey=!0,Oy=function(){return function(e,t){var i=e.name+"_image";if(e.data&&e.type===jm.Resource.TYPE.JSON&&e.data.frames&&!this.resources[i]){var r={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},n=Py(e,this.baseUrl);this.add(i,n,r,(function(i){if(i.error)t(i.error);else{var r=new x.Spritesheet(i.texture.baseTexture,e.data,e.url);r.parse((function(){e.spritesheet=r,e.textures=r.textures,t()}))}}))}else t()}},ky=Py;var Cy=function(e){return e&&e.__esModule?e:{default:e}}(Zr);function Py(e,t){return e.isDataUrl?e.data.meta.image:Cy.default.resolve(e.url.replace(t,""),e.data.meta.image)}Object.defineProperty(Pm,"spritesheetParser",{enumerable:!0,get:function(){return Jy(My).default}}),Object.defineProperty(Pm,"getResourcePath",{enumerable:!0,get:function(){return My.getResourcePath}});var Ay,Iy,Ry={};i(Ry),e(Ry,"__esModule",(()=>Ay),(e=>Ay=e)),e(Ry,"default",(()=>Iy),(e=>Iy=e)),Ay=!0,Iy=function(){return function(e,t){e.data&&e.type===jm.Resource.TYPE.IMAGE&&(e.texture=Ny.default.fromLoader(e.data,e.url,e.name)),t()}};var Ny=function(e){return e&&e.__esModule?e:{default:e}}(Dr);Object.defineProperty(Pm,"textureParser",{enumerable:!0,get:function(){return Jy(Ry).default}}),Object.defineProperty(Pm,"Resource",{enumerable:!0,get:function(){return jm.Resource}});var Dy,Ly,jy=Jy(Ld),Fy={};i(Fy),e(Fy,"__esModule",(()=>Dy),(e=>Dy=e)),e(Fy,"default",(()=>Ly),(e=>Ly=e)),Dy=!0;var By,Uy=Yy(jm);By=function(){return function(e,t){if(e.data){if(e.xhr&&e.xhrType===ty.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof e.data){if(0===e.data.type.indexOf("image")){var i=Gy.createObjectURL(e.data);return e.blob=e.data,e.data=new Image,e.data.src=i,e.type=ty.TYPE.IMAGE,void(e.data.onload=function(){Gy.revokeObjectURL(i),e.data.onload=null,t()})}}else{var r=e.xhr.getResponseHeader("content-type");if(r&&0===r.indexOf("image"))return e.data=new Image,e.data.src="data:"+r+";base64,"+vy(e.xhr.responseText),e.type=ty.TYPE.IMAGE,void(e.data.onload=function(){e.data.onload=null,t()})}t()}else t()}};var Gy=window.URL||window.webkitURL;var Wy=Yy(rt),zy=Yy(Ry),Hy=Yy(My),Xy=Yy(Nm);function Yy(e){return e&&e.__esModule?e:{default:e}}var Vy=function(e){function t(i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,i,r));Wy.default.call(n);for(var o=0;o<t._pixiMiddleware.length;++o)n.use(t._pixiMiddleware[o]());return n.onStart.add((function(e){return n.emit("start",e)})),n.onProgress.add((function(e,t){return n.emit("progress",e,t)})),n.onError.add((function(e,t,i){return n.emit("error",e,t,i)})),n.onLoad.add((function(e,t){return n.emit("load",e,t)})),n.onComplete.add((function(e,t){return n.emit("complete",e,t)})),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.addPixiMiddleware=function(e){t._pixiMiddleware.push(e)},t.prototype.destroy=function(){this.removeAllListeners(),this.reset()},t}(Uy.default);for(var qy in Ly=Vy,Wy.default.prototype)Vy.prototype[qy]=Wy.default.prototype[qy];Vy._pixiMiddleware=[By,zy.default,Hy.default,Xy.default];var Ky=Uy.default.Resource;Ky.setExtensionXhrType("fnt",Ky.XHR_RESPONSE_TYPE.DOCUMENT);var Zy=Jy(Fy);function Jy(e){return e&&e.__esModule?e:{default:e}}Pm.Loader=Zy.default;var Qy=new Zy.default;Qy.destroy=function(){},Pm.shared=Qy;var $y=jy.default.prototype;$y._loader=null,Object.defineProperty($y,"loader",{get:function(){if(!this._loader){var e=this._options.sharedLoader;this._loader=e?Qy:new Zy.default}return this._loader}}),$y._parentDestroy=$y.destroy,$y.destroy=function(e,t){this._loader&&(this._loader.destroy(),this._loader=null),this._parentDestroy(e,t)};var ev,tv,iv=lx(Pm),rv={__esModule:!0},nv={};i(nv),e(nv,"__esModule",(()=>ev),(e=>ev=e)),e(nv,"default",(()=>tv),(e=>tv=e)),ev=!0;var ov=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),sv=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(x),av=function(e){return e&&e.__esModule?e:{default:e}}(Dr);var hv=new sv.Point,uv=new sv.Polygon,lv=function(e){function t(i,r,n,o,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return a._texture=i||av.default.EMPTY,a.uvs=n||new Float32Array([0,0,1,0,1,1,0,1]),a.vertices=r||new Float32Array([0,0,100,0,100,100,0,100]),a.indices=o||new Uint16Array([0,1,3,2]),a.dirty=0,a.indexDirty=0,a.vertexDirty=0,a.autoUpdate=!0,a.blendMode=sv.BLEND_MODES.NORMAL,a.canvasPadding=sv.settings.MESH_CANVAS_PADDING,a.drawMode=s||t.DRAW_MODES.TRIANGLE_MESH,a.shader=null,a.tintRgb=new Float32Array([1,1,1]),a._glDatas={},a._uvTransform=new sv.TextureMatrix(a._texture),a.uploadUvTransform=!1,a.pluginName="mesh",a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._renderWebGL=function(e){this.refresh(),e.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)},t.prototype._renderCanvas=function(e){this.refresh(),e.plugins[this.pluginName].render(this)},t.prototype._onTextureUpdate=function(){this._uvTransform.texture=this._texture,this.refresh()},t.prototype.multiplyUvs=function(){this.uploadUvTransform||this._uvTransform.multiplyUvs(this.uvs)},t.prototype.refresh=function(e){this.autoUpdate&&this.vertexDirty++,this._uvTransform.update(e)&&this._refresh()},t.prototype._refresh=function(){},t.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},t.prototype.containsPoint=function(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,hv);for(var i=this.vertices,r=uv.points,n=this.indices,o=this.indices.length,s=this.drawMode===t.DRAW_MODES.TRIANGLES?3:1,a=0;a+2<o;a+=s){var h=2*n[a],u=2*n[a+1],l=2*n[a+2];if(r[0]=i[h],r[1]=i[h+1],r[2]=i[u],r[3]=i[u+1],r[4]=i[l],r[5]=i[l+1],uv.contains(hv.x,hv.y))return!0}return!1},t.prototype.destroy=function(t){for(var i in this._glDatas){var r=this._glDatas[i];r.destroy?r.destroy():(r.vertexBuffer&&(r.vertexBuffer.destroy(),r.vertexBuffer=null),r.indexBuffer&&(r.indexBuffer.destroy(),r.indexBuffer=null),r.uvBuffer&&(r.uvBuffer.destroy(),r.uvBuffer=null),r.vao&&(r.vao.destroy(),r.vao=null))}this._glDatas=null,e.prototype.destroy.call(this,t)},ov(t,[{key:"texture",get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture=e,e&&(e.baseTexture.hasLoaded?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}},{key:"tint",get:function(){return sv.utils.rgb2hex(this.tintRgb)},set:function(e){this.tintRgb=sv.utils.hex2rgb(e,this.tintRgb)}}]),t}(sv.Container);tv=lv,lv.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1},Object.defineProperty(rv,"Mesh",{enumerable:!0,get:function(){return Hv(nv).default}});var cv,dv,fv={};i(fv),e(fv,"__esModule",(()=>cv),(e=>cv=e)),e(fv,"default",(()=>dv),(e=>dv=e)),cv=!0;var pv=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(x),gv=yv(qe),mv=yv(nv);function yv(e){return e&&e.__esModule?e:{default:e}}var vv=pv.Matrix.IDENTITY,bv=function(e){function t(i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,i));return r.shader=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.onContextChange=function(){var e=this.renderer.gl;this.shader=new pv.Shader(e,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n")},t.prototype.render=function(e){var t=this.renderer,i=t.gl,r=e._texture;if(r.valid){var n=e._glDatas[t.CONTEXT_UID];n||(t.bindVao(null),(n={shader:this.shader,vertexBuffer:gv.default.GLBuffer.createVertexBuffer(i,e.vertices,i.STREAM_DRAW),uvBuffer:gv.default.GLBuffer.createVertexBuffer(i,e.uvs,i.STREAM_DRAW),indexBuffer:gv.default.GLBuffer.createIndexBuffer(i,e.indices,i.STATIC_DRAW),vao:null,dirty:e.dirty,indexDirty:e.indexDirty,vertexDirty:e.vertexDirty}).vao=new gv.default.VertexArrayObject(i).addIndex(n.indexBuffer).addAttribute(n.vertexBuffer,n.shader.attributes.aVertexPosition,i.FLOAT,!1,8,0).addAttribute(n.uvBuffer,n.shader.attributes.aTextureCoord,i.FLOAT,!1,8,0),e._glDatas[t.CONTEXT_UID]=n),t.bindVao(n.vao),e.dirty!==n.dirty&&(n.dirty=e.dirty,n.uvBuffer.upload(e.uvs)),e.indexDirty!==n.indexDirty&&(n.indexDirty=e.indexDirty,n.indexBuffer.upload(e.indices)),e.vertexDirty!==n.vertexDirty&&(n.vertexDirty=e.vertexDirty,n.vertexBuffer.upload(e.vertices)),t.bindShader(n.shader),n.shader.uniforms.uSampler=t.bindTexture(r),t.state.setBlendMode(pv.utils.correctBlendMode(e.blendMode,r.baseTexture.premultipliedAlpha)),n.shader.uniforms.uTransform&&(e.uploadUvTransform?n.shader.uniforms.uTransform=e._uvTransform.mapCoord.toArray(!0):n.shader.uniforms.uTransform=vv.toArray(!0)),n.shader.uniforms.translationMatrix=e.worldTransform.toArray(!0),n.shader.uniforms.uColor=pv.utils.premultiplyRgba(e.tintRgb,e.worldAlpha,n.shader.uniforms.uColor,r.baseTexture.premultipliedAlpha);var o=e.drawMode===mv.default.DRAW_MODES.TRIANGLE_MESH?i.TRIANGLE_STRIP:i.TRIANGLES;n.vao.draw(o,e.indices.length,0)}},t}(pv.ObjectRenderer);dv=bv,pv.WebGLRenderer.registerPlugin("mesh",bv),Object.defineProperty(rv,"MeshRenderer",{enumerable:!0,get:function(){return Hv(fv).default}});var xv,wv,_v={};i(_v),e(_v,"__esModule",(()=>xv),(e=>xv=e)),e(_v,"default",(()=>wv),(e=>wv=e)),xv=!0;var Tv=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(x),Sv=function(e){return e&&e.__esModule?e:{default:e}}(nv);var Ev=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.renderer=t}return e.prototype.render=function(e){var t=this.renderer,i=t.context,r=e.worldTransform,n=t.resolution;t.roundPixels?i.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n|0,r.ty*n|0):i.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n,r.ty*n),t.context.globalAlpha=e.worldAlpha,t.setBlendMode(e.blendMode),e.drawMode===Sv.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(e):this._renderTriangles(e)},e.prototype._renderTriangleMesh=function(e){for(var t=e.vertices.length/2,i=0;i<t-2;i++){var r=2*i;this._renderDrawTriangle(e,r,r+2,r+4)}},e.prototype._renderTriangles=function(e){for(var t=e.indices,i=t.length,r=0;r<i;r+=3){var n=2*t[r],o=2*t[r+1],s=2*t[r+2];this._renderDrawTriangle(e,n,o,s)}},e.prototype._renderDrawTriangle=function(e,t,i,r){var n=this.renderer.context,o=e.uvs,s=e.vertices,a=e._texture;if(a.valid){var h=a.baseTexture,u=h.source,l=h.width,c=h.height,d=void 0,f=void 0,p=void 0,g=void 0,m=void 0,y=void 0;if(e.uploadUvTransform){var v=e._uvTransform.mapCoord;d=(o[t]*v.a+o[t+1]*v.c+v.tx)*h.width,f=(o[i]*v.a+o[i+1]*v.c+v.tx)*h.width,p=(o[r]*v.a+o[r+1]*v.c+v.tx)*h.width,g=(o[t]*v.b+o[t+1]*v.d+v.ty)*h.height,m=(o[i]*v.b+o[i+1]*v.d+v.ty)*h.height,y=(o[r]*v.b+o[r+1]*v.d+v.ty)*h.height}else d=o[t]*h.width,f=o[i]*h.width,p=o[r]*h.width,g=o[t+1]*h.height,m=o[i+1]*h.height,y=o[r+1]*h.height;var b=s[t],x=s[i],w=s[r],_=s[t+1],T=s[i+1],S=s[r+1],E=e.canvasPadding/this.renderer.resolution;if(E>0){var O=E/Math.abs(e.worldTransform.a),k=E/Math.abs(e.worldTransform.d),M=(b+x+w)/3,C=(_+T+S)/3,P=b-M,A=_-C,I=Math.sqrt(P*P+A*A);b=M+P/I*(I+O),_=C+A/I*(I+k),A=T-C,x=M+(P=x-M)/(I=Math.sqrt(P*P+A*A))*(I+O),T=C+A/I*(I+k),A=S-C,w=M+(P=w-M)/(I=Math.sqrt(P*P+A*A))*(I+O),S=C+A/I*(I+k)}n.save(),n.beginPath(),n.moveTo(b,_),n.lineTo(x,T),n.lineTo(w,S),n.closePath(),n.clip();var R=d*m+g*p+f*y-m*p-g*f-d*y,N=b*m+g*w+x*y-m*w-g*x-b*y,D=d*x+b*p+f*w-x*p-b*f-d*w,L=d*m*w+g*x*p+b*f*y-b*m*p-g*f*w-d*x*y,j=_*m+g*S+T*y-m*S-g*T-_*y,F=d*T+_*p+f*S-T*p-_*f-d*S,B=d*m*S+g*T*p+_*f*y-_*m*p-g*f*S-d*T*y;n.transform(N/R,j/R,D/R,F/R,L/R,B/R),n.drawImage(u,0,0,l*h.resolution,c*h.resolution,0,0,l,c),n.restore(),this.renderer.invalidateBlendMode()}},e.prototype.renderMeshFlat=function(e){var t=this.renderer.context,i=e.vertices,r=i.length/2;t.beginPath();for(var n=1;n<r-2;++n){var o=2*n,s=i[o],a=i[o+1],h=i[o+2],u=i[o+3],l=i[o+4],c=i[o+5];t.moveTo(s,a),t.lineTo(h,u),t.lineTo(l,c)}t.fillStyle="#FF0000",t.fill(),t.closePath()},e.prototype.destroy=function(){this.renderer=null},e}();wv=Ev,Tv.CanvasRenderer.registerPlugin("mesh",Ev),Object.defineProperty(rv,"CanvasMeshRenderer",{enumerable:!0,get:function(){return Hv(_v).default}});var Ov,kv,Mv={};i(Mv),e(Mv,"__esModule",(()=>Ov),(e=>Ov=e)),e(Mv,"default",(()=>kv),(e=>kv=e)),Ov=!0;var Cv=function(e){return e&&e.__esModule?e:{default:e}}(nv);var Pv=function(e){function t(i,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,i));return o._ready=!0,o.verticesX=r||10,o.verticesY=n||10,o.drawMode=Cv.default.DRAW_MODES.TRIANGLES,o.refresh(),o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._refresh=function(){for(var e=this._texture,t=this.verticesX*this.verticesY,i=[],r=[],n=[],o=this.verticesX-1,s=this.verticesY-1,a=e.width/o,h=e.height/s,u=0;u<t;u++){var l=u%this.verticesX,c=u/this.verticesX|0;i.push(l*a,c*h),r.push(l/o,c/s)}for(var d=o*s,f=0;f<d;f++){var p=f%o,g=f/o|0,m=g*this.verticesX+p,y=g*this.verticesX+p+1,v=(g+1)*this.verticesX+p,b=(g+1)*this.verticesX+p+1;n.push(m,y,v),n.push(y,b,v)}this.vertices=new Float32Array(i),this.uvs=new Float32Array(r),this.colors=new Float32Array([]),this.indices=new Uint16Array(n),this.dirty++,this.indexDirty++,this.multiplyUvs()},t.prototype._onTextureUpdate=function(){Cv.default.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},t}(Cv.default);kv=Pv,Object.defineProperty(rv,"Plane",{enumerable:!0,get:function(){return Hv(Mv).default}});var Av,Iv,Rv={};i(Rv),e(Rv,"__esModule",(()=>Av),(e=>Av=e)),e(Rv,"default",(()=>Iv),(e=>Iv=e)),Av=!0;var Nv=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),Dv=jv(Mv),Lv=jv(Ks);function jv(e){return e&&e.__esModule?e:{default:e}}var Fv=function(e){function t(i,r,n,o,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,i,4,4));return a._origWidth=i.orig.width,a._origHeight=i.orig.height,a._width=a._origWidth,a._height=a._origHeight,a._leftWidth=void 0!==r?r:10,a._rightWidth=void 0!==o?o:10,a._topHeight=void 0!==n?n:10,a._bottomHeight=void 0!==s?s:10,a._cachedTint=16777215,a._tintedTexture=null,a._canvasUvs=null,a.refresh(!0),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.updateHorizontalVertices=function(){var e=this.vertices,t=this._topHeight+this._bottomHeight,i=this._height>t?1:this._height/t;e[9]=e[11]=e[13]=e[15]=this._topHeight*i,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight*i,e[25]=e[27]=e[29]=e[31]=this._height},t.prototype.updateVerticalVertices=function(){var e=this.vertices,t=this._leftWidth+this._rightWidth,i=this._width>t?1:this._width/t;e[2]=e[10]=e[18]=e[26]=this._leftWidth*i,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth*i,e[6]=e[14]=e[22]=e[30]=this._width},t.prototype._renderCanvas=function(e){var t=e.context,i=this.worldTransform,r=e.resolution,n=16777215!==this.tint,o=this._texture;n&&this._cachedTint!==this.tint&&(this._cachedTint=this.tint,this._tintedTexture=Lv.default.getTintedTexture(this,this.tint));var s=n?this._tintedTexture:o.baseTexture.source;this._canvasUvs||(this._canvasUvs=[0,0,0,0,0,0,0,0]);var a=this.vertices,h=this._canvasUvs,u=n?0:o.frame.x,l=n?0:o.frame.y,c=u+o.frame.width,d=l+o.frame.height;h[0]=u,h[1]=u+this._leftWidth,h[2]=c-this._rightWidth,h[3]=c,h[4]=l,h[5]=l+this._topHeight,h[6]=d-this._bottomHeight,h[7]=d;for(var f=0;f<8;f++)h[f]*=o.baseTexture.resolution;t.globalAlpha=this.worldAlpha,e.setBlendMode(this.blendMode),e.roundPixels?t.setTransform(i.a*r,i.b*r,i.c*r,i.d*r,i.tx*r|0,i.ty*r|0):t.setTransform(i.a*r,i.b*r,i.c*r,i.d*r,i.tx*r,i.ty*r);for(var p=0;p<3;p++)for(var g=0;g<3;g++){var m=2*g+8*p,y=Math.max(1,h[g+1]-h[g]),v=Math.max(1,h[p+5]-h[p+4]),b=Math.max(1,a[m+10]-a[m]),x=Math.max(1,a[m+11]-a[m+1]);t.drawImage(s,h[g],h[p+4],y,v,a[m],a[m+1],b,x)}},t.prototype._refresh=function(){e.prototype._refresh.call(this);var t=this.uvs,i=this._texture;this._origWidth=i.orig.width,this._origHeight=i.orig.height;var r=1/this._origWidth,n=1/this._origHeight;t[0]=t[8]=t[16]=t[24]=0,t[1]=t[3]=t[5]=t[7]=0,t[6]=t[14]=t[22]=t[30]=1,t[25]=t[27]=t[29]=t[31]=1,t[2]=t[10]=t[18]=t[26]=r*this._leftWidth,t[4]=t[12]=t[20]=t[28]=1-r*this._rightWidth,t[9]=t[11]=t[13]=t[15]=n*this._topHeight,t[17]=t[19]=t[21]=t[23]=1-n*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.dirty++,this.multiplyUvs()},Nv(t,[{key:"width",get:function(){return this._width},set:function(e){this._width=e,this._refresh()}},{key:"height",get:function(){return this._height},set:function(e){this._height=e,this._refresh()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(e){this._leftWidth=e,this._refresh()}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(e){this._rightWidth=e,this._refresh()}},{key:"topHeight",get:function(){return this._topHeight},set:function(e){this._topHeight=e,this._refresh()}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(e){this._bottomHeight=e,this._refresh()}}]),t}(Dv.default);Iv=Fv,Object.defineProperty(rv,"NineSlicePlane",{enumerable:!0,get:function(){return Hv(Rv).default}});var Bv,Uv,Gv={};i(Gv),e(Gv,"__esModule",(()=>Bv),(e=>Bv=e)),e(Gv,"default",(()=>Uv),(e=>Uv=e)),Bv=!0;var Wv=function(e){return e&&e.__esModule?e:{default:e}}(nv);var zv=function(e){function t(i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,i));return n.points=r,n.vertices=new Float32Array(4*r.length),n.uvs=new Float32Array(4*r.length),n.colors=new Float32Array(2*r.length),n.indices=new Uint16Array(2*r.length),n.autoUpdate=!0,n.refresh(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype._refresh=function(){var e=this.points;if(!(e.length<1)&&this._texture._uvs){this.vertices.length/4!==e.length&&(this.vertices=new Float32Array(4*e.length),this.uvs=new Float32Array(4*e.length),this.colors=new Float32Array(2*e.length),this.indices=new Uint16Array(2*e.length));var t=this.uvs,i=this.indices,r=this.colors;t[0]=0,t[1]=0,t[2]=0,t[3]=1,r[0]=1,r[1]=1,i[0]=0,i[1]=1;for(var n=e.length,o=1;o<n;o++){var s=4*o,a=o/(n-1);t[s]=a,t[s+1]=0,t[s+2]=a,t[s+3]=1,r[s=2*o]=1,r[s+1]=1,i[s=2*o]=s,i[s+1]=s+1}this.dirty++,this.indexDirty++,this.multiplyUvs(),this.refreshVertices()}},t.prototype.refreshVertices=function(){var e=this.points;if(!(e.length<1))for(var t=e[0],i=void 0,r=0,n=0,o=this.vertices,s=e.length,a=0;a<s;a++){var h=e[a],u=4*a;n=-((i=a<e.length-1?e[a+1]:h).x-t.x),r=i.y-t.y;var l=10*(1-a/(s-1));l>1&&(l=1);var c=Math.sqrt(r*r+n*n),d=this._texture.height/2;r/=c,n/=c,r*=d,n*=d,o[u]=h.x+r,o[u+1]=h.y+n,o[u+2]=h.x-r,o[u+3]=h.y-n,t=h}},t.prototype.updateTransform=function(){this.autoUpdate&&this.refreshVertices(),this.containerUpdateTransform()},t}(Wv.default);function Hv(e){return e&&e.__esModule?e:{default:e}}Uv=zv,Object.defineProperty(rv,"Rope",{enumerable:!0,get:function(){return Hv(Gv).default}});var Xv,Yv,Vv=lx(rv),qv={__esModule:!0},Kv={};i(Kv),e(Kv,"__esModule",(()=>Xv),(e=>Xv=e)),e(Kv,"default",(()=>Yv),(e=>Yv=e)),Xv=!0;var Zv=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),Jv=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(x);function Qv(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var eb=function(e){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500,r=arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16384,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Qv(this,t);var s=$v(this,e.call(this)),a=16384;return n>a&&(n=a),n>i&&(n=i),s._properties=[!1,!0,!1,!1,!1],s._maxSize=i,s._batchSize=n,s._glBuffers={},s._bufferUpdateIDs=[],s._updateID=0,s.interactiveChildren=!1,s.blendMode=Jv.BLEND_MODES.NORMAL,s.autoResize=o,s.roundPixels=!0,s.baseTexture=null,s.setProperties(r),s._tint=0,s.tintRgb=new Float32Array(4),s.tint=16777215,s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.setProperties=function(e){e&&(this._properties[0]="vertices"in e||"scale"in e?!!e.vertices||!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="tint"in e||"alpha"in e?!!e.tint||!!e.alpha:this._properties[4])},t.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},t.prototype.renderWebGL=function(e){var t=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",(function(){return t.onChildrenChange(0)}))),e.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))},t.prototype.onChildrenChange=function(e){for(var t=Math.floor(e/this._batchSize);this._bufferUpdateIDs.length<t;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[t]=++this._updateID},t.prototype.renderCanvas=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var t=e.context,i=this.worldTransform,r=!0,n=0,o=0,s=0,a=0;e.setBlendMode(this.blendMode),t.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var h=0;h<this.children.length;++h){var u=this.children[h];if(u.visible){var l=u._texture.frame;if(t.globalAlpha=this.worldAlpha*u.alpha,u.rotation%(2*Math.PI)==0)r&&(t.setTransform(i.a,i.b,i.c,i.d,i.tx*e.resolution,i.ty*e.resolution),r=!1),n=u.anchor.x*(-l.width*u.scale.x)+u.position.x+.5,o=u.anchor.y*(-l.height*u.scale.y)+u.position.y+.5,s=l.width*u.scale.x,a=l.height*u.scale.y;else{r||(r=!0),u.displayObjectUpdateTransform();var c=u.worldTransform;e.roundPixels?t.setTransform(c.a,c.b,c.c,c.d,c.tx*e.resolution|0,c.ty*e.resolution|0):t.setTransform(c.a,c.b,c.c,c.d,c.tx*e.resolution,c.ty*e.resolution),n=u.anchor.x*-l.width+.5,o=u.anchor.y*-l.height+.5,s=l.width,a=l.height}var d=u._texture.baseTexture.resolution;t.drawImage(u._texture.baseTexture.source,l.x*d,l.y*d,l.width*d,l.height*d,n*e.resolution,o*e.resolution,s*e.resolution,a*e.resolution)}}}},t.prototype.destroy=function(t){if(e.prototype.destroy.call(this,t),this._buffers)for(var i=0;i<this._buffers.length;++i)this._buffers[i].destroy();this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},Zv(t,[{key:"tint",get:function(){return this._tint},set:function(e){this._tint=e,ai(e,this.tintRgb)}}]),t}(Jv.Container);Yv=eb,Object.defineProperty(qv,"ParticleContainer",{enumerable:!0,get:function(){return wb(Kv).default}});var tb,ib,rb={};i(rb),e(rb,"__esModule",(()=>tb),(e=>tb=e)),e(rb,"default",(()=>ib),(e=>ib=e)),tb=!0;var nb,ob,sb=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(x),ab={};i(ab),e(ab,"__esModule",(()=>nb),(e=>nb=e)),e(ab,"default",(()=>ob),(e=>ob=e)),nb=!0;var hb=function(e){return e&&e.__esModule?e:{default:e}}(Qh);var ub=function(e){function t(i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,i,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","attribute vec2 aPositionCoord;","attribute float aRotation;","uniform mat3 projectionMatrix;","uniform vec4 uColor;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   vec2 v = vec2(x, y);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor * uColor;","}"].join("\n"),["varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor;","  gl_FragColor = color;","}"].join("\n")))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(hb.default);ob=ub;var lb,cb,db=bb(ab),fb={};i(fb),e(fb,"__esModule",(()=>lb),(e=>lb=e)),e(fb,"default",(()=>cb),(e=>cb=e)),lb=!0;var pb=mb(qe),gb=mb(Xh);function mb(e){return e&&e.__esModule?e:{default:e}}var yb=function(){function e(t,i,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.gl=t,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(var o=0;o<i.length;++o){var s=i[o];s={attribute:s.attribute,size:s.size,uploadFunction:s.uploadFunction,unsignedByte:s.unsignedByte,offset:s.offset},r[o]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return e.prototype.initBuffers=function(){var e=this.gl,t=0;this.indices=(0,gb.default)(this.size),this.indexBuffer=pb.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.dynamicStride=0;for(var i=0;i<this.dynamicProperties.length;++i){var r=this.dynamicProperties[i];r.offset=t,t+=r.size,this.dynamicStride+=r.size}var n=new ArrayBuffer(this.size*this.dynamicStride*16);this.dynamicData=new Float32Array(n),this.dynamicDataUint32=new Uint32Array(n),this.dynamicBuffer=pb.default.GLBuffer.createVertexBuffer(e,n,e.STREAM_DRAW);var o=0;this.staticStride=0;for(var s=0;s<this.staticProperties.length;++s){var a=this.staticProperties[s];a.offset=o,o+=a.size,this.staticStride+=a.size}var h=new ArrayBuffer(this.size*this.staticStride*16);this.staticData=new Float32Array(h),this.staticDataUint32=new Uint32Array(h),this.staticBuffer=pb.default.GLBuffer.createVertexBuffer(e,h,e.STATIC_DRAW),this.vao=new pb.default.VertexArrayObject(e).addIndex(this.indexBuffer);for(var u=0;u<this.dynamicProperties.length;++u){var l=this.dynamicProperties[u];l.unsignedByte?this.vao.addAttribute(this.dynamicBuffer,l.attribute,e.UNSIGNED_BYTE,!0,4*this.dynamicStride,4*l.offset):this.vao.addAttribute(this.dynamicBuffer,l.attribute,e.FLOAT,!1,4*this.dynamicStride,4*l.offset)}for(var c=0;c<this.staticProperties.length;++c){var d=this.staticProperties[c];d.unsignedByte?this.vao.addAttribute(this.staticBuffer,d.attribute,e.UNSIGNED_BYTE,!0,4*this.staticStride,4*d.offset):this.vao.addAttribute(this.staticBuffer,d.attribute,e.FLOAT,!1,4*this.staticStride,4*d.offset)}},e.prototype.uploadDynamic=function(e,t,i){for(var r=0;r<this.dynamicProperties.length;r++){var n=this.dynamicProperties[r];n.uploadFunction(e,t,i,n.unsignedByte?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,n.offset)}this.dynamicBuffer.upload()},e.prototype.uploadStatic=function(e,t,i){for(var r=0;r<this.staticProperties.length;r++){var n=this.staticProperties[r];n.uploadFunction(e,t,i,n.unsignedByte?this.staticDataUint32:this.staticData,this.staticStride,n.offset)}this.staticBuffer.upload()},e.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicBuffer.destroy(),this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer.destroy(),this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null},e}();cb=yb;var vb=bb(fb);function bb(e){return e&&e.__esModule?e:{default:e}}var xb=function(e){function t(i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,i));return r.shader=null,r.indexBuffer=null,r.properties=null,r.tempMatrix=new sb.Matrix,r.CONTEXT_UID=0,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.onContextChange=function(){var e=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new db.default(e),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,unsignedByte:!0,uploadFunction:this.uploadTint,offset:0}]},t.prototype.start=function(){this.renderer.bindShader(this.shader)},t.prototype.render=function(e){var t=e.children,i=e._maxSize,r=e._batchSize,n=this.renderer,o=t.length;if(0!==o){o>i&&(o=i);var s=e._glBuffers[n.CONTEXT_UID];s||(s=e._glBuffers[n.CONTEXT_UID]=this.generateBuffers(e));var a=t[0]._texture.baseTexture;this.renderer.setBlendMode(sb.utils.correctBlendMode(e.blendMode,a.premultipliedAlpha));var h=n.gl,u=e.worldTransform.copy(this.tempMatrix);u.prepend(n._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=u.toArray(!0),this.shader.uniforms.uColor=sb.utils.premultiplyRgba(e.tintRgb,e.worldAlpha,this.shader.uniforms.uColor,a.premultipliedAlpha),this.shader.uniforms.uSampler=n.bindTexture(a);for(var l=!1,c=0,d=0;c<o;c+=r,d+=1){var f=o-c;if(f>r&&(f=r),d>=s.length){if(!e.autoResize)break;s.push(this._generateOneMoreBuffer(e))}var p=s[d];p.uploadDynamic(t,c,f);var g=e._bufferUpdateIDs[d]||0;(l=l||p._updateID<g)&&(p._updateID=e._updateID,p.uploadStatic(t,c,f)),n.bindVao(p.vao),p.vao.draw(h.TRIANGLES,6*f)}}},t.prototype.generateBuffers=function(e){for(var t=this.renderer.gl,i=[],r=e._maxSize,n=e._batchSize,o=e._properties,s=0;s<r;s+=n)i.push(new vb.default(t,this.properties,o,n));return i},t.prototype._generateOneMoreBuffer=function(e){var t=this.renderer.gl,i=e._batchSize,r=e._properties;return new vb.default(t,this.properties,r,i)},t.prototype.uploadVertices=function(e,t,i,r,n,o){for(var s=0,a=0,h=0,u=0,l=0;l<i;++l){var c=e[t+l],d=c._texture,f=c.scale.x,p=c.scale.y,g=d.trim,m=d.orig;g?(s=(a=g.x-c.anchor.x*m.width)+g.width,h=(u=g.y-c.anchor.y*m.height)+g.height):(s=m.width*(1-c.anchor.x),a=m.width*-c.anchor.x,h=m.height*(1-c.anchor.y),u=m.height*-c.anchor.y),r[o]=a*f,r[o+1]=u*p,r[o+n]=s*f,r[o+n+1]=u*p,r[o+2*n]=s*f,r[o+2*n+1]=h*p,r[o+3*n]=a*f,r[o+3*n+1]=h*p,o+=4*n}},t.prototype.uploadPosition=function(e,t,i,r,n,o){for(var s=0;s<i;s++){var a=e[t+s].position;r[o]=a.x,r[o+1]=a.y,r[o+n]=a.x,r[o+n+1]=a.y,r[o+2*n]=a.x,r[o+2*n+1]=a.y,r[o+3*n]=a.x,r[o+3*n+1]=a.y,o+=4*n}},t.prototype.uploadRotation=function(e,t,i,r,n,o){for(var s=0;s<i;s++){var a=e[t+s].rotation;r[o]=a,r[o+n]=a,r[o+2*n]=a,r[o+3*n]=a,o+=4*n}},t.prototype.uploadUvs=function(e,t,i,r,n,o){for(var s=0;s<i;++s){var a=e[t+s]._texture._uvs;a?(r[o]=a.x0,r[o+1]=a.y0,r[o+n]=a.x1,r[o+n+1]=a.y1,r[o+2*n]=a.x2,r[o+2*n+1]=a.y2,r[o+3*n]=a.x3,r[o+3*n+1]=a.y3,o+=4*n):(r[o]=0,r[o+1]=0,r[o+n]=0,r[o+n+1]=0,r[o+2*n]=0,r[o+2*n+1]=0,r[o+3*n]=0,r[o+3*n+1]=0,o+=4*n)}},t.prototype.uploadTint=function(e,t,i,r,n,o){for(var s=0;s<i;++s){var a=e[t+s],h=a._texture.baseTexture.premultipliedAlpha,u=a.alpha,l=u<1&&h?wi(a._tintRGB,u):a._tintRGB+(255*u<<24);r[o]=l,r[o+n]=l,r[o+2*n]=l,r[o+3*n]=l,o+=4*n}},t.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),e.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},t}(sb.ObjectRenderer);function wb(e){return e&&e.__esModule?e:{default:e}}ib=xb,sb.WebGLRenderer.registerPlugin("particle",xb),Object.defineProperty(qv,"ParticleRenderer",{enumerable:!0,get:function(){return wb(rb).default}});var _b,Tb,Sb=lx(qv),Eb={__esModule:!0},Ob={};i(Ob),e(Ob,"__esModule",(()=>_b),(e=>_b=e)),e(Ob,"default",(()=>Tb),(e=>Tb=e)),_b=!0;var kb,Mb,Cb=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(x),Pb={};i(Pb),e(Pb,"__esModule",(()=>kb),(e=>kb=e)),e(Pb,"default",(()=>Mb),(e=>Mb=e)),kb=!0;var Ab,Ib,Rb=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(x),Nb={};i(Nb),e(Nb,"__esModule",(()=>Ab),(e=>Ab=e)),e(Nb,"default",(()=>Ib),(e=>Ib=e)),Ab=!0;var Db=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maxItemsPerFrame=t,this.itemsLeft=0}return e.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},e.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},e}();Ib=Db;var Lb=function(e){return e&&e.__esModule?e:{default:e}}(Nb);var jb=Rb.ticker.shared;Rb.settings.UPLOADS_PER_FRAME=4;var Fb=function(){function e(t){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.limiter=new Lb.default(Rb.settings.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){i.queue&&i.prepareItems()},this.registerFindHook(Hb),this.registerFindHook(Xb),this.registerFindHook(Bb),this.registerFindHook(Ub),this.registerFindHook(Gb),this.registerUploadHook(Wb),this.registerUploadHook(zb)}return e.prototype.upload=function(e,t){"function"==typeof e&&(t=e,e=null),e&&this.add(e),this.queue.length?(t&&this.completes.push(t),this.ticking||(this.ticking=!0,jb.addOnce(this.tick,this,Rb.UPDATE_PRIORITY.UTILITY))):t&&t()},e.prototype.tick=function(){setTimeout(this.delayedTick,0)},e.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var e=this.queue[0],t=!1;if(e&&!e._destroyed)for(var i=0,r=this.uploadHooks.length;i<r;i++)if(this.uploadHooks[i](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}t||this.queue.shift()}if(this.queue.length)jb.addOnce(this.tick,this,Rb.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;var n=this.completes.slice(0);this.completes.length=0;for(var o=0,s=n.length;o<s;o++)n[o]()}},e.prototype.registerFindHook=function(e){return e&&this.addHooks.push(e),this},e.prototype.registerUploadHook=function(e){return e&&this.uploadHooks.push(e),this},e.prototype.add=function(e){for(var t=0,i=this.addHooks.length;t<i&&!this.addHooks[t](e,this.queue);t++);if(e instanceof Rb.Container)for(var r=e.children.length-1;r>=0;r--)this.add(e.children[r]);return this},e.prototype.destroy=function(){this.ticking&&jb.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},e}();function Bb(e,t){var i=!1;if(e&&e._textures&&e._textures.length)for(var r=0;r<e._textures.length;r++)if(e._textures[r]instanceof Rb.Texture){var n=e._textures[r].baseTexture;-1===t.indexOf(n)&&(t.push(n),i=!0)}return i}function Ub(e,t){return e instanceof Rb.BaseTexture&&(-1===t.indexOf(e)&&t.push(e),!0)}function Gb(e,t){if(e._texture&&e._texture instanceof Rb.Texture){var i=e._texture.baseTexture;return-1===t.indexOf(i)&&t.push(i),!0}return!1}function Wb(e,t){return t instanceof Rb.Text&&(t.updateText(!0),!0)}function zb(e,t){if(t instanceof Rb.TextStyle){var i=t.toFontString();return Rb.TextMetrics.measureFont(i),!0}return!1}function Hb(e,t){if(e instanceof Rb.Text){-1===t.indexOf(e.style)&&t.push(e.style),-1===t.indexOf(e)&&t.push(e);var i=e._texture.baseTexture;return-1===t.indexOf(i)&&t.push(i),!0}return!1}function Xb(e,t){return e instanceof Rb.TextStyle&&(-1===t.indexOf(e)&&t.push(e),!0)}Mb=Fb;var Yb=function(e){return e&&e.__esModule?e:{default:e}}(Pb);var Vb=function(e){function t(i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,i));return r.uploadHookHelper=r.renderer,r.registerFindHook(Zb),r.registerUploadHook(qb),r.registerUploadHook(Kb),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(Yb.default);function qb(e,t){return t instanceof Cb.BaseTexture&&(t._glTextures[e.CONTEXT_UID]||e.textureManager.updateTexture(t),!0)}function Kb(e,t){return t instanceof Cb.Graphics&&((t.dirty||t.clearDirty||!t._webGL[e.plugins.graphics.CONTEXT_UID])&&e.plugins.graphics.updateGraphics(t),!0)}function Zb(e,t){return e instanceof Cb.Graphics&&(t.push(e),!0)}Tb=Vb,Cb.WebGLRenderer.registerPlugin("prepare",Vb),Object.defineProperty(Eb,"webgl",{enumerable:!0,get:function(){return hx(Ob).default}});var Jb,Qb,$b={};i($b),e($b,"__esModule",(()=>Jb),(e=>Jb=e)),e($b,"default",(()=>Qb),(e=>Qb=e)),Jb=!0;var ex=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}(x),tx=function(e){return e&&e.__esModule?e:{default:e}}(Pb);var ix=function(e){function t(i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,i));return r.uploadHookHelper=r,r.canvas=document.createElement("canvas"),r.canvas.width=16,r.canvas.height=16,r.ctx=r.canvas.getContext("2d"),r.registerUploadHook(rx),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.destroy=function(){e.prototype.destroy.call(this),this.ctx=null,this.canvas=null},t}(tx.default);function rx(e,t){if(t instanceof ex.BaseTexture){var i=t.source,r=0===i.width?e.canvas.width:Math.min(e.canvas.width,i.width),n=0===i.height?e.canvas.height:Math.min(e.canvas.height,i.height);return e.ctx.drawImage(i,0,0,r,n,0,0,e.canvas.width,e.canvas.height),!0}return!1}Qb=ix,ex.CanvasRenderer.registerPlugin("prepare",ix),Object.defineProperty(Eb,"canvas",{enumerable:!0,get:function(){return hx($b).default}}),Object.defineProperty(Eb,"BasePrepare",{enumerable:!0,get:function(){return hx(Pb).default}}),Object.defineProperty(Eb,"CountLimiter",{enumerable:!0,get:function(){return hx(Nb).default}});var nx,ox,sx={};i(sx),e(sx,"__esModule",(()=>nx),(e=>nx=e)),e(sx,"default",(()=>ox),(e=>ox=e)),nx=!0;var ax=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maxMilliseconds=t,this.frameStart=0}return e.prototype.beginFrame=function(){this.frameStart=Date.now()},e.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},e}();function hx(e){return e&&e.__esModule?e:{default:e}}ox=ax,Object.defineProperty(Eb,"TimeLimiter",{enumerable:!0,get:function(){return hx(sx).default}});var ux=lx(Eb);function lx(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}x.utils.mixins.performMixins();var cx=iv.shared||null;s.accessibility=_f,s.extract=Df,s.extras=Mp,s.filters=Jg,s.interaction=Cm,s.loaders=iv,s.mesh=Vv,s.particles=Sb,s.prepare=ux,s.loader=cx,"function"==typeof hf.default&&(0,hf.default)(s),t.PIXI=s;var dx={};!function(){function e(e,t,i){return e.call.apply(e.bind,arguments)}function t(e,t,i){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),e.apply(t,i)}}return function(){return e.apply(t,arguments)}}function i(r,n,o){return(i=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?e:t).apply(null,arguments)}var r=Date.now||function(){return+new Date};function n(e,t){this.a=e,this.o=t||e,this.c=this.o.document}var o=!!window.FontFace;function s(e,t,i,r){if(t=e.c.createElement(t),i)for(var n in i)i.hasOwnProperty(n)&&("style"==n?t.style.cssText=i[n]:t.setAttribute(n,i[n]));return r&&t.appendChild(e.c.createTextNode(r)),t}function a(e,t,i){(e=e.c.getElementsByTagName(t)[0])||(e=document.documentElement),e.insertBefore(i,e.lastChild)}function h(e){e.parentNode&&e.parentNode.removeChild(e)}function u(e,t,i){t=t||[],i=i||[];for(var r=e.className.split(/\s+/),n=0;n<t.length;n+=1){for(var o=!1,s=0;s<r.length;s+=1)if(t[n]===r[s]){o=!0;break}o||r.push(t[n])}for(t=[],n=0;n<r.length;n+=1){for(o=!1,s=0;s<i.length;s+=1)if(r[n]===i[s]){o=!0;break}o||t.push(r[n])}e.className=t.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function l(e,t){for(var i=e.className.split(/\s+/),r=0,n=i.length;r<n;r++)if(i[r]==t)return!0;return!1}function c(e,t,i){function r(){l&&n&&h&&(l(u),l=null)}t=s(e,"link",{rel:"stylesheet",href:t,media:"all"});var n=!1,h=!0,u=null,l=i||null;o?(t.onload=function(){n=!0,r()},t.onerror=function(){n=!0,u=Error("Stylesheet failed to load"),r()}):setTimeout((function(){n=!0,r()}),0),a(e,"head",t)}function d(e,t,i,r){var n=e.c.getElementsByTagName("head")[0];if(n){var o=s(e,"script",{src:t}),a=!1;return o.onload=o.onreadystatechange=function(){a||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(a=!0,i&&i(null),o.onload=o.onreadystatechange=null,"HEAD"==o.parentNode.tagName&&n.removeChild(o))},n.appendChild(o),setTimeout((function(){a||(a=!0,i&&i(Error("Script load timeout")))}),r||5e3),o}return null}function f(){this.a=0,this.c=null}function p(e){return e.a++,function(){e.a--,m(e)}}function g(e,t){e.c=t,m(e)}function m(e){0==e.a&&e.c&&(e.c(),e.c=null)}function y(e){this.a=e||"-"}function v(e,t){this.c=e,this.f=4,this.a="n";var i=(t||"n4").match(/^([nio])([1-9])$/i);i&&(this.a=i[1],this.f=parseInt(i[2],10))}function b(e){var t=[];e=e.split(/,\s*/);for(var i=0;i<e.length;i++){var r=e[i].replace(/['"]/g,"");-1!=r.indexOf(" ")||/^\d/.test(r)?t.push("'"+r+"'"):t.push(r)}return t.join(",")}function x(e){return e.a+e.f}function w(e){var t="normal";return"o"===e.a?t="oblique":"i"===e.a&&(t="italic"),t}function _(e){var t=4,i="n",r=null;return e&&((r=e.match(/(normal|oblique|italic)/i))&&r[1]&&(i=r[1].substr(0,1).toLowerCase()),(r=e.match(/([1-9]00|normal|bold)/i))&&r[1]&&(/bold/i.test(r[1])?t=7:/[1-9]00/.test(r[1])&&(t=parseInt(r[1].substr(0,1),10)))),i+t}function T(e,t){this.c=e,this.f=e.o.document.documentElement,this.h=t,this.a=new y("-"),this.j=!1!==t.events,this.g=!1!==t.classes}function S(e){if(e.g){var t=l(e.f,e.a.c("wf","active")),i=[],r=[e.a.c("wf","loading")];t||i.push(e.a.c("wf","inactive")),u(e.f,i,r)}E(e,"inactive")}function E(e,t,i){e.j&&e.h[t]&&(i?e.h[t](i.c,x(i)):e.h[t]())}function O(){this.c={}}function k(e,t){this.c=e,this.f=t,this.a=s(this.c,"span",{"aria-hidden":"true"},this.f)}function M(e){a(e.c,"body",e.a)}function C(e){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+b(e.c)+";font-style:"+w(e)+";font-weight:"+e.f+"00;"}function P(e,t,i,r,n,o){this.g=e,this.j=t,this.a=r,this.c=i,this.f=n||3e3,this.h=o||void 0}function A(e,t,i,r,n,o,s){this.v=e,this.B=t,this.c=i,this.a=r,this.s=s||"BESbswy",this.f={},this.w=n||3e3,this.u=o||null,this.m=this.j=this.h=this.g=null,this.g=new k(this.c,this.s),this.h=new k(this.c,this.s),this.j=new k(this.c,this.s),this.m=new k(this.c,this.s),e=C(e=new v(this.a.c+",serif",x(this.a))),this.g.a.style.cssText=e,e=C(e=new v(this.a.c+",sans-serif",x(this.a))),this.h.a.style.cssText=e,e=C(e=new v("serif",x(this.a))),this.j.a.style.cssText=e,e=C(e=new v("sans-serif",x(this.a))),this.m.a.style.cssText=e,M(this.g),M(this.h),M(this.j),M(this.m)}y.prototype.c=function(e){for(var t=[],i=0;i<arguments.length;i++)t.push(arguments[i].replace(/[\W_]+/g,"").toLowerCase());return t.join(this.a)},P.prototype.start=function(){var e=this.c.o.document,t=this,i=r(),n=new Promise((function(n,o){!function s(){var a;r()-i>=t.f?o():e.fonts.load((a=t.a,w(a)+" "+a.f+"00 300px "+b(a.c)),t.h).then((function(e){1<=e.length?n():setTimeout(s,25)}),(function(){o()}))}()})),o=null,s=new Promise((function(e,i){o=setTimeout(i,t.f)}));Promise.race([s,n]).then((function(){o&&(clearTimeout(o),o=null),t.g(t.a)}),(function(){t.j(t.a)}))};var I={D:"serif",C:"sans-serif"},R=null;function N(){if(null===R){var e=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);R=!!e&&(536>parseInt(e[1],10)||536===parseInt(e[1],10)&&11>=parseInt(e[2],10))}return R}function D(e,t,i){for(var r in I)if(I.hasOwnProperty(r)&&t===e.f[I[r]]&&i===e.f[I[r]])return!0;return!1}function L(e){var t,n=e.g.a.offsetWidth,o=e.h.a.offsetWidth;(t=n===e.f.serif&&o===e.f["sans-serif"])||(t=N()&&D(e,n,o)),t?r()-e.A>=e.w?N()&&D(e,n,o)&&(null===e.u||e.u.hasOwnProperty(e.a.c))?j(e,e.v):j(e,e.B):function(e){setTimeout(i((function(){L(this)}),e),50)}(e):j(e,e.v)}function j(e,t){setTimeout(i((function(){h(this.g.a),h(this.h.a),h(this.j.a),h(this.m.a),t(this.a)}),e),0)}function F(e,t,i){this.c=e,this.a=t,this.f=0,this.m=this.j=!1,this.s=i}A.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=r(),L(this)};var B=null;function U(e){0==--e.f&&e.j&&(e.m?((e=e.a).g&&u(e.f,[e.a.c("wf","active")],[e.a.c("wf","loading"),e.a.c("wf","inactive")]),E(e,"active")):S(e.a))}function G(e){this.j=e,this.a=new O,this.h=0,this.f=this.g=!0}function W(e,t,r,n,o){var s=0==--e.h;(e.f||e.g)&&setTimeout((function(){var e=o||null,a=n||{};if(0===r.length&&s)S(t.a);else{t.f+=r.length,s&&(t.j=s);var h,l=[];for(h=0;h<r.length;h++){var c=r[h],d=a[c.c],f=t.a,p=c;if(f.g&&u(f.f,[f.a.c("wf",p.c,x(p).toString(),"loading")]),E(f,"fontloading",p),f=null,null===B)if(window.FontFace){p=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent);var g=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);B=p?42<parseInt(p[1],10):!g}else B=!1;f=B?new P(i(t.g,t),i(t.h,t),t.c,c,t.s,d):new A(i(t.g,t),i(t.h,t),t.c,c,t.s,e,d),l.push(f)}for(h=0;h<l.length;h++)l[h].start()}}),0)}function z(e,t){this.c=e,this.a=t}function H(e,t){this.c=e,this.a=t}function X(e,t){this.c=e||Y,this.a=[],this.f=[],this.g=t||""}F.prototype.g=function(e){var t=this.a;t.g&&u(t.f,[t.a.c("wf",e.c,x(e).toString(),"active")],[t.a.c("wf",e.c,x(e).toString(),"loading"),t.a.c("wf",e.c,x(e).toString(),"inactive")]),E(t,"fontactive",e),this.m=!0,U(this)},F.prototype.h=function(e){var t=this.a;if(t.g){var i=l(t.f,t.a.c("wf",e.c,x(e).toString(),"active")),r=[],n=[t.a.c("wf",e.c,x(e).toString(),"loading")];i||r.push(t.a.c("wf",e.c,x(e).toString(),"inactive")),u(t.f,r,n)}E(t,"fontinactive",e),U(this)},G.prototype.load=function(e){this.c=new n(this.j,e.context||this.j),this.g=!1!==e.events,this.f=!1!==e.classes,function(e,t,i){var r=[],n=i.timeout;!function(e){e.g&&u(e.f,[e.a.c("wf","loading")]),E(e,"loading")}(t);r=function(e,t,i){var r,n=[];for(r in t)if(t.hasOwnProperty(r)){var o=e.c[r];o&&n.push(o(t[r],i))}return n}(e.a,i,e.c);var o=new F(e.c,t,n);for(e.h=r.length,t=0,i=r.length;t<i;t++)r[t].load((function(t,i,r){W(e,o,t,i,r)}))}(this,new T(this.c,e),e)},z.prototype.load=function(e){function t(){if(o["__mti_fntLst"+r]){var i,n=o["__mti_fntLst"+r](),s=[];if(n)for(var a=0;a<n.length;a++){var h=n[a].fontfamily;null!=n[a].fontStyle&&null!=n[a].fontWeight?(i=n[a].fontStyle+n[a].fontWeight,s.push(new v(h,i))):s.push(new v(h))}e(s)}else setTimeout((function(){t()}),50)}var i=this,r=i.a.projectId,n=i.a.version;if(r){var o=i.c.o;d(this.c,(i.a.api||"https://fast.fonts.net/jsapi")+"/"+r+".js"+(n?"?v="+n:""),(function(n){n?e([]):(o["__MonotypeConfiguration__"+r]=function(){return i.a},t())})).id="__MonotypeAPIScript__"+r}else e([])},H.prototype.load=function(e){var t,i,r=this.a.urls||[],n=this.a.families||[],o=this.a.testStrings||{},s=new f;for(t=0,i=r.length;t<i;t++)c(this.c,r[t],p(s));var a=[];for(t=0,i=n.length;t<i;t++)if((r=n[t].split(":"))[1])for(var h=r[1].split(","),u=0;u<h.length;u+=1)a.push(new v(r[0],h[u]));else a.push(new v(r[0]));g(s,(function(){e(a,o)}))};var Y="https://fonts.googleapis.com/css";function V(e){this.f=e,this.a=[],this.c={}}var q={latin:"BESbswy","latin-ext":"",cyrillic:"",greek:"",khmer:"",Hanuman:""},K={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},Z={i:"i",italic:"i",n:"n",normal:"n"},J=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function Q(e,t){this.c=e,this.a=t}var $={Arimo:!0,Cousine:!0,Tinos:!0};function ee(e,t){this.c=e,this.a=t}function te(e,t){this.c=e,this.f=t,this.a=[]}Q.prototype.load=function(e){var t=new f,i=this.c,r=new X(this.a.api,this.a.text),n=this.a.families;!function(e,t){for(var i=t.length,r=0;r<i;r++){var n=t[r].split(":");3==n.length&&e.f.push(n.pop());var o="";2==n.length&&""!=n[1]&&(o=":"),e.a.push(n.join(o))}}(r,n);var o=new V(n);!function(e){for(var t=e.f.length,i=0;i<t;i++){var r=e.f[i].split(":"),n=r[0].replace(/\+/g," "),o=["n4"];if(2<=r.length){var s;if(s=[],a=r[1])for(var a,h=(a=a.split(",")).length,u=0;u<h;u++){var l;if((l=a[u]).match(/^[\w-]+$/))if(null==(c=J.exec(l.toLowerCase())))l="";else{if(l=null==(l=c[2])||""==l?"n":Z[l],null==(c=c[1])||""==c)c="4";else var c=K[c]||(isNaN(c)?"4":c.substr(0,1));l=[l,c].join("")}else l="";l&&s.push(l)}0<s.length&&(o=s),3==r.length&&(s=[],0<(r=(r=r[2])?r.split(","):s).length&&(r=q[r[0]])&&(e.c[n]=r))}for(e.c[n]||(r=q[n])&&(e.c[n]=r),r=0;r<o.length;r+=1)e.a.push(new v(n,o[r]))}}(o),c(i,function(e){if(0==e.a.length)throw Error("No fonts to load!");if(-1!=e.c.indexOf("kit="))return e.c;for(var t=e.a.length,i=[],r=0;r<t;r++)i.push(e.a[r].replace(/ /g,"+"));return t=e.c+"?family="+i.join("%7C"),0<e.f.length&&(t+="&subset="+e.f.join(",")),0<e.g.length&&(t+="&text="+encodeURIComponent(e.g)),t}(r),p(t)),g(t,(function(){e(o.a,o.c,$)}))},ee.prototype.load=function(e){var t=this.a.id,i=this.c.o;t?d(this.c,(this.a.api||"https://use.typekit.net")+"/"+t+".js",(function(t){if(t)e([]);else if(i.Typekit&&i.Typekit.config&&i.Typekit.config.fn){t=i.Typekit.config.fn;for(var r=[],n=0;n<t.length;n+=2)for(var o=t[n],s=t[n+1],a=0;a<s.length;a++)r.push(new v(o,s[a]));try{i.Typekit.load({events:!1,classes:!1,async:!0})}catch(e){}e(r)}}),2e3):e([])},te.prototype.load=function(e){var t=this.f.id,i=this.c.o,r=this;t?(i.__webfontfontdeckmodule__||(i.__webfontfontdeckmodule__={}),i.__webfontfontdeckmodule__[t]=function(t,i){for(var n=0,o=i.fonts.length;n<o;++n){var s=i.fonts[n];r.a.push(new v(s.name,_("font-weight:"+s.weight+";font-style:"+s.style)))}e(r.a)},d(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+function(e){return e.o.location.hostname||e.a.location.hostname}(this.c)+"/"+t+".js",(function(t){t&&e([])}))):e([])};var ie=new G(window);ie.a.c.custom=function(e,t){return new H(t,e)},ie.a.c.fontdeck=function(e,t){return new te(t,e)},ie.a.c.monotype=function(e,t){return new z(t,e)},ie.a.c.typekit=function(e,t){return new ee(t,e)},ie.a.c.google=function(e,t){return new Q(t,e)};var re={load:i(ie.load,ie)};"function"==typeof define&&define.amd?define((function(){return re})):dx?dx=re:(window.WebFont=re,window.WebFontConfig&&ie.load(window.WebFontConfig))}();let fx={align:"left",breakWords:!1,dropShadow:!1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"#000000",dropShadowDistance:5,fill:"black",fillGradientType:s.TEXT_GRADIENT.LINEAR_VERTICAL,fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",valign:"baseline",wordWrap:!1,wordWrapWidth:100};class px{get textStyles(){return this._textStyles}set textStyles(e){this._textStyles={},this._textStyles.default=Object.assign({},fx);for(let t in e)"default"===t?Object.assign(this.textStyles.default,e[t]):this.textStyles[t]=Object.assign({},e[t]);this.defaultStyle=new s.TextStyle(this.textStyles.default)}setTagStyle(e,t){e in this.textStyles?Object.assign(this.textStyles[e],t):this.textStyles[e]=Object.assign({},t),this.defaultStyle=new s.TextStyle(this.textStyles.default)}deleteTagStyle(e){"default"===e?this.textStyles.default=Object.assign({},fx):delete this.textStyles[e],this.defaultStyle=new s.TextStyle(this.textStyles.default)}constructor(e,t){this.textStyles=e,this.canvas=t||document.createElement("canvas"),this.context=this.canvas.getContext("2d")}createTextData(e,t,i){return{text:e,style:t,width:0,height:0,fontProperties:void 0,tag:i}}getDropShadowPadding(){let e=0,t=0;return Object.keys(this.textStyles).forEach((i=>{let{dropShadowDistance:r,dropShadowBlur:n}=this.textStyles[i];e=Math.max(e,r||0),t=Math.max(t,n||0)})),e+t}getPropertyRegex(){return new RegExp("([A-Za-z0-9_\\-]+)=(?:\"((?:[^\"]+|\\\\\")*)\"|'((?:[^']+|\\\\')*)')","g")}getTagRegex(e,t){let i=Object.keys(this.textStyles).join("|");i=e?`(${i})`:`(?:${i})`;let r=`<${i}(?:\\s+[A-Za-z0-9_\\-]+=(?:"(?:[^"]+|\\\\")*"|'(?:[^']+|\\\\')*'))*\\s*>|</${i}\\s*>`;return t&&(r=`(${r})`),new RegExp(r,"g")}getFontString(e){return new s.TextStyle(e).toFontString()}_getTextDataPerLine(e){let t=[],i=this.getTagRegex(!0,!1),r=[Object.assign({},this.textStyles.default)],n=[{name:"default",properties:{}}];for(let o=0;o<e.length;o++){let s,a=[],h=[];for(;s=i.exec(e[o]);)h.push(s);if(0===h.length)a.push(this.createTextData(e[o],r[r.length-1],n[n.length-1]));else{let t=0;for(let i=0;i<h.length;i++){if(h[i].index>t&&a.push(this.createTextData(e[o].substring(t,h[i].index),r[r.length-1],n[n.length-1])),"/"===h[i][0][1])r.length>1&&(r.pop(),n.pop());else{r.push(Object.assign({},r[r.length-1],this.textStyles[h[i][1]]));let e,t={},o=this.getPropertyRegex();for(;e=o.exec(h[i][0]);)t[e[1]]=e[2]||e[3];n.push({name:h[i][1],properties:t})}t=h[i].index+h[i][0].length}t<e[o].length&&a.push(this.createTextData(e[o].substring(t),r[r.length-1],n[n.length-1]))}t.push(a)}return t}wordWrap(e){let t="",i=this.getTagRegex(!0,!0);const r=e.split("\n"),n=this.defaultStyle.wordWrapWidth;let o=[Object.assign({},this.textStyles.default)];this.context.font=this.getFontString(this.textStyles.default);for(let e=0;e<r.length;e++){let s=n;const a=r[e].split(i);let h=!0;for(let e=0;e<a.length;e++)if(i.test(a[e]))t+=a[e],"/"===a[e][1]?(e+=2,o.pop()):(e++,o.push(Object.assign({},o[o.length-1],this.textStyles[a[e]])),e++),this.context.font=this.getFontString(o[o.length-1]);else{const i=a[e].split(" ");for(let e=0;e<i.length;e++){const r=this.context.measureText(i[e]).width;if(this.defaultStyle.breakWords&&r>s){const r=i[e].split("");e>0&&(t+=" ",s-=this.context.measureText(" ").width);for(let e=0;e<r.length;e++){const i=this.context.measureText(r[e]).width;i>s?(t+=`\n${r[e]}`,s=n-i):(t+=r[e],s-=i)}}else if(this.defaultStyle.breakWords)t+=i[e],s-=r;else{const o=r+(e>0?this.context.measureText(" ").width:0);o>s?(h||(t+="\n"),t+=i[e],s=n-r):(s-=o,e>0&&(t+=" "),t+=i[e])}h=!1}}e<r.length-1&&(t+="\n")}return t}formatText(e){let t={text:e,bottomMargin:0,width:0,height:0,padding:this.defaultStyle.padding+this.getDropShadowPadding(),hitboxes:[],drawingData:[]},i=this.textStyles,r=e;this.defaultStyle.wordWrap&&(r=this.wordWrap(e));let n=r.split(/(?:\r\n|\r|\n)/),o=this._getTextDataPerLine(n),a=[],h=[],u=[],l=0,c=0;for(let e=0;e<n.length;e++){let i=0,r=0,n=0;for(let a=0;a<o[e].length;a++){let h=o[e][a].style,u=h.extraLineHeight||0;h.bottomMargin&&(t.bottomMargin=Math.max(t.bottomMargin,h.bottomMargin)),h.wordWrap&&h.wordWrapWidth>0&&(c=Math.max(c,h.wordWrapWidth)),this.context.font=this.getFontString(h),o[e][a].width=this.context.measureText(o[e][a].text).width,0!==o[e][a].text.length&&(o[e][a].width+=(o[e][a].text.length-1)*h.letterSpacing,a>0&&(i+=h.letterSpacing/2),a<o[e].length-1&&(i+=h.letterSpacing/2)),i+=o[e][a].width,o[e][a].fontProperties=s.TextMetrics.measureFont(this.context.font),o[e][a].height=o[e][a].fontProperties.fontSize,"number"==typeof h.valign?(r=Math.min(r,h.valign-u-o[e][a].fontProperties.descent),n=Math.max(n,h.valign+o[e][a].fontProperties.ascent)):(r=Math.min(r,-u-o[e][a].fontProperties.descent),n=Math.max(n,o[e][a].fontProperties.ascent))}a[e]=i,h[e]=r,u[e]=n,l=Math.max(l,i)}l=Math.max(l,c);let d=Object.keys(i).map((e=>i[e])).reduce(((e,t)=>Math.max(e,t.strokeThickness||0)),0),f=this.getDropShadowPadding(),p=u.reduce(((e,t)=>e+t),0)-h.reduce(((e,t)=>e+t),0);t.width=l+2*d+2*f,t.height=p+2*d+2*f,this.context.textBaseline="alphabetic",this.context.lineJoin="round";let g=f+d;for(let e=0;e<o.length;e++){let i,r=o[e];switch((o[e].length>0?o[e][0].style:this.defaultStyle).align){case"left":i=f+d;break;case"center":i=f+d+(l-a[e])/2;break;case"right":i=f+d+l-a[e]}for(let n=0;n<r.length;n++){let{style:o,text:s,fontProperties:a,width:l,height:c,tag:d}=r[n],f=g+a.ascent;switch(o.valign){case"top":break;case"baseline":f+=u[e]-a.ascent;break;case"middle":f+=(u[e]-h[e]-a.ascent-a.descent)/2;break;case"bottom":f+=u[e]-h[e]-a.ascent-a.descent;break;default:f+=u[e]-a.ascent-o.valign}if(0===o.letterSpacing)t.drawingData.push({text:s,style:o,x:i,y:f,width:l,ascent:a.ascent,descent:a.descent,tag:d}),i+=r[n].width;else{this.context.font=this.getFontString(r[n].style);for(let e=0;e<s.length;e++){(e>0||n>0)&&(i+=o.letterSpacing/2);let h=this.context.measureText(s.charAt(e)).width;t.drawingData.push({text:s.charAt(e),style:o,x:i,y:f,width:h,ascent:a.ascent,descent:a.descent,tag:d}),i+=h,(e<s.length-1||n<r.length-1)&&(i+=o.letterSpacing/2)}}}g+=u[e]-h[e]}return t.drawingData.forEach((({style:e,text:i,x:r,y:n,width:o,ascent:a,descent:h,tag:u})=>{let l=-this.defaultStyle.padding-this.getDropShadowPadding(),c=new s.Rectangle(r+l,n-a+l,o,a+h);t.hitboxes.push({tag:u,hitbox:c})})),t}}const gx=["pointerover","pointerenter","pointerdown","pointermove","pointerup","pointercancel","pointerout","pointerleave","gotpointercapture","lostpointercapture","mouseover","mouseenter","mousedown","mousemove","mouseup","mousecancel","mouseout","mouseleave","touchover","touchenter","touchdown","touchmove","touchup","touchcancel","touchout","touchleave"];class mx extends s.Text{static debugOptions={spans:{enabled:!1,baseline:"#44BB44",top:"#BB4444",bottom:"#4444BB",bounding:"rgba(255, 255, 255, 0.1)",text:!0},objects:{enabled:!1,bounding:"rgba(255, 255, 255, 0.05)",text:!0}};constructor(e,t){super(e),this.formatter=new px(t,this.canvas),gx.forEach((e=>{this.on(e,(e=>this.handleInteraction(e)))}))}handleInteraction(e){let t=e,i=e.data.getLocalPosition(this),r=this.hitboxes.reduce(((e,t)=>void 0!==e?e:t.hitbox.contains(i.x,i.y)?t:void 0),void 0);t.targetTag=void 0===r?void 0:r.tag}get textStyles(){return this.formatter.textStyles}set textStyles(e){this.formatter.textStyles=e,this.dirty=!0}setTagStyle(e,t){this.formatter.setTagStyle(e,t),this.dirty=!0}deleteTagStyle(e){this.formatter.deleteTagStyle(e),this.dirty=!0}getFontString(e){return new s.TextStyle(e).toFontString()}updateText(){if(!this.dirty)return;this.formatter.context=this.context;let e=this.formatter.formatText(this.text);this.updateFormattedText(e)}updateFormattedText(e){this.hitboxes=[],this.padding=e.padding,this.texture.baseTexture.resolution=this.resolution;let t=e.width,i=e.height;this.canvas.width=t*this.resolution,this.canvas.height=i*this.resolution,this.context.scale(this.resolution,this.resolution),this.context.textBaseline="alphabetic",this.context.lineJoin="round",this.context.save(),e.drawingData.forEach((({style:e,text:t,x:i,y:r})=>{if(!e.dropShadow)return;this.context.font=this.getFontString(e);let n=e.dropShadowColor;"number"==typeof n&&(n=s.utils.hex2string(n)),this.context.shadowColor=n,this.context.shadowBlur=e.dropShadowBlur,this.context.shadowOffsetX=Math.cos(e.dropShadowAngle)*e.dropShadowDistance*this.resolution,this.context.shadowOffsetY=Math.sin(e.dropShadowAngle)*e.dropShadowDistance*this.resolution,this.context.fillText(t,i,r)})),this.context.restore(),e.drawingData.forEach((({style:e,text:t,x:i,y:r,width:n,ascent:o,descent:a,tag:h})=>{if(void 0===e.stroke||!e.strokeThickness)return;this.context.font=this.getFontString(e);let u=e.stroke;"number"==typeof u&&(u=s.utils.hex2string(u)),this.context.strokeStyle=u,this.context.lineWidth=e.strokeThickness,this.context.strokeText(t,i,r)})),e.drawingData.forEach((({style:e,text:t,x:i,y:r,width:n,ascent:o,descent:a,tag:h})=>{if(void 0===e.fill)return;this.context.font=this.getFontString(e);let u=e.fill;if("number"==typeof u)u=s.utils.hex2string(u);else if(Array.isArray(u))for(let e=0;e<u.length;e++){let t=u[e];"number"==typeof t&&(u[e]=s.utils.hex2string(t))}this.context.fillStyle=this._generateFillStyle(new s.TextStyle(e),[t]),this.context.fillText(t,i,r)})),e.drawingData.forEach((({style:t,text:i,x:r,y:n,width:o,ascent:a,descent:h,tag:u})=>{let l=-e.padding,c=new s.Rectangle(r+l,n-a+l,o,a+h);this.hitboxes.push({tag:u,hitbox:c}),(void 0===t.debug?mx.debugOptions.spans.enabled:t.debug)&&(this.context.lineWidth=1,mx.debugOptions.spans.bounding&&(this.context.fillStyle=mx.debugOptions.spans.bounding,this.context.strokeStyle=mx.debugOptions.spans.bounding,this.context.beginPath(),this.context.rect(r,n-a,o,a+h),this.context.fill(),this.context.stroke(),this.context.stroke()),mx.debugOptions.spans.baseline&&(this.context.strokeStyle=mx.debugOptions.spans.baseline,this.context.beginPath(),this.context.moveTo(r,n),this.context.lineTo(r+o,n),this.context.closePath(),this.context.stroke()),mx.debugOptions.spans.top&&(this.context.strokeStyle=mx.debugOptions.spans.top,this.context.beginPath(),this.context.moveTo(r,n-a),this.context.lineTo(r+o,n-a),this.context.closePath(),this.context.stroke()),mx.debugOptions.spans.bottom&&(this.context.strokeStyle=mx.debugOptions.spans.bottom,this.context.beginPath(),this.context.moveTo(r,n+h),this.context.lineTo(r+o,n+h),this.context.closePath(),this.context.stroke()),mx.debugOptions.spans.text&&(this.context.fillStyle="#ffffff",this.context.strokeStyle="#000000",this.context.lineWidth=2,this.context.font="8px monospace",this.context.strokeText(u.name,r,n-a+8),this.context.fillText(u.name,r,n-a+8),this.context.strokeText(`${o.toFixed(2)}x${(a+h).toFixed(2)}`,r,n-a+16),this.context.fillText(`${o.toFixed(2)}x${(a+h).toFixed(2)}`,r,n-a+16)))})),mx.debugOptions.objects.enabled&&(mx.debugOptions.objects.bounding&&(this.context.fillStyle=mx.debugOptions.objects.bounding,this.context.beginPath(),this.context.rect(0,0,t,i),this.context.fill()),mx.debugOptions.objects.text&&(this.context.fillStyle="#ffffff",this.context.strokeStyle="#000000",this.context.lineWidth=2,this.context.font="8px monospace",this.context.strokeText(`${t.toFixed(2)}x${i.toFixed(2)}`,0,8,t),this.context.fillText(`${t.toFixed(2)}x${i.toFixed(2)}`,0,8,t))),this.updateTexture()}updateTexture(){const e=this._texture;e.baseTexture.hasLoaded=!0,e.baseTexture.resolution=this.resolution,e.baseTexture.realWidth=this.canvas.width,e.baseTexture.realHeight=this.canvas.height,e.baseTexture.width=this.canvas.width/this.resolution,e.baseTexture.height=this.canvas.height/this.resolution,e.trim.width=e.frame.width=this.canvas.width/this.resolution,e.trim.height=e.frame.height=this.canvas.height/this.resolution,e.trim.x=-this.padding,e.trim.y=-this.padding,e.orig.width=e.frame.width-2*this.padding,e.orig.height=e.frame.height-2*this.padding,this._onTextureUpdate(),e.baseTexture.emit("update",e.baseTexture),this.dirty=!1}assign(e,...t){for(let i of t)for(let t in i)e[t]=i[t];return e}}let yx;var vx;(vx=yx||(yx={}))[vx.Filling=0]="Filling",vx[vx.ScrollingToBottom=1]="ScrollingToBottom",vx[vx.ScrollingToTop=2]="ScrollingToTop",vx[vx.ClampToTop=3]="ClampToTop",vx[vx.ClampToBottom=4]="ClampToBottom",vx[vx.Dragging=5]="Dragging",vx[vx.Browsing=6]="Browsing";class bx extends s.Container{lineHeight=21;totalHeight=0;scrollInertia=.85;topMargin=0;bottomMargin=0;prompt="> ";promptQuestion="";promptStyle="prompt";inputStyle="input";cursorStyle="cursor";inputText="";inputCursorX=0;transcript="";state=yx.Filling;constructor(e){super(),this.styles=e,s.ticker.shared.add(this.animate,this),this.registerDraggingEvents()}destroy(){s.ticker.shared.remove(this.animate)}clear(){for(let e of this.paragraphs)e.block&&e.block.destroy();this.paragraphs=[],this.state=yx.Filling,this._offset=0,this.dirty=!0}draggingOutOfBounds=!1;mouseWheelOffset=null;mouseWheelAutoScrollIn=0;registerDraggingEvents(){this.interactive=!0,this.buttonMode=!0,this.defaultCursor="grab",this.on("mousedown",(e=>this.onDragStart(e))).on("touchstart",(e=>this.onDragStart(e))).on("mouseup",(e=>this.onDragEnd(e))).on("mouseupoutside",(e=>this.onDragEnd(e))).on("touchend",(e=>this.onDragEnd(e))).on("touchendoutside",(e=>this.onDragEnd(e))).on("mousemove",(e=>this.onDragMove(e))).on("touchmove",(e=>this.onDragMove(e))).on("mouseover",(()=>bx.mouseOver=this)).on("mouseout",(()=>{bx.mouseOver==this&&(bx.mouseOver=void 0)})),bx.mouseOver=this}static mouseWheelEvent(e){bx.mouseOver&&bx.mouseOver.onMouseWheel(e)}onDragStart(e){this.draggingData=e.data,this.draggingFrom=e.data.getLocalPosition(this),this.draggingOffset=this._offset,this.state=yx.Dragging,this.draggingOutOfBounds=!1,bx.mouseOver=this}onDragEnd(e){if(this.state===yx.Dragging){this.draggingData=null;let e=this.totalHeight-this.height;e<0?this.state=yx.ScrollingToTop:this._offset>e?this.state=yx.ScrollingToBottom:this._offset<0?this.state=yx.ScrollingToTop:this.state=yx.Browsing}}onDragMove(e){if(this.state==yx.Dragging){let e=this.draggingData.getLocalPosition(this),t=this.draggingOffset-(e.y-this.draggingFrom.y),i=Math.max(0,this.totalHeight-this.height);this.draggingOutOfBounds=!1,t<0?(t=Math.max(-200,-this.dragCurve(-t)),this.draggingOutOfBounds=!0):t>i&&(t=Math.min(200,this.dragCurve(t-i))+i,this.draggingOutOfBounds=!0),this.setOffset(t)}bx.mouseOver=this}onMouseWheel(e){null===this.mouseWheelOffset&&(this.mouseWheelOffset=this._offset),this.state=yx.Browsing,this.mouseWheelOffset+=e;let t=this.mouseWheelOffset,i=Math.max(0,this.totalHeight-this.height);t<0?(t=-this.dragCurve(-t,50),this.draggingOutOfBounds=!0,this.mouseWheelAutoScrollIn=5):t>i&&(t=this.dragCurve(t-i,50)+i,this.draggingOutOfBounds=!0,this.mouseWheelAutoScrollIn=5),this.setOffset(t)}dragCurve(e,t=150){return t*(1-Math.exp(-e/325))}input=!1;inputHistory=[];inputHistoryIndex=0;startInput(e){bx.inputWindow&&(bx.inputWindow.input=!1),this.input=!0,this.inputText="",this.dirty=!0,this.inputCursorX=0,this.inputCallback=e,this.inputHistoryIndex=this.inputHistory.length,this.inputHistory.push(""),this.updateInputText(),bx.inputWindow=this}updateInputText(){let e=this.paragraphs[this.paragraphs.length-1],t=this.inputText.slice(this.inputCursorX,this.inputCursorX+1);e.text=this.promptQuestion+"<"+this.promptStyle+">"+this.prompt+"</"+this.promptStyle+"><"+this.inputStyle+">"+this.inputText.slice(0,this.inputCursorX)+"<"+this.cursorStyle+">"+t+"</"+this.cursorStyle+">"+this.inputText.slice(this.inputCursorX+1)+"</"+this.inputStyle+">",e.dirty=!0,this.dirty=!0}waitForKey(e){this.waitForKeyCallback=e,bx.waitingForKeyWindow=this,this.dirty=!0}static keyPressed(e){let t=bx.inputWindow,i=bx.waitingForKeyWindow;if(null!=i)bx.waitingForKeyWindow=null,i.waitForKeyCallback(e.key);else if(null!=t){var r=e.which;let i=t.inputText,n=t.inputCursorX;r>=32&&(t.inputText=i.slice(0,n)+e.key+i.slice(n),t.inputCursorX++,t.updateInputText())}}static keyDown(e){let t=bx.inputWindow;if(null!=t){if((t.state==yx.Browsing||t.state==yx.ClampToTop)&&(t.state=yx.ScrollingToBottom,t.totalHeight<t.height&&(t.state=yx.ScrollingToTop),13==e.which||27==e.which))return void e.preventDefault();switch(t._cursorBlinkElapsed=-t.cursorWaitAfterKeyPress,t._cursorBlink=!1,e.which){case 8:t.inputCursorX>0&&(t.inputText=t.inputText.slice(0,t.inputCursorX-1)+t.inputText.slice(t.inputCursorX),t.inputCursorX--);break;case 13:return bx.inputWindow=null,t.inputHistory[t.inputHistory.length-1]=t.inputText,t.input=!1,t.updateCursor(),t.transcript+="\n> "+t.inputText,t.addText("\n"),t.inputCallback&&t.inputCallback(t.inputText),e.preventDefault(),void e.stopImmediatePropagation();case 46:t.inputText=t.inputText.slice(0,t.inputCursorX)+t.inputText.slice(t.inputCursorX+1);break;case 27:t.inputText="",t.inputCursorX=0;break;case 36:t.inputCursorX=0;break;case 35:t.inputCursorX=t.inputText.length;break;case 37:t.inputCursorX=Math.max(0,t.inputCursorX-1);break;case 39:t.inputCursorX=Math.min(t.inputText.length,t.inputCursorX+1);break;case 38:t.inputHistory[t.inputHistoryIndex]=t.inputText,--t.inputHistoryIndex<0&&(t.inputHistoryIndex=t.inputHistory.length-1),t.inputText=t.inputHistory[t.inputHistoryIndex],t.inputCursorX=t.inputText.length;break;case 40:t.inputHistory[t.inputHistoryIndex]=t.inputText,++t.inputHistoryIndex==t.inputHistory.length&&(t.inputHistoryIndex=0),t.inputText=t.inputHistory[t.inputHistoryIndex],t.inputCursorX=t.inputText.length;break;default:return}e.preventDefault(),t.updateInputText()}}static keyUp(e){}cursorBlinkRate=16;cursorWaitAfterBlink=0;cursorWaitAfterKeyPress=16;cursorColor=16777215;cursorWidth=10;cursorHeight=2;cursorOffset=1;_focused=!0;_cursorBlinkElapsed=0;_cursorBlink=!1;_cursorWidth=-1;updateCursor(){if(!this.input&&bx.waitingForKeyWindow!==this&&this._cursor&&(this._cursor.destroy(),this._cursor=void 0),this._cursor&&this._cursorArea&&this._cursorParagraph){let e=this._cursorArea.x,t=this._cursorArea.y,i=-1==this._cursorWidth?this._cursorArea.width:this._cursorWidth,r=this._cursorArea.height;this._cursor.clear(),this._cursor.beginFill(this.cursorColor,this._cursorBlink?0:1),-1==this.cursorHeight?this._cursor.drawRect(e,t+this.cursorOffset,i,r-this.cursorOffset):this._cursor.drawRect(e,t+r-this.cursorHeight+this.cursorOffset,i,this.cursorHeight),this._cursor.endFill(),this._cursor.position=this._cursorParagraph.position}}moveCursorTo(e,t,i,r,n){this._cursor||(this._cursor=new s.Graphics),r||(r=this.cursorWidth),this._cursorArea=new s.Rectangle(t,i,r,n),this._cursorParagraph=e,this._cursorWidth=r,this._cursor.parent&&this._cursor.parent.removeChild(this._cursor),this.addChildAt(this._cursor,0),this.updateCursor()}_offset=0;_width=0;_height=0;get height(){return this._height}set height(e){this._height=e,this.dirty=!0,this.updateMask()}get width(){return this._width}set width(e){for(var t of(this._width=e,this.paragraphs))t.dirty=!0;this.dirty=!0,this.updateMask()}updateMask(){this._maskRect?this._maskRect.clear():(this._maskRect=new s.Graphics,this.addChild(this._maskRect)),this._maskRect.drawRect(0,0,this.width,this.height),this.mask=this._maskRect,this.hitArea=new s.Rectangle(0,0,this._width,this._height)}setOffset(e){const t=e-this._offset;for(var i of this.paragraphs)i.block&&(i.block.position.y-=t);this._offset=e,this._cursor&&this._cursorParagraph&&(this._cursor.position=this._cursorParagraph.position),this.dirty=!0,this.update()}animate(e){if(this.state==yx.ScrollingToBottom||this.state==yx.ScrollingToTop){const e=this.state==yx.ScrollingToBottom?this.totalHeight-this.height:0;this.mouseWheelOffset=null;let i=this._offset*this.scrollInertia+e*(1-this.scrollInertia);Math.abs(this._offset-e)<2&&!this.dirty&&(i=e,this.state=this.totalHeight<this.height?yx.Filling:this.state==yx.ScrollingToBottom?yx.ClampToBottom:yx.ClampToTop);const r=i-this._offset;for(var t of this.paragraphs)t.block&&(t.block.position.y-=r);this._offset=i,this._cursor&&this._cursorParagraph&&(this._cursor.position=this._cursorParagraph.position),this.dirty=!0,this.update()}this.mouseWheelAutoScrollIn>0&&(this.state!==yx.Browsing?this.mouseWheelAutoScrollIn=0:(this.mouseWheelAutoScrollIn-=e,this.mouseWheelAutoScrollIn<0&&(this.mouseWheelAutoScrollIn=0,this._offset<0||this.height>this.totalHeight?this.state=yx.ScrollingToTop:this.state=yx.ScrollingToBottom))),(this.input||bx.waitingForKeyWindow==this)&&(document.hasFocus()?(this._focused||(this._focused=!0,this._cursorBlink=!1,this._cursorBlinkElapsed=-this.cursorWaitAfterKeyPress-e,this.updateCursor()),this._cursorBlinkElapsed+=e,this._cursorBlinkElapsed>this.cursorBlinkRate&&(this._cursorBlinkElapsed%=this.cursorBlinkRate,this._cursorBlink=!this._cursorBlink,this._cursorBlink||(this._cursorBlinkElapsed-=this.cursorWaitAfterBlink),this.updateCursor())):(this._focused=!1,this._cursorBlink||(this._cursorBlink=!0,this.updateCursor())))}paragraphs=[];dirty=!1;addText(e){this.transcript+=e;let t=e.split("\n");if(this.paragraphs.length>0){let e=this.paragraphs[this.paragraphs.length-1];e.text+=t.shift(),e.dirty=!0}for(var i of t)this.paragraphs.push({text:i,dirty:!0});this.dirty=!0,this.state==yx.ClampToBottom&&(this.state=yx.ScrollingToBottom)}update(){if(!this.dirty)return;let e;this.dirty=!1,this.totalHeight=this.bottomMargin+this.topMargin;for(let i=0;i<this.paragraphs.length;i++){let r=this.paragraphs[i],n=i==this.paragraphs.length-1;if(r.dirty){if(r.block&&(r.block.texture.destroy(!0),this.removeChild(r.block),r.block=void 0),!e){for(var t in this.styles)this.styles[t].wordWrap=!0,this.styles[t].wordWrapWidth=this.width;e=new px(this.styles)}r.data=e.formatText(r.text),r.height=Math.max(r.data.height-2*r.data.padding,this.lineHeight),n||(r.height+=r.data.bottomMargin),r.dirty=!1}this.totalHeight+=r.height}if(this.state==yx.ClampToBottom||this.state==yx.ClampToTop){const e=this.state==yx.ClampToBottom?this.totalHeight-this.height:0;if(this._offset!=e){const t=e-this._offset;for(var i of this.paragraphs)i.block&&(i.block.position.y-=t);this._offset=e}}let r=-this._offset+this.topMargin;for(let e=0;e<this.paragraphs.length;e++){let t=this.paragraphs[e],i=e==this.paragraphs.length-1;if(!t.block&&r+t.data.height>=0&&r<this.height){if(t.block=new mx(t.data.text,this.styles),t.block.updateFormattedText(t.data),this.addChild(t.block),t.block.position.set(0,r),i&&(bx.waitingForKeyWindow==this||bx.inputWindow==this)){let e=!1;for(let i of t.block.hitboxes)"cursor"===i.tag.name&&(this.moveCursorTo(t.block,i.hitbox.x,i.hitbox.y,i.hitbox.width,i.hitbox.height),e=!0);if(!e){let e=t.data.height-2*t.data.padding,i=t.data.drawingData[t.data.drawingData.length-1],r=i?i.x+i.width+t.data.padding:0;this.moveCursorTo(t.block,r-this.cursorWidth,0,this.cursorWidth,e)}}}else t.block&&(r+t.data.height<0||r>this.height)&&(t.block.texture.destroy(!0),this.removeChild(t.block),t.block=void 0);r+=t.height}this.updateTransform(),this.state==yx.Filling&&this.totalHeight>this.height&&(this.state=yx.ScrollingToBottom)}renderWebGL(e){this.update(),super.renderWebGL(e)}renderCanvas(e){this.update(),super.renderCanvas(e)}}const xx=bx.keyPressed,wx=bx.keyDown,_x=bx.keyUp;window.addEventListener("keydown",wx,!1),window.addEventListener("keyup",_x,!1),window.addEventListener("keypress",xx,!1);class Tx{maxObjectsCarried=99;inventory=[];location="destroyed"}let Sx=new Tx;class Ex extends Tx{constructor(e,t){super(),this.defaults=new Tx,Object.assign(this.defaults,Sx),Object.assign(this.defaults,t),this.defaults.key=e,Object.assign(this,this.defaults)}serializeChanges(){let e={key:this.key},t=this,i=this.defaults;for(let r of Object.keys(t))t[r]!==i[r]&&"function"!=typeof t[r]&&"object"!=typeof t[r]&&(e[r]=t[r]);return e}unserializeChanges(e){let t=this;for(let i in e)t[i]=e[i]}reset(){Object.assign(this,this.defaults)}}class Ox{name="";seen=!1;hideObjects=!1}let kx=new Ox;class Mx extends Ox{constructor(e,t){super(),this.key=e,this.reset=function(){Object.assign(this,this.defaults)},this.defaults=new Ox,Object.assign(this.defaults,kx),Object.assign(this.defaults,t),this.defaults.key=e,Object.assign(this,this.defaults)}serializeChanges(){let e={key:this.key},t=this,i=this.defaults;for(let r of Object.keys(t))t[r]!==i[r]&&"function"!=typeof t[r]&&"object"!=typeof t[r]&&(e[r]=t[r]);return e}unserializeChanges(e){let t=this;for(let i in e)t[i]=e[i]}}class Cx{direction="";directionAsWritten="";verb="";verbAsWritten="";verb2="";verb2AsWritten="";adjective="";adjectiveAsWritten="";noun="";nounAsWritten="";noun2="";noun2AsWritten="";number=null;adjective2="";adjective2AsWritten="";adverb="";adverbAsWritten="";preposition="";prepositionAsWritten="";conjuntion="";conjuntionAsWritten="";quotedText="";remainingText="";unknownWords=0;empty(){return!(this.direction||this.verb||this.noun||this.adverb||this.adjective)}}class Px{proper=!1;many=!1;wearable=!1;container=!1;sitting=!1;laying=!1;openable=!1;open=!1;worn=!1;scenery=!1;seen=!1;hidden=!1;location="destroyed";printLocationNames=!1}const Ax=new Px;class Ix extends Px{constructor(e,t){super(),this.defaults=new Px,Object.assign(this.defaults,Ax),Object.assign(this.defaults,t),this.defaults.key=e,Object.assign(this,this.defaults)}serializeChanges(){let e={key:this.key},t=this,i=this.defaults;for(let r of Object.keys(t))t[r]!==i[r]&&"function"!=typeof t[r]&&"object"!=typeof t[r]&&(e[r]=t[r]);return e}unserializeChanges(e){let t=this;this.defaults&&Object.assign(this,this.defaults);for(let i in e)t[i]=e[i]}fullName(e=!1,t){var i=this.name,r=e&&this.inventoryDetails||this.details;return"function"==typeof r&&(r=r.call(this,t)),r&&(i+=" ("+r+")"),i}reset(){Object.assign(this,this.defaults)}}let Rx;var Nx;(Nx=Rx||(Rx={}))[Nx.Adjective=0]="Adjective",Nx[Nx.Preposition=1]="Preposition",Nx[Nx.Noun=2]="Noun",Nx[Nx.Verb=3]="Verb",Nx[Nx.Conjunction=4]="Conjunction",Nx[Nx.Direction=5]="Direction",Nx[Nx.Pronoun=6]="Pronoun",Nx[Nx.ConvertibleNoun=7]="ConvertibleNoun",Nx[Nx.Adverb=8]="Adverb",Nx[Nx.SpecialNoun=9]="SpecialNoun";class Dx{constructor(e){this.words={},this.addWords(e)}findWord(e){let t=this.words[e];return t&&0==t.length?void 0:t}addWord(e,t){if(e){let i=this.words[e];i?i.find((e=>e.type==t))||i.push({type:t,baseWord:e}):this.words[e]=[{type:t,baseWord:e}]}}addWords(e){e&&(this.addWordsOfType(e.adjectives,Rx.Adjective),this.addWordsOfType(e.adverbs,Rx.Adverb),this.addWordsOfType(e.conjunctions,Rx.Conjunction),this.addWordsOfType(e.convertibleNouns,Rx.ConvertibleNoun),this.addWordsOfType(e.directions,Rx.Direction),this.addWordsOfType(e.nouns,Rx.Noun),this.addWordsOfType(e.prepositions,Rx.Preposition),this.addWordsOfType(e.specialNouns,Rx.SpecialNoun),this.addWordsOfType(e.verbs,Rx.Verb))}addWordsOfType(e,t){for(var i in e)for(var r of(this.words[i]&&0!=this.words[i].length?this.words[i].find((e=>e.type===t&&e.baseWord!==i))&&console.error(`Dictionary collision: word ${i} already exists as a synonym of ${this.words[i][0].baseWord}`):this.words[i]=[{baseWord:i,type:t}],e[i])){if(this.words[r]){let e=this.words[r].find((e=>e.type==t));if(e){e.baseWord!==i&&console.error(`Dictionary collision between words "${e.baseWord}" and "${i}"`);continue}}else this.words[r]=[];this.words[r].push({type:t,baseWord:i})}}}var Lx={directions:{north:["n"],south:["s"],east:["e"],west:["w"],northeast:["ne"],northwest:["nw"],southeast:["se"],southwest:["sw"],up:[],down:[],enter:["in","inside"],leave:["out","outside"]},convertibleNouns:{inventory:["i"],exits:["x"]},prepositions:{into:["inside","in"],on:["over"],under:[],off:[],at:[]},exitNames:{enter:"inside",leave:"outside",north:"North",south:"South",east:"East",west:"West",northeast:"Northeast",northwest:"Northwest",southeast:"Southeast",southwest:"Southwest"},verbs:{break:["destroy","split","force","smash"],close:[],drop:["throw"],enter:[],examine:["ex","check","read","search","find","scan","investigate","inspect"],exit:["leave"],lay:["lie","crouch"],load:["restore"],look:["re-describe","l"],make:[],open:[],pick:[],punch:["strike","punch","kick","attack"],put:[],quit:["end","quitf"],remove:["disrobe","unwear","doff"],restart:[],save:[],say:["speak","talk","tell"],sit:[],stand:["rise"],take:["get"],wear:["don"],use:[]},specialNouns:{all:["everything"],ram:[],floor:[]},pronouns:{it:[],them:[]},conjunctions:{and:[],then:[]},afterDescription(e){!0===this.player.sitting?this.message("   [You are] "+this.player.sittingMode+" down on the floor."):this.player.sitting&&this.message("   [You are] "+this.player.sittingMode+" down on [the object].",this.findEntity(this.player.sitting))},before(e){console.log(e),"pick"===e.verbAsWritten&&"up"==e.direction&&(e.verb="take",e.direction="",e.directionAsWritten=""),"put"===e.verbAsWritten&&"on"==e.preposition&&e.prepositionAfter.type===Rx.Verb&&(e.verb="wear"),"put"!==e.verbAsWritten||e.noun2||(e.verb="wear"),"take"===e.verbAsWritten&&"off"==e.noun&&e.object2&&(e.verb="remove",e.object=e.object2),"make"==e.verbAsWritten&&"inventory"==e.noun&&(e.verb="inventory"),"x"==e.verbAsWritten&&(e.noun||e.unknownWords)&&(e.verb="examine"),"enter"==e.verb&&(e.direction="enter",e.directionAsWritten=e.verbAsWritten,e.verb=e.verbAsWritten=void 0),"exit"==e.verb&&(e.direction="leave",e.directionAsWritten=e.verbAsWritten,e.verb=e.verbAsWritten=void 0),"into"!=e.preposition||e.noun||e.verb||e.unknownWords||(e.direction="enter",e.directionAsWritten=e.prepositionAsWritten,e.preposition=e.prepositionAsWritten=void 0),"sit"==e.verb&&"down"==e.direction&&(e.direction=""),"get"==e.verbAsWritten&&"up"==e.direction&&(e.verb="stand",e.direction="")},execute(e){var t,i,r,n,o,s=this.player,a=this.findLocation(s.location),h=e.object;if(e.direction&&!e.verb){if(a.exits&&e.direction in a.exits){if(!this.check(e))return Gx;var u=a.exits[e.direction],l=this.findLocation(u);if(!l)return this.message("[You] can't go "+e.direction+"."),Gx;if(this.player.sitting&&(r=this.execute("stand up"))!==Ux)return r;if(s.location=u,l.seen)this.mess("<b>"+(l.brief||l.name)+"</b>\n");else if(r=this.describe(s.location))return r;return Ux}return"up"==e.direction&&this.player.sitting?this.execute("stand up"):(this.mess("[You] can't go that way. "),a.exits?1==Object.keys(a.exits).length?this.message("[You] can only go [the options].",this.exitsFrom(a)):this.message("[You] can go [the options].",this.exitsFrom(a)):this.message("There is no exit."),Gx)}switch(e.verb){case"exits":var c=this.exitsFrom(a);return c&&c.length?1==c.length?this.message("[You] can only go [the options].",c):this.message("[You] can go [the options].",c):this.message("There is no exit."),Gx;case"restart":return this.askPrompt="Are you sure?| ",this.askCallback=e=>"y"==e.substring(0,1).toLowerCase()?(this.clear(),this.restartGame(),Wx):Gx,zx;case"load":var d=window.localStorage.getItem("savedState");if(d){if(this.reset(),this.unserialize(JSON.parse(d)),this.clear(),r=this.describe(s.location))return r}else this.message("Your progress hasn't been saved yet.");return Gx;case"save":return window.localStorage.getItem("savedState")?(this.message("This will overwrite your previous save."),this.askPrompt="Are you sure?| ",this.askCallback=e=>("y"==e.substring(0,1).toLowerCase()&&(window.localStorage.setItem("savedState",JSON.stringify(this.serialize())),this.message("Progress saved.")),console.log(JSON.parse(window.localStorage.getItem("savedState"))),Gx),zx):(window.localStorage.setItem("savedState",JSON.stringify(this.serialize())),console.log(JSON.parse(window.localStorage.getItem("savedState"))),this.message("Progress saved."),Gx);case"inventory":this.inventoryMode=!0;var f=this.entities.filter((e=>"inventory"===e.location&&!e.hidden&&!e.worn)),p=this.entities.filter((e=>"inventory"===e.location&&!e.hidden&&e.worn));return 0===f.length&&0===p.length&&this.message("[You are] not carrying anything."),f.length>0&&this.message("[You are] carrying [a list].",f),p.length>0&&this.message("[You are] wearing [a list].",p),this.inventoryMode=!1,Ux;case"look":return e.noun?"exits"==e.noun?this.execute("exits"):this.execute(e,{verb:"examine"}):(r=this.describe(s.location))||Ux;case"use":return this.message(["How?","What do you want to do, exactly?","You'd have to be more specific."][Math.floor(3*Math.random())]),Gx;case"examine":if(h){if(this.present(h)){if(!this.check(e))return Gx;if(h.description)if("function"==typeof h.description){var g=h.description.call(h,this);g&&this.message(g)}else this.message(h.description);else this.message("[The object] has nothing special.",h);return Ux}if(h.seen)return this.message("[You] can't see [the object] here.",h),Gx}return this.message("[You] can see nothing special."),Gx;case"drop":if(h){if("inventory"==h.location){if(h.worn){if(n=this.currentMessage,(r=this.execute(e,{verb:"remove"}))!=Ux)return r;this.currentMessage=n}return this.check(e)?(h.location=s.location,this.partialOrder||this.message("[You drop|I've dropped] [the object].",h),Ux):(h.worn=!1,Gx)}if(this.present(h))return this.message("[You are] not carrying [the object].",h),Gx}else if("all"===e.noun){if(0===(i=this.entities.filter((e=>"inventory"===e.location&&!e.worn&&!e.hidden))).length)return this.message("[You are] not carrying anything."),Gx;this.partialOrder=!0;for(let t=0;t<i.length;t++){e.noun=i[t].noun,e.adjective=i[t].adjective,e.object=i[t],this.execute(e)===Ux&&i[t].location===s.location||i.splice(t--,1)}return this.partialOrder=!1,0==i.length?Gx:(this.message("[You drop|I've dropped] [the list].",i),Ux)}return this.message("[You are] not carrying that."),Gx;case"take":if(h)return"inventory"==h.location?(this.message("[You are] already carrying [the object].",h),Gx):this.present(h)?h.scenery?(this.message("That's hardly something [you]'d be able to pick up, considering the current situation."),Gx):this.entities.filter((e=>"inventory"===e.location)).length>=s.maxObjectsCarried?(this.message("[You are] carrying too many things."),Gx):this.check(e)?(this.partialOrder||this.message("[You] now have [the object].",h),h.location="inventory",Ux):Gx:(this.message("[You] can't see that."),Gx);if("all"==e.noun){i=this.entities.filter((function(e){return e.location===s.location&&!e.scenery&&!e.hidden}));let r=this.entities.filter((function(e){return"inventory"===e.location}));if(0===i.length)return this.message("[You] can see nothing suitable."),Gx;if(r.length+i.length>s.maxObjectsCarried)return this.message("[You are] carrying too many things."),Gx;for(let t=0;t<i.length;t++){e.noun=i[t].noun,e.adjective=i[t].adjective,e.object=i[t],this.partialOrder=!0,this.execute(e)===Ux&&"inventory"===i[t].location||(i.splice(t,1),t--),this.partialOrder=!1}if(!i.length)return Gx;for(t in i){i[t].location="inventory"}return console.log(i),this.message("[You] now have [the list].",i),Ux}return e.noun||e.unknownWords?this.message("[You] can't pick up that."):this.message("[You] can't see that."),Gx;case"remove":if(h&&"inventory"==h.location&&h.worn)return this.check(e)?(h.worn=!1,this.message("[You] remove [the object].",h),Ux):Gx;if(!h||"inventory"!=h.location&&h.location!==s.location){if("clothes"==e.noun||"all"==e.noun){var m=this.entities.filter((function(e){return"inventory"==e.location&&e.worn&&!e.hidden}));if(0===m.length)return this.message("[You are] not wearing anything."),Gx;for(t in m)if(e.noun=m[t].noun,e.adjective=m[t].adjective,e.object=m[t],!this.check(e))return Gx;for(t in m)m[t].worn=!1;return this.message("[You] remove [the list].",m),Ux}return this.message("[You are] not wearing that."),Gx}return h.wearable?this.message("You are not wearing [the object].",h):this.message("[You] can't wear [the object].",h),Gx;case"wear":if(h&&"inventory"==h.location&&h.wearable)return h.worn?(this.message("[You are] already wearing [the object].",h),Gx):this.check(e)?(h.worn=!0,this.message("[You] put on [the object].",h),Ux):Gx;if(h&&this.inReach(h.location)&&h.wearable)return n=this.currentMessage,(r=this.execute(e,{verb:"take"}))!=Ux?r:(this.currentMessage=n,this.check(e)?(this.message("[You] put on [the object].",h),h.worn=!0,Ux):(h.location=s.location,Gx));if(!h||"inventory"!==h.location&&h.location!==s.location){if("all"==e.noun){if(0===(i=this.entities.filter((function(e){return"inventory"===e.location&&e.wearable&&!e.hidden}))).length)return this.message("[You] can see nothing suitable."),Gx;for(t in i)if(e.noun=i[t].name,e.adjective=i[t].adjective,!this.check(e))return Gx;for(t in i)i[t].worn=!0;return this.message("[You are] now wearing [the list].",i),Ux}return this.message("[You] can't wear that."),Gx}return h.worn?this.message("[You are] already wearing [the object].",h):this.message("[You] can't wear [the object].",h),Gx;case"sit":case"lay":if(o="sit"==e.verb?"sitting":"laying",e.noun||e.unknownWords||1==(i=this.entities.filter((e=>e.location===this.player.location&&("sitting"==o?e.sitting:e.laying)))).length&&(e.noun=i[0].noun,e.object=h=i[0]),!h&&this.player.sitting&&!0!==this.player.sitting&&this.findEntity(this.player.sitting).laying&&(h=this.findEntity(this.player.sitting)),this.player.sitting){if((!0===this.player.sitting&&!h||this.player.sitting==h.key)&&this.player.sittingMode==o)return h?this.message("[You are] already "+o+" on [the object].",h):this.message("[You are] already "+o+" down."),Gx;if(!h||this.player.sitting!=h.key){if((r=this.execute("stand up"))!==Ux)return r;this.currentMessage=""}}return h&&this.present(h)?h.sitting||"sitting"!=o?h.laying||"laying"!=o?(this.player.sitting=h.key,this.player.sittingMode=o,this.message("[You] "+("sitting"==o?"sit":"lay down")+" on [the object].",h),Ux):(this.message("[The object] is not suitable for laying down.",h),Gx):(this.message("[The object] is not suitable for sitting.",h),Gx):e.noun&&"floor"!=e.noun||e.unknownWords?(this.message("That's not suitable for sitting."),Gx):(this.player.sitting=!0,this.player.sittingMode=o,this.message("[You] "+("sitting"==o?"sit":"lay")+" down on the floor."),Ux);case"stand":return this.player.sitting?(this.player.sitting=null,this.message("[You] stand up."),Ux):(this.message("[You are] already standing."),Ux)}return Hx}};function jx(e){return e.charAt(0).toUpperCase()+e.slice(1)}let Fx;var Bx;(Bx=Fx||(Fx={}))[Bx.DONE=0]="DONE",Bx[Bx.NOTDONE=1]="NOTDONE",Bx[Bx.WAIT=2]="WAIT",Bx[Bx.ASK=3]="ASK",Bx[Bx.RESTART=4]="RESTART",Bx[Bx.NOACTION=-1]="NOACTION";const Ux=Fx.DONE,Gx=Fx.NOTDONE,Wx=Fx.WAIT,zx=Fx.ASK,Hx=Fx.NOACTION,Xx=Fx.RESTART;class Yx{prompt="> ";askPrompt="> ";thirdPerson=!0;inventoryMode=!0;printLocationNames=!1;partialOrder=!1}let Vx=new Yx;class qx extends Yx{entities=[];locations=[];vocabulary=new Dx;synonyms={};order=null;areas={};autoIndent="    ";modules=[];currentMessage="";remainingText="";skipResponses=!1;constructor(){super(),this.player=new Ex("player"),this.defaults=new Yx,Object.assign(this.defaults,Vx),Object.assign(this,this.defaults),this.addModule(Lx)}saveDefaultVariables(){Object.assign(this.defaults,this)}reset(){for(var e of this.locations)e.reset();for(var t of this.entities)t.reset()}addResponseWords(e){if(e)for(var t in e)for(var i=t.split(","),r=0;r<i.length;r++)for(var n=i[r].trim().split(" "),o=0;o<n.length;o++)"*"!==n[o]&&"_"!==n[o]&&(this.vocabulary.findWord(n[o])||this.vocabulary.addWord(n[o],o>0?Rx.Noun:Rx.Verb))}addModule(e){if(this.modules.push(e),this.vocabulary.addWords(e),this.addResponseWords(e.responses),e.locations)for(var t in e.locations){let i=e.locations[t];i instanceof Mx||(i=new Mx(t,e.locations[t])),this.locations.push(i),this.addResponseWords(i.responses)}if(e.entities)for(var t in e.entities){let i;if(i=e.entities[t]instanceof Ix?e.entities[t]:new Ix(t,e.entities[t]),i.name||(i.name=t),!i.noun){let e=i.name.split(" "),t=e[e.length-1];i.noun=t}this.addResponseWords(i.responses),this.vocabulary.addWord(i.noun,Rx.Noun),this.vocabulary.addWord(i.adjective,Rx.Noun),this.entities.push(i)}if(e.areas)for(var t in e.areas)this.areas[t]=e.areas[t],this.addResponseWords(e.areas[t].responses)}exitsFrom(e){var t=[];if(!e.exits)return t;for(var i in e.exits){var r=i;for(var n of(e.exitNames&&e.exitNames[r]&&(r=e.exitNames[r]),this.exitNames&&this.exitNames[r]&&(r=this.exitNames[r]),this.modules))n.exitNames&&n.exitNames[r]&&(r=n.exitNames[r]);if(e.directions&&e.directions[i]){var o=e.directions[i];"function"==typeof o&&(o=o.call(e,this)),r=r+" ("+o+")"}t.push({name:r,proper:!0})}return t}parsedProperObjectName(e){for(var t="",i=0,r=0;r<e.name.length;r++)if("["==e.name.charAt(r)){for(t+=e.name.substring(i,r),i=r+1;r<e.name.length&&"]"!=e.name.charAt(r);)r++;var n=e.name.substring(i,r);switch(n){case"your":case"yours":this.thirdPerson?t+=n:t+="my";break;default:t+=n}i=r+1;continue}return t+e.name.substring(i,e.name.length)}parseMessageCode(e,t){var i;t&&"string"==typeof t?i={name:t}:t?"object"!=typeof t||Array.isArray(t)||(i=t):t={name:"that",proper:!0};var r="",n=" and ";switch(e){case"You":case"you":this.thirdPerson?r+=e:r+="I";break;case"me":this.thirdPerson?r+="you":r+=e;break;case"Me":this.thirdPerson?r+="You":r+=e;break;case"Your":this.thirdPerson?r+=e:r+="My";break;case"your":this.thirdPerson?r+=e:r+="my";break;case"me":this.thirdPerson?r+="you":r+=e;break;case"my":this.thirdPerson?r+="your":r+=e;break;case"mine":this.thirdPerson?r+="yours":r+=e;break;case"yourself":this.thirdPerson?r+=e:r+="myself";break;case"yours":this.thirdPerson?r+=e:r+="mine";break;case"Yours":this.thirdPerson?r+=e:r+="Mine";break;case"You'd":case"you'd":this.thirdPerson?r+=e:r+="I'd";break;case"You're":case"you're":this.thirdPerson?r+=e:r+="I'm";break;case"You were":case"you were":this.thirdPerson?r+=e:r+="I was";break;case"I am":this.thirdPerson?r+="You are":r+=e;break;case"You are":case"you are":this.thirdPerson?r+=e:r+="I am";break;case"the options":n=" or ";case"list":case"a list":case"the list":case"List":case"A list":case"The list":var o=e.replace(" list"," object").replace(" options"," object");if(Array.isArray(t))for(var s=0;s<t.length;s++)r+=this.parseMessageCode(o,t[s]),o=o.toLowerCase(),s<t.length-2?r+=", ":s<t.length-1&&(r+=n);break;case"object":i.proper?r+=this.parsedProperObjectName(i):r+=i.fullName(this.inventoryMode,this),i.seen=!0;break;case"A object":case"An object":i.proper?r+=jx(this.parsedProperObjectName(i)):i.many?r+=jx(i.fullName(this.inventoryMode,this)):i.name.substring(0,1).match(/[aeiou]/i)?r+="An "+i.fullName(this.inventoryMode,this):r+="A "+i.fullName(this.inventoryMode,this),i.seen=!0;break;case"The object":i.proper?r+=jx(this.parsedProperObjectName(i)):r+="The "+i.fullName(this.inventoryMode,this),i.seen=!0;break;case"a object":case"an object":if(!i.seen){i.proper?r+=this.parsedProperObjectName(i):i.many?r+=i.fullName(this.inventoryMode,this):i.name.substring(0,1).match(/[aeiou]/i)?r+="an "+i.fullName(this.inventoryMode,this):r+="a "+i.fullName(this.inventoryMode,this),i.seen=!0;break}case"the object":i.proper?r+=this.parsedProperObjectName(i):r+="the "+i.fullName(this.inventoryMode,this),i.seen=!0;break;default:if(e.match(/^[Yy]ou.*\|/)){var a=e.split("|");this.thirdPerson?r+=a[0]:r+=a[1]}else console.log('Unknown special message code "'+e+'"')}return r}processMessage(e){var t=this.currentMessage;this.currentMessage="",this.mess(e);var i=this.currentMessage;return this.currentMessage=t,i}parseMessage(e,t){for(var i=0,r="",n=0;n<e.length;n++)if("["==e.charAt(n)){for(r+=e.substring(i,n),i=n+1;n<e.length&&"]"!=e.charAt(n);)n++;r+=this.parseMessageCode(e.substring(i,n),t),i=n+1;continue}return r+=e.substring(i)}waitForKey(e){return this.waitOrder=this.currentOrder,this.output.print(this.currentMessage),this.currentMessage="",this.output.getKey((t=>{let i=Ux;if(e){let r=e(t);null!=r&&(i=r)}i!=Wx&&i!=Xx&&(null==i&&(i=Gx),this.resolveTurn(this.waitOrder,i),this.output.print(this.currentMessage),this.currentMessage="",this.waitOrder=null,this.output.print("\n"),this.output.input(this.prompt,(e=>this.processInputText(e))))})),Wx}mess(e,t){var i=this.parseMessage(e,t);!this.currentMessage||"\n"!=this.currentMessage.slice(-1)||this.currentMessage.endsWith("\n"+this.autoIndent+"\n")||i.match(/^[<]/)||(i=i.replace(/^ */,this.autoIndent)),this.currentMessage+=i,this.currentMessage=this.currentMessage.replace(/([^\n])\n */g,"$1\n"+this.autoIndent)}message(e,t){return this.mess(e+"\n",t)}clear(){this.currentMessage="",this.output.clear()}findLocation(e){for(var t of this.locations)if(t.key===e)return t;return null}findEntity(e){for(var t of this.entities)if(t.key===e)return t;return null}objectsHere(){var e=[];for(var t of this.entities)("inventory"==t.location||this.inReach(t.location))&&e.push(t);return e}inReach(e){if(e instanceof Ix&&(e=e.location),"string"==typeof e){if("inventory"===e)return!0;for(var t=this.findLocation(e);null==t;){var i=this.findEntity(e);if(null==i)return!1;if(i.container||i.openable&&!i.open)return!1;if("inventory"===(e=i.location))return!0;if("destroyed"===e)return!1;t=this.findLocation(e)}e=t}if(e.key===this.player.location)return!0;var r=this.findLocation(this.player.location).reach;return"function"==typeof r&&(r=r(e,this)),!(!r||!r.includes(e.key))}present(e){return"string"==typeof e&&(e=this.findEntity(e)),!!e&&("inventory"===e.location||this.inReach(e))}objectsAt(e){return"object"==typeof e&&(e=e.key),this.entities.filter((function(t){return t.location===e}))}processInputText(e){let t=this.execute(e),i=this.output;switch(t===Hx&&this.message("[You] can't do that."),i.print(this.currentMessage),this.currentMessage="",t){case Hx:i.print("\n"),i.input(this.prompt,(e=>this.processInputText(e)));break;case Wx:break;case zx:i.input(this.askPrompt,(e=>{var t=Ux;this.askCallback&&(t=this.askCallback(e)),i.print(this.currentMessage),this.currentMessage="",this.resolveTurn(this.askOrder,t),t!==Ux&&t!==Gx||(i.print("\n"),i.input(this.prompt,(e=>this.processInputText(e))))}));break;default:i.print("\n"),i.input(this.prompt,(e=>this.processInputText(e)))}}describe(e){var t,i;for(e||(e=this.player.location),"string"==typeof e&&(e=this.findLocation(e)),t=this.modules.length-1;t>=0;t--)if((!(i=this.modules[t]).conditions||i.conditions.call(this))&&i.beforeDescription&&i.beforeDescription.call(this,e)===Fx.NOTDONE)return Fx.NOTDONE;if(!e.seen&&this.printLocationNames&&this.message("<b>[object]</b>",e),e.seen=!0,"function"==typeof e.description){let t=e.description(this);t&&"string"==typeof t&&this.message(t)}else this.message(e.description);var r=this.player.location;if(!e.hideObjects){var n=this.entities.filter((e=>e.location===r&&!e.hidden));n.length>0&&this.message("   [You] can see [a list] here.",n)}for(e.afterDescription&&e.afterDescription.call(this),t=this.modules.length-1;t>=0;t--)(i=this.modules[t]).conditions&&!i.conditions.call(this)||i.afterDescription&&i.afterDescription.call(this,e);return Fx.DONE}parse(e){var t=new Cx,i=0,r=null,n=!1;e=e.toLowerCase()+" ";for(var o=0;o<e.length;o++){var s=e.charAt(o);if('"'!=s&&"'"!=s){if(s.match(/[ .,;:?]/)){if(i==o)i++;else{var a=e.substring(i,o);i=o+1;let s=this.vocabulary.findWord(a);if(!s||!s.length){let e=parseInt(a,10);if(e>0){t.noun&&!t.noun2?t.noun2=""+e:t.noun||(t.noun=""+e),t.number=e;continue}console.log("Word '"+a+"' not in vocabulary; ignored"),t.unknownWords||(t.unknownWords=0),t.unknownWords++,r=null;continue}let h=a,u=s[0];switch(a=u.baseWord,u.type){case Rx.Conjunction:t.conjuntion=a,t.conjuntionAsWritten=h,t.remainingText=e.substring(o+1);break;case Rx.Direction:t.direction=a,t.directionAsWritten=h;break;case Rx.Verb:t.verb&&!t.verb2?(t.verb2=a,t.verb2AsWritten=h):t.verb||(t.verb=a,t.verbAsWritten=h);break;case Rx.Pronoun:t.noun&&!t.noun2?(t.noun2=this.lastNoun,t.noun2AsWritten=this.lastNounAsWritten):t.noun||(t.noun=this.lastNoun,t.nounAsWritten=this.lastNounAsWritten);break;case Rx.ConvertibleNoun:t.verb?t.noun&&!t.noun2?(t.noun2=a,t.noun2AsWritten=h):t.noun||(t.noun=a,t.nounAsWritten=h,n=!0):(t.verb=a,t.verbAsWritten=h);break;case Rx.Noun:t.noun&&!t.noun2?(t.noun2=a,t.noun2AsWritten=h):t.noun||(t.noun=a,t.nounAsWritten=h);break;case Rx.SpecialNoun:t.noun&&!t.noun2?(t.noun2=a,t.noun2AsWritten=h):t.noun||(n=!0,t.noun=a,t.nounAsWritten=h);break;case Rx.Preposition:t.preposition||(t.preposition=a,t.prepositionAsWritten=h,t.prepositionAfter=r);break;case Rx.Adverb:t.adverb||(t.adverb=a,t.adverbAsWritten=h);break;case Rx.Adjective:t.noun2?t.adjective2||(t.adjective2=a,t.adjective2AsWritten=h):t.noun&&!t.noun2&&r&&r.type==Rx.Noun?t.adjective?(t.adjective2=a,t.adjective2AsWritten=h):(t.adjective=a,t.adjectiveAsWritten=h):t.noun?t.adjective2||(t.adjective2=a,t.adjective2AsWritten=h):t.adjective?(t.adjective2=a,t.adjective2AsWritten=h):(t.adjective=a,t.adjectiveAsWritten=h)}if(t.conjuntion)break;r=u}if(("."==s||","==s||";"==s||":"==s)&&!t.empty()){t.remainingText=e.substring(o+1);break}}}else{for(i=o+1;o<e.length-1;){if(e.charAt(++o)==s)break}t.quotedText=e.substring(i,o),i=o+1}}if(t.adjective2&&!t.noun2&&(t.adjective=t.adjective2,t.adjectiveAsWritten=t.adjective2AsWritten,t.adjective2="",t.adjective2AsWritten=""),t.noun&&!1===n&&(this.lastNoun=t.noun,this.lastNounAsWritten=t.nounAsWritten),t.noun){let e=this.findObjectByNoun(t.noun,t.adjective);1==e.length?t.object=e[0]:e.length>0&&(t.ambiguousObjects=e)}if(t.noun2){let e=this.findObjectByNoun(t.noun2,t.adjective2);1==e.length?t.object2=e[0]:e.length>0&&(t.ambiguousObjects2=e)}return t}findObjectByNoun(e,t){var i=[];for(var r of this.entities)r.noun==e&&i.push(r);if(1==i.length)return i;if(t&&i.length>1){for(var n=[],o=0;o<i.length;o++)i[o].adjective==t&&n.push(i[o]);if(n.length>0)return n}return i}check(e){for(var t of this.modules)if((!t.conditions||t.conditions.call(this))&&t.check&&!t.check.call(this,e))return!1;return!0}resolveTurn(e,t){if(t===Ux)for(let r=this.modules.length-1;r>=0;r--){var i=this.modules[r];if(!i.conditions||i.conditions.call(this)){if(i.after){let r=i.after.call(this,e);if(r){t=r;break}}if(i.afterTurn){let r=i.afterTurn.call(this,e);r&&(t=r)}}}if(t===Ux){var r=this.objectsHere();for(let i in r)if(r[i].afterTurn){let n=r[i].afterTurn(e,this);if(n){t=n;break}}}return t===Ux?e&&e.remainingText&&!this.partialOrder?this.execute(e.remainingText):Ux:t===Gx?Gx:t==Wx?(this.waitOrder=e,this.remainingText=e.remainingText,Wx):t==zx?(this.askOrder=e,this.remainingText=e.remainingText,zx):(console.log("Invalid turn result: "+t),t)}execute(e,t,i=!1){if("string"==typeof e&&(e=this.parse(e)),t&&("string"==typeof t&&(t=this.parse(t)),t=Object.keys(t).reduce(((e,i)=>(t[i]&&(e[i]=t[i]),e)),{}),Object.assign(e,t)),e.empty())return Hx;this.currentOrder=e;for(let t of this.modules)if(!t.conditions||t.conditions.call(this)){if(t.before){if(t.before.call(this,e)===Gx)return Gx}if(t.responses){let i=this.checkResponses(t,e);if(i!==Hx)return i}}let r=this.findLocation(this.player.location);if(r&&r.before){let t=r.before.call(this,e);if(null==t&&(t=Hx),t===Gx)return t}if(e.object&&this.present(e.object)){let t=Hx;if(e.object.before){let i=e.object.before(e,this);if("number"==typeof i&&(t=i),null==t&&(t=Hx),t===Gx)return t}if(e.object.execute){let i=e.object.execute(e,this);"number"==typeof i&&(t=i)}if(t===Hx&&(t=this.checkResponses(e.object,e)),t!==Hx)return i?t:this.resolveTurn(e,t)}if(r){let t=Hx;if(r.execute&&(t=r.execute.call(this,e)),t===Hx&&(t=this.checkResponses(r,e)),t!==Hx)return i?t:this.resolveTurn(e,t)}for(let t of this.modules)if((!t.conditions||t.conditions.call(this))&&t.execute){let r=t.execute.call(this,e);if(r||r===Ux||(r=Hx),r===Hx&&t.responses&&(r=this.checkResponses(t,e)),r!==Hx)return i?r:this.resolveTurn(e,r)}return this.remainingText=e.remainingText,Hx}checkResponses(e,t,i=!1){if(this.skipResponses)return Hx;var r,n=Hx,o=[t.noun,t.noun2];if(e.responses)for(r in e.responses)for(var s=r.split(","),a=0;a<s.length;a++){var h=s[a].trim().split(" ");if(!(h.length<1)){for(var u=0;u<h.length;u++){let t=this.vocabulary.findWord(h[u]);t&&t.length>0?h[u]=t[0].baseWord:console.error("Word",h[u],"appears in responses but it's not in vocabulary, check object",e)}if("*"===h[0]||"_"===h[0]||h[0]===t.verb||h[0]===t.direction){for(var l=!0,c=0,d=1;d<h.length;d++)"*"!==h[d]&&"_"!==h[d]&&h[d]!==o[c]&&h[d]!==t.preposition&&(l=!1),"_"!==h[d]&&"*"!==h[d]&&h[d]!==o[c]||c++;if(l){var f=e.responses[r];if("string"==typeof f)if(n=Ux,"*"==f.charAt(0))this.message(f.substring(1)),n=Gx;else if(">"==f.charAt(0))t.direction="",n=this.execute(t,f.substring(1),!0);else if("!"==f.charAt(0)){var p=this.currentMessage;this.skipResponses=!0,n=this.execute(t,void 0,!0),this.skipResponses=!1,n==Ux&&(this.currentMessage=p,this.message(f.substring(1)))}else this.message(f);else null==(n=f.call(this,t,e))&&(n=Hx);if(n!=Hx)return n}}}}if(e instanceof Mx){var g=e.areas;if(!g&&e.area&&(g=[e.area]),g)for(var m of g)if(m&&this.areas[m]&&(n=this.checkResponses(this.areas[m],t))!=Hx)return n}return Hx}serialize(){this.entities.map((e=>e.serializeChanges()));return{entities:this.entities.map((e=>e.serializeChanges())),locations:this.locations.map((e=>e.serializeChanges())),player:this.player.serializeChanges(),variables:this.serializeChanges()}}unserialize(e){e&&(e.entities&&e.entities.forEach((e=>{let t=this.findEntity(e.key);t&&t.unserializeChanges(e)})),e.locations&&e.locations.forEach((e=>{let t=this.findLocation(e.key);t&&t.unserializeChanges(e)})),e.variables&&this.unserializeChanges(e.variables),e.player&&this.player.unserializeChanges(e.player))}serializeChanges(){let e={},t=this,i=this.defaults;for(let r of Object.keys(Yx))t[r]!==i[r]&&"function"!=typeof t[r]&&"object"!=typeof t[r]&&(e[r]=t[r]);return e}unserializeChanges(e){let t=this;for(let i in e)t[i]=e[i]}startGame(){this.modules.forEach((e=>e.initialize&&e.initialize.call(this))),this.restartGame(),this.initialState=this.serialize()}restartGame(){Object.assign(this,this.defaults),this.initialState&&this.unserialize(this.initialState),this.currentMessage="",this.modules.forEach((e=>e.startGame&&e.startGame.call(this))),this.describe(this.player.location),this.output.print(this.currentMessage),this.currentMessage="",this.output.print("\n"),this.output.input(this.prompt,(e=>this.processInputText(e))),console.log("Game restarted",this)}showImage(e){}updateOverlay(){}}var Kx,Zx={entities:{costume:{name:"[your] costume",description:"Thunder Girl's costume is a two-piece yellow swimsuit with a slightly reflective surface made by a flexible but strong material, complete with gloves, knee-high boots, mask, and cape. Despite the ammount of flesh showing, it is still pretty conservative at this day and age.",wearable:!0,location:"inventory",proper:!0,worn:!0},belt:{name:"[your] utility belt",description:"Thunder Girl's all-purpose utility belt is a solid black leather belt filled with a number of pouches designed to contain all kinds of crime-fighting equipment and tools.",wearable:!0,worn:!0,location:"inventory",proper:!0}},adjectives:{first:[],second:[],third:[]},verbs:{help:["hints"],transcript:[]},nouns:{costume:["clothes","bikini","swimsuit"],pouches:["pouch","tool","tools"],gloves:[],glove:[],cape:[],boots:["boot"],foot:["feet"],leg:["legs"],mask:[],you:["yourself"],me:["myself","superheroine","heroine"],person:[]},after:function(){this.horny==this.previousHorny&&(this.horny>0?this.horny--:this.horny=0),this.previousHorny=this.horny},before:function(e){switch(e.verb){case"drop":case"break":case"take":("gloves"===e.noun||"cape"===e.noun||"boots"===e.noun||"mask"===e.noun)&&(e.noun="costume",e.object=this.findEntity("costume"))}if("remove"===e.verb){if("costume"==e.noun)return this.message("[You'd] rather leave [the object] alone.",e.object),Gx;if(console.log("Removing",e),"mask"==e.noun)return this.message("[You'd] rather leave [your] mask alone."),Gx}return Hx},execute:function(e){if(!e.verb&&"person"==e.noun){if("second"==e.adjective||"third"==e.adjective)return this.thirdPerson=!0,this.message("From now on, [you] will be the protagonist of this adventure."),Gx;if("first"==e.adjective)return this.thirdPerson=!1,this.message("From now on, [you] will be the protagonist of this adventure."),Gx}switch(e.verb){case"transcript":window.document.getElementById("popup").style.visibility="visible";let t=window.document.getElementById("text");return t.textContent=this.output.transcript(),t.select(),window.document.execCommand("copy"),this.message("A transcript of this playthrough has been copied to your clipboard."),Gx;case"examine":if("me"===e.noun||"you"===e.noun)return this.message("Clara Celestia, or, as [you are] more commonly known as, Thunder Girl. [You are] just a young and aspiring superheroine who pretends to rock the crime world with no powers or abilities other than a sharp mind, considerable resources, and growing fanbase."),Ux;if(this.present("costume")){if("pouches"===e.noun||"into"==e.preposition&&"pouches"===e.object.key)return"buried-chained"==this.player.location?Hx:(this.message("The pouches are empty. Looks like [your] captors took the precaution of removing all its useful contents."),Ux);switch(e.noun){case"gloves":return this.message("The gloves are thin and flexible. They are designed for maximum mobility and comfort, comparable to the ones a doctor would wear."),Ux;case"cape":return this.message("A middle-size plastic purple cape. [You] used to wear a longer one, but it was too prone to accidents and misuse by foes in a fight."),Ux;case"boots":return this.message("A pair of solid leather boots, same color as the costume. No heels. Made for comfort and performance."),Ux;case"mask":return this.message("The mask is a simple plastic decoration fixed with theathre glue and an almost invisible string. It won't fall away accidentally, and serves its purpose, although [you're] amazed nobody recognises [me] with it."),Ux}}}return Hx}};!function(){var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function t(e){return r(o(e),arguments)}function i(e,i){return t.apply(null,[e].concat(i||[]))}function r(i,r){var n,o,s,a,h,u,l,c,d,f=1,p=i.length,g="";for(o=0;o<p;o++)if("string"==typeof i[o])g+=i[o];else if("object"==typeof i[o]){if((a=i[o]).keys)for(n=r[f],s=0;s<a.keys.length;s++){if(null==n)throw new Error(t('[sprintf] Cannot access property "%s" of undefined value "%s"',a.keys[s],a.keys[s-1]));n=n[a.keys[s]]}else n=a.param_no?r[a.param_no]:r[f++];if(e.not_type.test(a.type)&&e.not_primitive.test(a.type)&&n instanceof Function&&(n=n()),e.numeric_arg.test(a.type)&&"number"!=typeof n&&isNaN(n))throw new TypeError(t("[sprintf] expecting number but found %T",n));switch(e.number.test(a.type)&&(c=n>=0),a.type){case"b":n=parseInt(n,10).toString(2);break;case"c":n=String.fromCharCode(parseInt(n,10));break;case"d":case"i":n=parseInt(n,10);break;case"j":n=JSON.stringify(n,null,a.width?parseInt(a.width):0);break;case"e":n=a.precision?parseFloat(n).toExponential(a.precision):parseFloat(n).toExponential();break;case"f":n=a.precision?parseFloat(n).toFixed(a.precision):parseFloat(n);break;case"g":n=a.precision?String(Number(n.toPrecision(a.precision))):parseFloat(n);break;case"o":n=(parseInt(n,10)>>>0).toString(8);break;case"s":n=String(n),n=a.precision?n.substring(0,a.precision):n;break;case"t":n=String(!!n),n=a.precision?n.substring(0,a.precision):n;break;case"T":n=Object.prototype.toString.call(n).slice(8,-1).toLowerCase(),n=a.precision?n.substring(0,a.precision):n;break;case"u":n=parseInt(n,10)>>>0;break;case"v":n=n.valueOf(),n=a.precision?n.substring(0,a.precision):n;break;case"x":n=(parseInt(n,10)>>>0).toString(16);break;case"X":n=(parseInt(n,10)>>>0).toString(16).toUpperCase()}e.json.test(a.type)?g+=n:(!e.number.test(a.type)||c&&!a.sign?d="":(d=c?"+":"-",n=n.toString().replace(e.sign,"")),u=a.pad_char?"0"===a.pad_char?"0":a.pad_char.charAt(1):" ",l=a.width-(d+n).length,h=a.width&&l>0?u.repeat(l):"",g+=a.align?d+n+h:"0"===u?d+h+n:h+d+n)}return g}var n=Object.create(null);function o(t){if(n[t])return n[t];for(var i,r=t,o=[],s=0;r;){if(null!==(i=e.text.exec(r)))o.push(i[0]);else if(null!==(i=e.modulo.exec(r)))o.push("%");else{if(null===(i=e.placeholder.exec(r)))throw new SyntaxError("[sprintf] unexpected placeholder");if(i[2]){s|=1;var a=[],h=i[2],u=[];if(null===(u=e.key.exec(h)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(a.push(u[1]);""!==(h=h.substring(u[0].length));)if(null!==(u=e.key_access.exec(h)))a.push(u[1]);else{if(null===(u=e.index_access.exec(h)))throw new SyntaxError("[sprintf] failed to parse named argument key");a.push(u[1])}i[2]=a}else s|=2;if(3===s)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");o.push({placeholder:i[0],param_no:i[1],keys:i[2],sign:i[3],pad_char:i[4],align:i[5],width:i[6],precision:i[7],type:i[8]})}r=r.substring(i[0].length)}return n[t]=o}Kx=t,i,"undefined"!=typeof window&&(window.sprintf=t,window.vsprintf=i,"function"==typeof define&&define.amd&&define((function(){return{sprintf:t,vsprintf:i}})))}();var Jx=!1,Qx=0;function $x(e){e.slideHandNoticed||(e.slideHandNoticed=!0,e.message("[You] can't but notice that, while [your] left hand is completely stuck, [your] right one has a tiny bit of leeway. Given enough time and force, [you] may be able to slid it out of the glove. It will hurt like hell, though. It may not be a good idea."))}function ew(){this.tableMoved||!this.handOut||this.feetOut?this.handOut?this.tableMoved?this.batmanManeuverPerformed?this.barNoticed?this.ropesLoose?(this.lastHint++,1==this.lastHint?this.message("Where can the metal bar be useful? [You] don't have enough strength to pry open the padlock. Or perhaps...?\n"):2==this.lastHint?this.message("[You] can put the bar into the padlock, but [you] should do that only after [you] have been able to stop the blade."):3==this.lastHint?this.message("[You] don't have any strength to pry open the padlock, but the blade's weight should be able to do it."):4==this.lastHint?this.message("Once the bar is in position, try to push the blade down."):this.message("[You]'ll need to push the blade up again to open the stocks. Other than that, you're all set. Good luck with your escape!")):this.message("[You] need better preparation if [you] want to leave this trap alive. [You] need to do something about those damn ropes!"):(this.barHint++,1==this.barHint?this.message("Is Thunder Girl doomed? There is always a way out! You'll need a new object in order to triumph. Examine the surroundings carefully, you have missed something."):2==this.barHint?this.message("Is there nothing useful nearby? What about the table?"):3==this.barHint?this.message("The table doesn't seem useful by itself. Perhaps one part of it may be."):this.message("Check out that table's frame once it is nearby. Did you check the bars? You may be able to get one free.")):1==++Qx?this.message("There is not enought time! In order to survive, you'll need to perform a daring feat in the nick of time. But how?"):2==Qx?this.message("[You] need to stop the blade! There is no way to reach it while it is up there, though."):3==Qx?this.message("[You] need to stop the blade precisely when it falls, and not a second before! [You] will only have one chance."):4==Qx?this.message("[You]'ll never be able to stop the blade with [your] hand's strength alone. Is there another way?"):this.message("[You]'ll need to stop the blade with [your] feet just at the last second. It looks like an extreme feat, but [you] can do it!"):this.message("The key is right there! Have you tried to pull the table using [your] legs?"):this.slideHandCounter>0?this.message("You are on the right track, but some actions need perseverance. If something looks promising, try to do it again."):this.slideHandNoticed?this.message("One of [your] hands seems to be a bit loose, didn't you notice?"):this.feetOut?this.message("The key is right there! [You] should check out [your] hands. [You are] sure they may be a bit loose, too."):this.message("This is not the first time Thunder Girl faces a death trap. Just recently, she would have been death if it were not for her trusty lockpick, which she always hides in her right glove."):this.slideFeetCounter>0?this.message("You are on the right track, but some actions need perseverance. If something looks promising, try to do it again."):this.message("The key is right there! [You] can't reach it, though. What about [your] legs? Aren't they a bit loose, too?")}Object.assign(Vx,new class{dead=!1;doomCounter=60;handOut=!1;feetOut=!1;tableMoved=!1;slideHandNoticed=!1;slideFeetNoticed=!1;lockpickNoticed=!1;barNoticed=!1;slideHandCounter=0;slideFeetCounter=0;showCounter=!1;extraTime=!1;padlockKeyTurns=0;padlockOpen=!1;stocksOpen=!1;fallingBlade=!1;batmanManeuver=0;batmanManeuverPerformed=!1;barUnderBlade=!1;bladePosition=0;ropesLoose=!1;extraSpeed=0;escaped=!1;rightOrLeftQuestion=!1;upOrDownQuestion=!1;barHint=0;lastHint=0});var tw={startGame:function(){this.player.location="guillotine-start",this.findEntity("belt").location="destroyed",this.message("As the veil of darkness fades away and disorientation slowly comes to pass, [your] eyes finally open, only to reveal the most grotesque scene [you] could imagine.")},entities:{key:{name:"key",location:"guillotine-start",description:"A large brass key attached to a small chain. It looks like it could fit the padlock there over the stocks."},table:{name:"table",location:"guillotine-start",scenery:!0,hidden:!0,description:function(e){let t="A small and dirty accessory table, rusty and battered like an abandoned prop. It has a a top, a steel frame, a stretcher and some wheels.";return"guillotine-start"==e.findEntity("key").location&&(t+="\nThere is a small brass key on it."),e.tableMoved?t+="\nThe table rests now close to [your] head.":t+="\nPerhaps as a form of cruelty, the table has been placed some distance away from [me]. Close enough to make its presence apparent, far enought to be completely unreachable. You only have to take it.",t},responses:{"lift, take":function(e){return this.tableMoved&&this.handOut?(this.message("[You] reach the table only to find it surprisingly heavy. [You] wonder what kind of weight has it attached? It has wheels, but sliding it across the floor is as far as [you] can go."),Ux):this.tableMoved?(this.message("[You] can't reach the table with [your] hands in the stocks."),Gx):(this.message("The table is completely out of reach."),Gx)}}},lamp:{location:"guillotine-start",scenery:!0,hidden:!0,description:"Some kind of ceiling lamp, directly focused on [your] ordeal. Everything else is mostly in darkness."},shapes:{location:"guillotine-start",scenery:!0,hidden:!0,many:!0,noun:"shapes",description:"Due to the poor lightning, [you are] not sure about the many shapes the darkness outline at a distance. Boxes and props, perhaps. Any useful tools out there would be completely out of reach, though."},bar:{location:"destroyed",adjective:"metal",description:"A small metal bar, less than one inch in diameter and about one feet long. It is no longer part of the table's shabby frame.",responses:{break:"[You] try to bend or twist the bar, with zero success. It's still bare metal, after all."}}},adjectives:{right:[],left:[]},verbs:{type:["press"],struggle:["fight"],slide:[],stop:["disable"],raise:["elevate"]},nouns:{r:[],t:[],neck:[],torso:[],chest:[],stomach:[],back:[],crotch:[],knots:["knot"],key:["key","keychain","chain"],board:["plank","bed","wood"],blade:[""],guillotine:["machine","trap","deathtrap","mechanism","construction"],counter:["box","trigger","timer"],stock:["stocks","lunethe"],room:["backstage","stage","place","area","surroundings"],shapes:["figures","shadows","silhouettes","boxes","props"]},afterDescription(e){this.showImage("guillotine"),this.tableMoved?"guillotine-start"==this.findEntity("key").location?this.message("The table, and its precious contents, rest close to [me], at an arm's length."):this.message("The table still rests closer to [me], at an arm's length."):this.message("A small, grimy table rests at the feet of the machine. On the table, a brass key shines."),this.message("Other than that, [you] don't really know where [you are]. Some kind of backstage, perhaps. The lightning is poor, and focused on the machine, so there is only hints of shapes in the darkness beyond.")},afterTurn(e){if(this.fallingBlade){if(this.batmanManeuver>0)switch(++this.batmanManeuver){case 2:this.message("Damn, this thing weights far too much! [Your] legs shake under the pressure.");break;case 3:this.message("[You] feel the heavy blade slipping out of your feet. [You] need to do something, and do it fast!");break;case 5:this.message("The blade is slipping! [You] can't hold it up there any longer!");break;case 6:this.message("Finally, your tired body betrays [you] and [your] legs give up, unable to keep pushing such a heavy weight any longer."),this.batmanManeuver=0}if(0==this.batmanManeuver)return this.dead=!0,this.message("As the massive metal blade falls over [your] neck with full force, [you] seem to recall every moment of the last day of [your] life. [You] remember the Gemini Pair's bizarre antics, their sick bravado, and the weird puppet robot army.\nAnd then, there is only silence."),this.waitForKey((()=>(this.showImage("guillotine"),this.message("\n[You] have failed to escape the Gemini Pair's gruesome deathtrap. As expert escapologists themselves, looks like they were able to cover every possible way out with false promises, ultimately leading only to further despair.\nOr are they?"),Jx&&(this.mess("\n<center><white>   Hint   </white></center>\n\n"),ew.call(this)),this.mess("\nPress any key to restart... "),this.waitForKey((()=>(this.clear(),this.restartGame(),Xx))))))}else{let t=Math.floor((this.doomCounter+1)/6),i=this.doomCounter;"examine"!=e.verb&&"look"!=e.verb&&"inventory"!=e.verb||(this.doomCounter+=2),this.extraTime&&(this.doomCounter--,this.extraTime=!1),this.doomCounter=Math.max(0,this.doomCounter-3-this.extraSpeed);let r=Math.floor((this.doomCounter+1)/6);if(Math.floor((this.doomCounter-1)/12)!=Math.floor((i-1)/12)||this.showCounter){if(0==this.doomCounter)return this.message("There is a sudden alarm, and something clicks inside the trigger box."),this.mess("The text <green>"+Kx("%02d:%02d",5*this.doomCounter/60,5*this.doomCounter%60)+"</green> blinks in the box's display."),this.waitForKey((()=>(this.fallingBlade=!0,this.showImage("guillotine"),this.message("\nSuddenly, the massive blade falls down towards [your] head with full force!"),Gx)));this.message("The text <green>"+Kx("%02d:%02d",5*this.doomCounter/60,5*this.doomCounter%60)+"</green> blinks in the trigger box's display."),this.showCounter=!1}if(r!=t)switch(r){case 1:this.message("Anxiety grows as [your] fate grows closer. There is barely any time left. The blade looks heavier by the second.");break;case 2:this.message("The air is cold and dusty. Despite that, [you] are sweating considerably.");break;case 3:this.message("The ropes seem to screech and moan. Are they really getting tighter as [you] struggle? [You] can't be sure, but considering the Gemini Pair's frolics, those kind of sick jokes are far from impossible. [You] need to get out of this one, and soon.");break;case 4:this.message("[You] have to appreciate the extreme, sick design that went into this thing. [You] can't but wonder if every small leeway, every possible way out is nothing but a misleading distraction, left there by the Gemini Pair for their amusement and [your] despair.");break;case 5:this.message("The ropes seem to have tightened and are clinching [your] body quite harshly. Is this the effect of [your] struggles, or perhaps the result of some nefarious ropework? Breathing is becoming harder and harder.");break;case 6:this.message("The machine creaks slightly, following [you] struggles. Rope and wood embraces you firmly, like some kind of psychotic lover.");break;case 7:this.message("[Your] heart races as you ponder [your] next step. There is a way out, of that [you are] sure. There is always a way out. The Gemini Pair will regret not killing [you] when they had the chance.");break;case 8:this.message("For a moment, the light dims and flickers, as you'd expect for such a old installation. Unfortunately, the digital counter is completely unaffected, and continues its evil descent towards [your] impending fate.");break;case 9:this.message("The ominous blade shines against the erratic lightning, its corroded metal giving it a sense of cruelty and diabolical character.")}this.updateOverlay()}"examine"==e.verb&&"costume"==e.noun&&this.message("Both the cape and the utility belt are completely missing, though.")},before(e){if("type"==e.verb){if(!this.handOut)return this.message("[You] can't reach the keypad with [your] hands in the stocks."),Gx;"n"==e.directionAsWritten&&(e.noun="n"),"button"==e.noun&&e.noun2&&(e.noun=e.noun2)}e.noun||e.verb||this.handOut||"left"!=e.adjective&&"right"!=e.adjective||!this.rightOrLeftQuestion||(e.verb="pull",e.noun="hand"),e.verb||"up"!=e.direction&&"down"!=e.direction||!this.upOrDownQuestion||(e.verb="move",e.noun="blade"),"get"==e.verb&&"glove"==e.noun&&this.handOut&&(e.verb="examine"),"remove"==e.verb&&"boots"==e.noun&&(e.verb="slide",e.noun="leg"),this.rightOrLeftQuestion=!1},check(e){if("take"==e.verb&&"key"==e.noun){if(!this.handOut)return this.feetOut&&"foot"==e.noun2?this.message("Good idea, but taking the key with [your] feet is way too risky, due to the way it rests on the table and the distance involved. [You] will just end up losing it. There must be a better way."):this.tableMoved||this.feetOut?this.message("[You] can't reach the table with [your] hands in the stocks."):this.message("That would be quite the feat, considering [your] current predicament."),!1;if(!this.tableMoved)return this.message("The table is, unfortunately, completely out of reach."),!1}return!0},after(e){"take"==e.verb&&"key"==e.noun&&this.showImage("guillotine"),"examine"==e.verb&&"key"==e.noun&&(this.tableMoved?this.message("You've managed to move the table close, so the key is now just at an arm's length."):this.message("The key rests in a small table, out of reach."))},locations:{"guillotine-start":{name:"Tied to the guillotine",hideObjects:!0,description:function(e){let t=e.handOut?"[I am] lying face up over a wood plank, head and left hand tightly stuck inside cruel stocks alongside .":"[I am] lying face up over a wood plank, [my] hands and head tightly stuck inside cruel stocks.";return t+=" Multiple loops of rope, expertly bound, dig disturbingly all around [my] body and pin [me] firmly to the board.",e.feetOut&&(t+=" Metal shackles pull [my] feet far below, keeping [me] uncomfortably stretched."),t+="\nThe true evil of this situation, however, is the guillotine's massive blade, resting precariously a distance from [my] head.",t},responses:{"ex blade":"It's an imposing chunk of metal, sharp like hell with no doubt. Strong uprights guide its way towards [your] impending doom.\n[You are] not able to see the full mechanism from this position, but a rope comes down from there and passes through a mechanical box.","ex uprights":"They are just two strong metal poles with a rail inside.","ex rail, ex rails":"The blade should fall through them. [You] can see no apparent way to block them or tamper with them.","ex machine":function(){return this.message("The fiendish construction has a full size wood bed (where [you're] lying), a stock, a blade, and two uprights.\nThere is no handle. The trigger mechanism seems to be a small metal box featuring an electronic counter. A rope comes down from the blade mechanism and passes through a hole in the trigger box."),Gx},"take counter":"The trigger mechanism is out of reach.","ex counter":function(e){return this.message("The trigger box is a massive lump of metal securely screwed to the guillotine. Some kind of rope connects the mechanism to the box, but [you] can't see or access that area from this position. There is a digital display showing a timer, which continuously races towards [your] impending doom. Next to that, there is also a keypad."),this.showCounter=!0,Ux},"stop counter":"*[You]'d have to figure a way to do that. [You] notice a digital keypad to the side of the counter. It seems to be expecting some kind of password.","break counter":function(e){return this.handOut?(this.message("[You] can't reach the trigger box."),Gx):(this.message("The trigger box is solid metal and [you] can barely reach it. [You] have no chance to disable it through violence alone."),Gx)},"ex keypad":"The keypad has ten digits you'd expect, an ENTER button, and four one-letter buttons labeled R, T, and N, and a red button.","type password":"*But [you] don't know the password!",press:function(e){if(e.number)return this.mess("You type the number "+e.number+" and press the ENTER button... "),this.waitForKey((()=>(this.message("Suddenly, there is a deep sound, and the time counter starts to go faster!"),this.extraSpeed++,Ux)));switch(e.noun){case"r":case"t":case"n":return this.message("You reach out to the keypad and press the "+e.noun.toUpperCase()+" button. It doesn't seem to do anything, though."),Ux;default:return this.message("What do you want to type, exactly?"+e.noun),Gx}},"ex legs, ex feet":">ex boots","ex boots":function(e){return this.feetOut?this.message("[You] have been able to get [your] feet out of the shackles. [Your] body is tied to the board, but at least [your] legs have some mobility."):this.message("[You] don't have a good view, but by the feel of it, [your] feet are secured by a pair of shackles, which seem to have been bolted to the wood board [you are] lying on.\nThe shackles are just a bit too large for [your] legs. [You] may be able to slide [your] feet out of [your] boots given enough time and effort."),Ux},"open shackles, remove shackles":function(e){return this.feetOut?(this.message("Both [your] feet are already free."),Gx):(this.message("[You] try to force the shackles open with all [your] might, but the bulky steel is far too strong to be forced open."),Ux)},"remove foot":">remove boots","remove boots":">pull leg","slide foot, slide legs, pull foot":">pull leg","pull leg":function(e){if(this.feetOut)return this.message("Both [your] feet are already free."),Gx;switch(this.extraTime=!0,++this.slideFeetCounter){case 1:this.message("[You] pull both [your] feet with all [your] strength, trying to get them out of the embrace of the cold, implacable steel. For the moment, though, [you] achieve nothing else than hurting [yourself].");break;case 2:this.message("[You] embrace [yourself] and pull again the feet out of the boots. The shackles won't budge.");break;case 3:this.message("[You] continue [your] efforts. [Your] legs shake under the effort, and the steel won't give up.");break;case 4:this.message("[You are] almost out of breath from [your] struggles, but [you] finally notice some leeway. At least one foot is almost out. Come on!");break;case 5:this.message("Finally! One foot slides out of the boot, and shortly follows the other one. Both [your] feet hurt like hell, but they are at least free of the cruel shackles."),this.message("Both [your] boots seem to have fallen from the table after the efforts."),this.feetOut=!0,this.showImage("guillotine")}return Ux},"ex shackles":"A pair of steel shackles, bolted to the wood board. [You] don't have a good view from here.","ex rope":">ex ropes","pull rope":">take rope","take rope":"*The rope is out of reach.","ex board":"The board [you are] lying on is sturdy, thick and old.","break board":"[You] briefly test the strenght of the wood board, only to find it thick and as solid as a rock.","ex crotch":">ex ropes crotch","ex neck":">ex ropes neck","ex torso":">ex ropes torso","ex back":">ex ropes back","ex ropes":function(e){let t=e.noun2;if(this.handOut)switch(t){case"crotch":this.message("The crotch rope uncomfortably digs between [your] legs, perhaps as some form of sick humililiation. It's quite distracting... And something [you] are sure [you]'ll remember when it's time for payback.");break;case"torso":this.message("Tight ropes pin your torso to the table. The bondage looks complicated and there is probably no easy access to the knots from this position.");break;case"chest":this.message("[Your] breasts are uncomfortably tied. Another form of sick humilliation, perhaps.");break;case"back":this.message("[You] are sure at least of the knots tying your torso down are on [your] back, but others may be under the table and out of reach.");break;case"neck":this.message("A few ropes around [your] neck pin it to the table. Careful! [You]'ll need to get rid of those ropes or [you]'ll never be able to raise up [your] head out of those damn stocks, even if [you are] able to open them somehow.");break;default:return this.message("[You] check the ropes around [your] body using [your] free hand. They seem to be expertly tied, with no room for comfort, and they go all around the board [you are] lying on. They are pinning [you] so hard, even if [you are] able to open the stocks, [you'd] still need to do something about them or [you] won't be able to get out of the way of the blade. But how?"),this.message("Close examination reveals dozens of knots, carefully interwined between them. Even finding them is going to take time. There are knots around [your] neck, behind [your] back, all around [your] torso, and over [your] chest and [your] crotch."),Ux}else this.message("[You] have no good view of the ropes tying [your] body, but they seem to be really tight and solid. They are pinning [you] hard down to the table, offering no leeway at all, so even if [you] get rid of the stocks somehow, they may still present an obstacle of their own.\nIf [you] had some freedom of movement, perhaps [you] could do something about them, though.");return Ux},"remove ropes, cut ropes, break ropes":">untie ropes",untie:function(e){if(0==this.handOut)return this.message("Mangling with the ropes is pretty much impossible from this position."),Gx;let t=e.noun;switch("ropes"!=e.noun&&"knots"!=e.noun||(t=e.noun2),t){case"crotch":this.message("[You] fumble around the ropes around [your] crotch. Ouch! They don't seem to fulfill any purpose, other than presenting some kind of... unwanted distraction.");break;case"torso":this.message("[You] fumble around the ropes tying [your] torso to the board. Most of the knots are under the table, out of view, so there is no way to untie them at the moment.");break;case"chest":this.message("[You] fumble around the ropes tying [your] breasts. Ouch! Why are those be so tight? Removing those would take too much time, and it would serve no useful purpose at the moment.");break;case"back":this.message("[You] fumble around the ropes behind [your] back. [You] find one knot and untie it, easing some pressure, but there are dozens of them. [You]'d need a lot of time to even find them all.");break;case"neck":this.message("[You] fumble around the ropes tying [your] neck to the table, finding one knot and untying it dillingently."),this.ropesLoose||(this.ropesLoose=!0,this.message("[You] probably don't have time to remove all the knots, but at least [your] neck is somewhat loose. This could be enough to get [your] neck out of the blade's path... Or at least [you] hope so."));break;default:return this.message("[You] fight against the ropes for a little while, but are not able to get any progress. On closer inspection, there are knots around [your] neck, behind [your] back, all around [your] torso, and over [your] chest and [your] crotch. Perhaps by focusing on any specific area, [you] could have better luck."),Ux}return Ux},"break stock":">open stock","remove stock":">open stock","open stock":function(e){return this.padlockOpen?this.bladePosition<0?(this.message("[You] try to push the stocks up, but with the blade so close to [your] neck, there is just no room! Damn!"),Ux):(this.stocksOpen=!0,this.message("At last, you push the stocks open. The heavy wood falls down to the floor. Now [you] can get up, and leave forever this cursed contraption!"),this.batmanManeuver--,this.showImage("guillotine"),Ux):("bar"==e.noun2&&"inventory"==this.findEntity("bar").location?this.message("[You] try to pry open the stocks using the small bar. It's completely fruitless due to the strength of the padlock, though."):this.handOut?this.message("[You] try to force open the stocks using all [your] strength using [your] free hand, but the task is simply impossible while that damn padlock remains closed."):this.message("[You] push the stocks, trying to force them open somehow. Despite struggling with all [your] might, as far as [you] can go, [you] achieve nothing. The stocks are securely locked with a padlock and they won't bulge even a quarter of an inch."),Ux)},"ex stock":function(e){return this.message("The stocks are made from two sturdy pieces of wood, and they are closed and locked with an imposing padlock. It seems to be hollow in the middle, so the blade can pass through it."),this.handOut?this.message("[Your] head and [your] left hand are still stuck in the stock. [You]'ve been able to slid [your] right hand out of the stock and it's now free."):(this.message("[Your] head and both [your] hands are stuck inside."),$x(this)),Ux},"take glove":function(e){return this.handOut?this.execute(e,"ex glove",!0):(this.message("[You] can't remove [your] gloves while [your] hands remain in the stocks."),Gx)},"ex glove":">ex gloves","ex gloves":function(e){return this.handOut?"left"==e.adjective?this.message("Unfortunately, the lockpick was in [your] right glove, not the left one."):this.message("[Your] right glove has fallen out to the floor and is completely out of reach."):this.message("[Your] trusty lockpick, which has saved [you] from multiple dire situations, is still safely concealed in [your] right glove. [You] could use it to pick the padlock and get out of there. [You] won't be able to do anything of the sort, though, while those damn stocks constraint any of [your] movements."),Gx},"remove glove":">pull hand","remove hand, remove hands, pull hands":function(e){return this.execute(e,this.slideHandNoticed||"glove"==e.noun2?"pull hand":"open stocks",!0)},"slide hand":">pull hand","slide glove":">pull hand","pull hand":function(e){if("left"==e.adjective)return this.message("[You] fight the stocks for a moment, only to find [your] left hand has effectively no leeway at all. There is no way [you]'ll be able to get it out without opening them first."),Ux;if("right"!=e.adjective)return this.message("Which one?"),this.rightOrLeftQuestion=!0,Gx;if(this.handOut)return this.message("[Your] right hand is already free."),Gx;switch(this.extraTime=!0,++this.slideHandCounter){case 1:this.message("[You] pull [your] hand with full force, trying to slide it out of its glove, and finding just the tiny bit of leeway. Ouch! [You're] not sure if [you are] getting some progress done, but it's certainly hurting.");break;case 2:this.message("[You] grind [your] teeth and pull again with all [your] might. The pain grows, as [you] try to fit the hand through a hole way too small for its size. The damn thing may as well be full of needles.");break;case 3:this.message("Forcing [yourself] to ignore the pain, [you] redouble [your] efforts. [Your] hand feels almost completely numb, and [you] can't but wonder if [you]'ve broken something.");break;case 4:this.message("[You are] almost out of breath from [your] struggles. The hand finally moves, if just a little... Yes, it's now finally sliding out of the glove. Just... Just a little more...");break;case 5:this.message("Finally! [Your] hand finally slides out of the glove, free from those fiendish stocks. It's completely dumb and [your] thumb looks like a mess, but a wound is preferable to death."),this.message("As soon as it's free from the hand, the glove falls out at the other side of the stocks."),this.handOut=!0,this.showImage("guillotine");break;default:this.message("Hand counter "+this.slideHandCounter)}return Ux},"ex hand, ex hands":function(e){return this.handOut?this.message("[Your] hand looks bloody and nasty, and hurts quite a bit. One or more fingers are probably dislocated or broken. [You] can't see [yourself] doing any kind of proper finesse task any time soon, and [you] can forget about exercising any serious force, too."):(this.message("[Your] hands are stuck inside those wicked stocks, with barely any room to struggle."),$x(this)),Ux},"ex head":"[Your] head is stuck inside those wicked stocks, with barely any room to move.","ex padlock":"The padlock looks pretty big and sturdy. It binds the two pieces of the stocks closely together.","break padlock":function(e){return"inventory"==this.findEntity("bar").location?this.execute(e,"open padlock with bar",!0):this.execute(e,"open padlock",!0)},"take padlock, pull padlock":">open padlock","turn key":function(e){return this.padlockKeyTurns>=2?this.execute(e,"open padlock",!0):Hx},"open padlock, remove padlock, unlock padlock":function(e){let t="inventory"==this.findEntity("key").location,i="inventory"==this.findEntity("bar").location,r="none";if("bar"==e.noun2?r="bar":"key"==e.noun2&&(r="key"),"none"==r&&t&&(r="key"),"none"==r&&i&&!t&&(r="bar"),"key"==r){if(!t)return this.message("[You] don't have the key."),Gx;switch(++this.padlockKeyTurns){case 1:this.message("[You] clumsily fail to insert the key into the padlock. Damn! [Your] hand hurts like hell, which doesn't make things any easier. Let's try this again...");break;case 2:this.message("After several further attempts, [you are] able to insert the key into the padlock. It's a surprisingly tight fit. Now, [you] only need to turn it and freedom will be [yours].");break;case 3:this.message("Damn! The key is stuck. No matter how much [you] turn it one way or another, it doesn't budge at all.");break;default:this.message("[You] try once and again, to no avail. The realization reels like pure ice inside [your] skin. This is not the right key for the padlock, it never was. What a cruel, sad joke... True despair can only be felt by those who see the rays of hope crumbling before them. Damn you!")}return Ux}return"bar"==r?i?(this.extraTime=!0,this.message("[You] try to force the padlock using the metal bar. There is room to fit the bar between the shank and the padlock body, so [you] pass the bar through the hole and try to pry it open with all [your] strength. Unfortunately, the latch is way too strong for [me], not to mention [your] hand is a mess."),Ux):(this.message("[You] don't have that."),Gx):(this.handOut?this.message("[You] reach the padlock and tamper with it for a while, to no avail. It's an ancient model and [you're] confident [you] would be able to pick it open with the appropiate tool, but unfortunately [you] lost [your] lockpick when [your] right glove felt to the floor a moment ago."):this.message("The padlock is close enough, so [you] try to stretch [your] hand as much as [you] can, but there is no luck. The damn thing is just out of [your] reach. [You are] not touching it, at least not while the hands remain in the stocks."),Ux)},"turn head, move head, dodge":function(e){if(this.stocksOpen)return this.execute(e,"struggle",!0)},escape:">struggle",leave:">struggle",stand:">struggle",struggle:function(e){return this.stocksOpen?this.ropesLoose?(this.message("With no stocks to limit [you] movements, [you] move [your] head just enough to stay out of the way of the blade."),this.waitForKey((()=>(this.message("...And not a second too soon! The blade finally slips and falls down, crashing against the lower stock, but luckily finding nothing in its way. Now, only a few knots remain in [your] way, and [you] have all the time in the world to get rid of them."),this.escaped=!0,this.showImage("guillotine"),this.waitForKey((()=>(this.clear(),this.message("[You]'ve escaped one deathtrap more, but this time it has been a close one. Way too close. Boiling thoughts of justified revenge cross [your] mind. Hidden from both the public and the authorities's knowledge, the Gemini Pair have been seeding chaos and mayhem, unhinged by justice and retribution. But now that [you] have a target, their murdering spree is as good as finished."),this.message("\nThank you for playing Thunder Girl 2. Press any key to restart."),this.waitForKey((()=>(this.clear(),this.restartGame(),Xx)))))))))):(this.message("As soon as [you] try to get up, [you] find [your] effort aborted. The ropes are pinning [you] to the table far too tightly, even reaching [your] neck! [You] can't move your head out of the way of the blade!"),Ux):(this.message("[You] struggle with all [your] might for a few moments, to no avail. The stocks won't bulge even a quarter of an inch. In addition, [your] body is uncomfortably tied to the board, leaving [you] no room for movement at all."),Ux)},"ex wheels":"The accessory table seems to have wheels. It can be pushed around easily.","kick table, pull table, drag table, move table, take table, bring table, push table, slide table":function(e){return this.tableMoved?(this.message("The table is already close enough."),Gx):this.feetOut?this.batmanManeuver?(this.message("[You] need [your] legs in order to reach the table, but [you] need both [your] legs just to barely keep the blade up!"),Gx):(this.message("Using [your] foot, [you are] able to pull the table closer, helped by the fact that it has wheels. It comes to rest close to [your] head."),this.tableMoved=!0,this.showImage("guillotine"),Ux):(this.message("The table is, unfortunately, completely out of reach."),Gx)},"break table":function(e){return this.tableMoved||!this.handOut?(this.message("The table is out of reach."),Gx):(this.message("But how? The table looks certainly old and battered and the frame looks like its missing some screws at least, but it's not as if punching the thing would accomplish anything useful."),Gx)},"ex stretcher":"Just a slab of wood at the bottom of the table. It looks heavy. There is nothing on it.","ex weight, take weight":"*The stretcher at the bottom of the table is barely out of reach. In addition, it seems to be securely screwed to the frame.","ex frame":function(e){return this.tableMoved?this.message("The small table is supported by a robust metal frame, made from multiple parts welded and screwed together. It has seen better days, though: some of the screws are missing and a few of the bars seem to be severely damaged."):this.message("The small table seems to be supported by some kind of metal frame, as far as [you] can see at a distance."),Ux},"ex bars, ex parts":function(e){if(this.tableMoved)return"destroyed"==this.findEntity("bar").location?this.handOut?(this.barNoticed=!0,this.message("[You] reach for the table frame and check it out thoroughly. One of the bars is seemingly loose, has no screws anymore, and could probably be pulled out of the whole ensamble with some effort."),Ux):(this.message("[You]'d like to take a closer look at that frame, but [you] have no way to do that with [your] hands stuck."),Gx):(this.message("The rest of the frame ensemble looks solid."),Ux)},"take bar, pull bar":function(e){if(this.barNoticed){let e=this.findEntity("bar");return"destroyed"==e.location?(this.message("It takes [me] some time, but [you are] able to get the bar out of the frame ensemble. It is just a small chunk of metal, but perhaps it could be useful somehow."),e.location="inventory",this.message("Now [you] have [the object].",e),this.extraTime=!0,Ux):(this.message("[You] already pulled out the metal bar."),Gx)}},"put bar, drop bar":function(e){if(this.present("bar")){if(this.batmanManeuver>0&&("blade"==e.noun2||"padlock"==e.noun2))return this.message("[You] don't have enough strength to force open the padlock, but another way has just been presented."),this.message("Carefully, [you] insert the metal bar in the padlock hole and move the body of the bar over the stocks, under the hulking blade. Now, the next step is going to decide [your] fate."),this.barUnderBlade=!0,this.showImage("guillotine"),Ux;if("blade"==e.noun2)return this.message("[You] could put the bar in the blade's path, and that could be useful, but the small bar would do nothing to stop the falling blade from continuing its evil path towards [your] neck. It will just fly off after the impact."),Gx;if("padlock"==e.noun2)return this.message("There is room to fit the bar between the shank and the padlock body. [You] could try to force open the padlock this way. [You] could also try to get the bar in the blade's path, perhaps as a way to force open the padlock."),Gx}},"stop blade":function(e){return this.fallingBlade?this.batmanManeuver>0?(this.message("[You] are already stopping the blade. This position is excruciatingly hard, though. [You] are not going to last long."),Gx):"inventory"==this.findEntity("bar").location&&"bar"==e.noun2?(this.message("Desperately, [you] try to stop the immense hunk of metal using the small metal bar. But due to the strength of the impact, and the feeble state of [your] aching hand, the bar bounces off easily, and the hulking metal passes through unimpeded."),Ux):!this.handOut||this.feetOut&&"foot"==e.noun2?this.feetOut&&"foot"==e.noun2?(this.message("Desperately, [you] bring [your] feet up towards the blade. Catching the hunk of metal as it falls, exerting enough leg force to stop it in place and prevent its fall to continue, is a feat very few could perform. But there is only one Thunder Girl."),this.message("[You] did it! But this position is extremely precarious. The blade weights quite a lot, and [you] can only keep this position for very short time. [Your] legs shudder under the effort required. [You] need to do something, and do it fast!"),this.batmanManeuver=1,this.batmanManeuverPerformed=!0,this.showImage("guillotine"),Ux):(this.message("[You] try to force [your] hands out with a last second struggle, but there is just no more time."),Ux):(this.message("Desperately, [you] try to catch the immense hunk of metal with [your] free hand. [Your] precarious position and [your] wounds make the whole endeavor fruitless. The hulking metal completely slips pass [your] hand after [you]'ve barely touched it."),Ux):("bar"==e.noun2&&this.present("bar")?this.message("There is no way such a small chunk of metal could do anything against a hulking blade falling down with its full weight."):this.message("The blade is a hefty piece of metal. There is no saving [your] neck if this thing comes down with full force."),Gx)},"drop blade":function(e){if(this.batmanManeuver>0)return this.message("[You] have just let the blade go."),this.barUnderBlade&&(this.message("The brutal impact prys open the padlock with full violence, its parts flying out who knows where alongside the bar."),this.barUnderBlade=!1,this.padlockOpen=!0,this.showImage("guillotine"),this.findEntity("bar").location="guillotine-floor"),this.message("Unfortunately, there is nothing else to stop the blade and the only thing in its path is [yourself]."),this.batmanManeuver=0,Ux},"lower blade":">move blade down","raise blade, rise blade":">move blade up","pull blade, move blade, push blade":function(e){if(this.batmanManeuver>0)return"down"==e.direction?this.bladePosition<0?(this.message("The blade is already way too close for comfort!"),Gx):(this.bladePosition--,this.message("Carefully, [you] relieve some pressure from your legs, bringing the blade down, dangerously close to [your] neck."),this.barUnderBlade&&(this.message("The blade finds the metal bar in its path, and the weight is more than enough to pry the padlock open. Both the bar and the padlock fall to the floor."),this.barUnderBlade=!1,this.padlockOpen=!0),this.showImage("guillotine"),Ux):"up"==e.direction?(this.bladePosition++,this.message("Forcing [your] muscles pass the point of pain, [you] exert more force to [your] legs, moving the blade slightly up, even if just a few inches."),this.showImage("guillotine"),Ux):(this.message("In which direction?"),this.upOrDownQuestion=!0,Gx)},"ex light, ex lightning":">ex lamp","ex room":"The air is a humid, with a metallic scent, and quite dusty. [You] think [you are] in some big and neglected room, probably undergound, inside the Theatre of Illusions. [You] can't see anything more than a few feet away, so [you] have no way to be sure about [your] surroundings.",wait:"[You] rest for a few seconds, catching [your] breath.",help:function(e){return Jx?(ew.call(this),Gx):(this.askPrompt="Do you want hints?| ",this.askCallback=e=>("y"==e.substring(0,1).toLowerCase()?(Jx=!0,this.message("Ok. Hints will be shown after you die. If you really want them, just ask for help and I'll give you one immediately.")):this.message("Ok. Ask again if you change your mind."),Gx),zx)}}}}};const iw={Linear:e=>e,Quadratic:{In:e=>e*e,Out:e=>e*(2-e),InOut:e=>(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},Cubic:{In:e=>e*e*e,Out:e=>--e*e*e+1,InOut:e=>(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},Quartic:{In:e=>e*e*e*e,Out:e=>1- --e*e*e*e,InOut:e=>(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},Quintic:{In:e=>e*e*e*e*e,Out:e=>--e*e*e*e*e+1,InOut:e=>(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},Sinusoidal:{In:e=>1-Math.cos(e*Math.PI/2),Out:e=>Math.sin(e*Math.PI/2),InOut:e=>.5*(1-Math.cos(Math.PI*e))},Exponential:{In:e=>0===e?0:Math.pow(1024,e-1),Out:e=>1===e?1:1-Math.pow(2,-10*e),InOut:e=>0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))},Circular:{In:e=>1-Math.sqrt(1-e*e),Out:e=>Math.sqrt(1- --e*e),InOut:e=>(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},Elastic:{In:e=>0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI),Out:e=>0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1,InOut:e=>0===e?0:1===e?1:(e*=2)<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1},Back:{In(e){var t=1.70158;return e*e*((t+1)*e-t)},Out(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},InOut(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:e=>1-iw.Bounce.Out(1-e),Out:e=>e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,InOut:e=>e<.5?.5*iw.Bounce.In(2*e):.5*iw.Bounce.Out(2*e-1)+.5}},rw={Linear(e,t){var i=e.length-1,r=i*t,n=Math.floor(r),o=rw.Utils.Linear;return t<0?o(e[0],e[1],r):t>1?o(e[i],e[i-1],i-r):o(e[n],e[n+1>i?i:n+1],r-n)},Bezier(e,t){for(var i=0,r=e.length-1,n=Math.pow,o=rw.Utils.Bernstein,s=0;s<=r;s++)i+=n(1-t,r-s)*n(t,s)*e[s]*o(r,s);return i},CatmullRom(e,t){var i=e.length-1,r=i*t,n=Math.floor(r),o=rw.Utils.CatmullRom;return e[0]===e[i]?(t<0&&(n=Math.floor(r=i*(1+t))),o(e[(n-1+i)%i],e[n],e[(n+1)%i],e[(n+2)%i],r-n)):t<0?e[0]-(o(e[0],e[0],e[1],e[1],-r)-e[0]):t>1?e[i]-(o(e[i],e[i],e[i-1],e[i-1],r-i)-e[i]):o(e[n?n-1:0],e[n],e[i<n+1?i:n+1],e[i<n+2?i:n+2],r-n)},Utils:{Linear:(e,t,i)=>(t-e)*i+e,Bernstein(e,t){var i=rw.Utils.Factorial;return i(e)/i(t)/i(e-t)},Factorial:(nw=[1],function(e){var t=1;if(nw[e])return nw[e];for(var i=e;i>1;i--)t*=i;return nw[e]=t,t}),CatmullRom(e,t,i,r,n){var o=.5*(i-e),s=.5*(r-t),a=n*n;return(2*t-2*i+o+s)*(n*a)+(-3*t+3*i-2*o-s)*a+o*n+t}}};var nw;class ow{static _nextId=0;static nextId(){return""+ow._nextId++}_valuesStart={};_valuesEnd={};_valuesStartRepeat={};_duration=1e3;_repeat=0;_yoyo=!1;_isPlaying=!1;_reversed=!1;_delayTime=0;_startTime=null;_easingFunction=iw.Linear;_interpolationFunction=rw.Linear;_chainedTweens=[];_onStartCallback=null;_onStartCallbackFired=!1;_onUpdateCallback=null;_onCompleteCallback=null;_onStopCallback=null;constructor(e,t){this._object=e,this._group=t||sw,this._id=ow.nextId()}getId(){return this._id}isPlaying(){return this._isPlaying}to(e,t){return this._valuesEnd=e,void 0!==t&&(this._duration=t),this}start(e){this._group.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=void 0!==e?"string"==typeof e?aw()+parseFloat(e):e:aw(),this._startTime+=this._delayTime;let t=this._valuesEnd,i=this._valuesStart,r=this._valuesStartRepeat,n=this._object;for(let e in t){let o=t[e];if(o instanceof Array){if(0===o.length)continue;t[e]=[n[e]].concat(t[e])}void 0!==n[e]&&(i[e]=n[e],r[e]=i[e])}return this}stop(){return this._isPlaying?(this._group.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),this.stopChainedTweens(),this):this}end(){return this.update(this._startTime+this._duration),this}stopChainedTweens(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop()}group(e){return this._group=e,this}delay(e){return this._delayTime=e,this}repeat(e){return this._repeat=e,this}repeatDelay(e){return this._repeatDelayTime=e,this}yoyo(e){return this._yoyo=e,this}easing(e){return this._easingFunction=e,this}interpolation(e){return this._interpolationFunction=e,this}chain(...e){return this._chainedTweens=e,this}onStart(e){return this._onStartCallback=e,this}onUpdate(e){return this._onUpdateCallback=e,this}onComplete(e){return this._onCompleteCallback=e,this}onStop(e){return this._onStopCallback=e,this}update(e){var t,i,r;if(e<this._startTime)return!0;for(t in!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),i=(e-this._startTime)/this._duration,i=0===this._duration||i>1?1:i,r=this._easingFunction(i),this._valuesEnd)if(void 0!==this._valuesStart[t]){var n=this._valuesStart[t],o=this._valuesEnd[t];o instanceof Array?this._object[t]=this._interpolationFunction(o,r):("string"==typeof o&&(o="+"===o.charAt(0)||"-"===o.charAt(0)?n+parseFloat(o):parseFloat(o)),"number"==typeof o&&(this._object[t]=n+(o-n)*r))}if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object),1===i){if(this._repeat>0){isFinite(this._repeat)&&this._repeat--;let i=this._valuesStart,r=this._valuesStartRepeat,n=this._valuesEnd;for(t in this._valuesStartRepeat){if("string"==typeof n[t]&&(r[t]=r[t]+parseFloat(n[t])),this._yoyo){var s=r[t];r[t]=n[t],n[t]=s}i[t]=r[t]}return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,!0}null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var a=0,h=this._chainedTweens.length;a<h;a++)this._chainedTweens[a].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0}}const sw=new class{_tweens={};_tweensAddedDuringUpdate={};getAll(){return Object.keys(this._tweens).map(function(e){return this._tweens[e]}.bind(this))}removeAll(){this._tweens={}}add(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e}remove(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]}update(e,t=!1){var i=Object.keys(this._tweens);if(0===i.length)return!1;for(e=void 0!==e?e:aw();i.length>0;){this._tweensAddedDuringUpdate={};for(var r=0;r<i.length;r++){var n=this._tweens[i[r]];n&&!1===n.update(e)&&(t||delete this._tweens[i[r]])}i=Object.keys(this._tweensAddedDuringUpdate)}return!0}};let aw;requestAnimationFrame((function e(t){sw.update(t),requestAnimationFrame(e)})),aw="undefined"==typeof window&&void 0!==Va&&Va.hrtime?function(){var e=Va.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now.bind(window.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()};var hw={};!function(e){function t(e,t){this.options={},e=e||this.options;var i={frequency:350,peak:1};for(var r in this.inputNode=this.filterNode=o.context.createBiquadFilter(),this.filterNode.type=t,this.outputNode=n.context.createGain(),this.filterNode.connect(this.outputNode),i)this[r]=e[r],this[r]=void 0===this[r]||null===this[r]?i[r]:this[r]}function i(){var e,t,i=o.context.sampleRate*this.time,r=n.context.createBuffer(2,i,o.context.sampleRate),s=r.getChannelData(0),a=r.getChannelData(1);for(t=0;i>t;t++)e=this.reverse?i-t:t,s[t]=(2*Math.random()-1)*Math.pow(1-e/i,this.decay),a[t]=(2*Math.random()-1)*Math.pow(1-e/i,this.decay);this.reverbNode.buffer&&(this.inputNode.disconnect(this.reverbNode),this.reverbNode.disconnect(this.wetGainNode),this.reverbNode=n.context.createConvolver(),this.inputNode.connect(this.reverbNode),this.reverbNode.connect(this.wetGainNode)),this.reverbNode.buffer=r}function r(e){for(var t=o.context.sampleRate,i=new Float32Array(t),r=Math.PI/180,n=0;t>n;n++){var s=2*n/t-1;i[n]=(3+e)*s*20*r/(Math.PI+e*Math.abs(s))}return i}var n={},o=n,s=hw,a="function"==typeof define&&define.amd;s?hw=n:a?define([],n):e.Pizzicato=e.Pz=n;var h=e.AudioContext||e.webkitAudioContext;if(h){n.context=new h;var u=n.context.createGain();u.connect(n.context.destination),n.Util={isString:function(e){return"[object String]"===toString.call(e)},isObject:function(e){return"[object Object]"===toString.call(e)},isFunction:function(e){return"[object Function]"===toString.call(e)},isNumber:function(e){return"[object Number]"===toString.call(e)&&e===+e},isArray:function(e){return"[object Array]"===toString.call(e)},isInRange:function(e,t,i){return!!(o.Util.isNumber(e)&&o.Util.isNumber(t)&&o.Util.isNumber(i))&&(e>=t&&i>=e)},isBool:function(e){return"boolean"==typeof e},isOscillator:function(e){return e&&"[object OscillatorNode]"===e.toString()},isAudioBufferSourceNode:function(e){return e&&"[object AudioBufferSourceNode]"===e.toString()},isSound:function(e){return e instanceof o.Sound},isEffect:function(e){for(var t in n.Effects)if(e instanceof n.Effects[t])return!0;return!1},normalize:function(e,t,i){return o.Util.isNumber(e)&&o.Util.isNumber(t)&&o.Util.isNumber(i)?(i-t)*e/1+t:void 0},getDryLevel:function(e){return!o.Util.isNumber(e)||e>1||0>e?0:.5>=e?1:1-2*(e-.5)},getWetLevel:function(e){return!o.Util.isNumber(e)||e>1||0>e?0:e>=.5?1:1-2*(.5-e)}};var l=n.context.createGain(),c=Object.getPrototypeOf(Object.getPrototypeOf(l)),d=c.connect;c.connect=function(e){var t=o.Util.isEffect(e)?e.inputNode:e;return d.call(this,t),e},Object.defineProperty(n,"volume",{enumerable:!0,get:function(){return u.gain.value},set:function(e){o.Util.isInRange(e,0,1)&&u&&(u.gain.value=e)}}),Object.defineProperty(n,"masterGainNode",{enumerable:!1,get:function(){return u},set:function(e){console.error("Can't set the master gain node")}}),n.Events={on:function(e,t,i){e&&t&&(this._events=this._events||{},(this._events[e]||(this._events[e]=[])).push({callback:t,context:i||this,handler:this}))},trigger:function(e){if(e){var t,i,r,n;for(this._events=this._events||{},t=this._events[e]||(this._events[e]=[]),i=Math.max(0,arguments.length-1),r=[],n=0;i>n;n++)r[n]=arguments[n+1];for(n=0;n<t.length;n++)t[n].callback.apply(t[n].context,r)}},off:function(e){e?this._events[e]=void 0:this._events={}}},n.Sound=function(e,t){function i(e,t){e=e||{},this.getRawSourceNode=function(){var t=this.sourceNode?this.sourceNode.frequency.value:e.frequency,i=n.context.createOscillator();return i.type=e.type||"sine",i.frequency.value=t||440,i},this.sourceNode=this.getRawSourceNode(),this.sourceNode.gainSuccessor=o.context.createGain(),this.sourceNode.connect(this.sourceNode.gainSuccessor),h.isFunction(t)&&t()}function r(e,t){e=h.isArray(e)?e:[e];var i=new XMLHttpRequest;i.open("GET",e[0],!0),i.responseType="arraybuffer",i.onload=function(i){n.context.decodeAudioData(i.target.response,function(e){a.getRawSourceNode=function(){var t=n.context.createBufferSource();return t.loop=this.loop,t.buffer=e,t},h.isFunction(t)&&t()}.bind(a),function(i){return console.error("Error decoding audio file "+e[0]),e.length>1?(e.shift(),void r(e,t)):(i=i||new Error("Error decoding audio file "+e[0]),void(h.isFunction(t)&&t(i)))}.bind(a))},i.onreadystatechange=function(t){4===i.readyState&&200!==i.status&&console.error("Error while fetching "+e[0]+". "+i.statusText)},i.send()}function s(e,t){var i=h.isFunction(e)?e:e.audioFunction,r=h.isObject(e)&&e.bufferSize?e.bufferSize:null;if(!r)try{n.context.createScriptProcessor()}catch(e){r=2048}this.getRawSourceNode=function(){var e=n.context.createScriptProcessor(r,1,1);return e.onaudioprocess=i,e}}var a=this,h=n.Util,u=function(e){if(e&&!h.isFunction(e)&&!h.isString(e)&&!h.isObject(e))return"Description type not supported. Initialize a sound using an object, a function or a string.";if(h.isObject(e)){if(!h.isString(e.source)||-1===["wave","file","input","script","sound"].indexOf(e.source))return"Specified source not supported. Sources can be wave, file, input or script";if(!("file"!==e.source||e.options&&e.options.path))return"A path is needed for sounds with a file source";if(!("script"!==e.source||e.options&&e.options.audioFunction))return"An audio function is needed for sounds with a script source"}}(e),l=h.isObject(e)&&h.isObject(e.options);if(u)throw console.error(u),new Error("Error initializing Pizzicato Sound: "+u);this.detached=l&&e.options.detached,this.masterVolume=n.context.createGain(),this.fadeNode=n.context.createGain(),this.fadeNode.gain.value=0,this.detached||this.masterVolume.connect(n.masterGainNode),this.lastTimePlayed=0,this.effects=[],this.effectConnectors=[],this.playing=this.paused=!1,this.loop=l&&e.options.loop,this.attack=l&&h.isNumber(e.options.attack)?e.options.attack:.04,this.volume=l&&h.isNumber(e.options.volume)?e.options.volume:1,l&&h.isNumber(e.options.release)?this.release=e.options.release:l&&h.isNumber(e.options.sustain)?(console.warn("'sustain' is deprecated. Use 'release' instead."),this.release=e.options.sustain):this.release=.04,e?h.isString(e)?r.bind(this)(e,t):h.isFunction(e)?s.bind(this)(e,t):"file"===e.source?r.bind(this)(e.options.path,t):"wave"===e.source?i.bind(this)(e.options,t):"input"===e.source?function(e,t){if(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.getUserMedia||navigator.mediaDevices.getUserMedia){var i=function(e){a.getRawSourceNode=function(){return n.context.createMediaStreamSource(e)},h.isFunction(t)&&t()}.bind(a),r=function(e){h.isFunction(t)&&t(e)};navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!0}).then(i).catch(r):navigator.getUserMedia({audio:!0},i,r)}else console.error("Your browser does not support getUserMedia")}.bind(this)(e,t):"script"===e.source?s.bind(this)(e.options,t):"sound"===e.source&&function(e,t){this.getRawSourceNode=e.sound.getRawSourceNode,e.sound.sourceNode&&o.Util.isOscillator(e.sound.sourceNode)&&(this.sourceNode=this.getRawSourceNode(),this.frequency=e.sound.frequency)}.bind(this)(e.options,t):i.bind(this)({},t)},n.Sound.prototype=Object.create(n.Events,{play:{enumerable:!0,value:function(e,t){this.playing||(o.Util.isNumber(t)||(t=this.offsetTime||0),o.Util.isNumber(e)||(e=0),this.playing=!0,this.paused=!1,this.sourceNode=this.getSourceNode(),this.applyAttack(),o.Util.isFunction(this.sourceNode.start)&&(this.lastTimePlayed=n.context.currentTime-t,this.sourceNode.start(o.context.currentTime+e,t)),this.trigger("play"))}},stop:{enumerable:!0,value:function(){(this.paused||this.playing)&&(this.paused=this.playing=!1,this.stopWithRelease(),this.offsetTime=0,this.trigger("stop"))}},pause:{enumerable:!0,value:function(){if(!this.paused&&this.playing){this.paused=!0,this.playing=!1,this.stopWithRelease();var e=o.context.currentTime-this.lastTimePlayed;this.sourceNode.buffer?this.offsetTime=e%(this.sourceNode.buffer.length/o.context.sampleRate):this.offsetTime=e,this.trigger("pause")}}},clone:{enumerable:!0,value:function(){for(var e=new n.Sound({source:"sound",options:{loop:this.loop,attack:this.attack,release:this.release,volume:this.volume,sound:this}}),t=0;t<this.effects.length;t++)e.addEffect(this.effects[t]);return e}},onEnded:{enumerable:!0,value:function(e){return function(){this.sourceNode&&this.sourceNode!==e||(this.playing&&this.stop(),this.paused||this.trigger("end"))}}},addEffect:{enumerable:!0,value:function(e){if(!o.Util.isEffect(e))return console.error("The object provided is not a Pizzicato effect."),this;this.effects.push(e);var t=this.effectConnectors.length>0?this.effectConnectors[this.effectConnectors.length-1]:this.fadeNode;t.disconnect(),t.connect(e);var i=o.context.createGain();return this.effectConnectors.push(i),e.connect(i),i.connect(this.masterVolume),this}},removeEffect:{enumerable:!0,value:function(e){var t=this.effects.indexOf(e);if(-1===t)return console.warn("Cannot remove effect that is not applied to this sound."),this;var i=this.playing;i&&this.pause();var r=0===t?this.fadeNode:this.effectConnectors[t-1];r.disconnect();var n,o=this.effectConnectors[t];return o.disconnect(),e.disconnect(o),this.effectConnectors.splice(t,1),this.effects.splice(t,1),n=t>this.effects.length-1||0===this.effects.length?this.masterVolume:this.effects[t],r.connect(n),i&&this.play(),this}},connect:{enumerable:!0,value:function(e){return this.masterVolume.connect(e),this}},disconnect:{enumerable:!0,value:function(e){return this.masterVolume.disconnect(e),this}},connectEffects:{enumerable:!0,value:function(){for(var e=[],t=0;t<this.effects.length;t++){var i=t===this.effects.length-1?this.masterVolume:this.effects[t+1].inputNode;e[t]=o.context.createGain(),this.effects[t].outputNode.disconnect(this.effectConnectors[t]),this.effects[t].outputNode.connect(i)}}},volume:{enumerable:!0,get:function(){return this.masterVolume?this.masterVolume.gain.value:void 0},set:function(e){o.Util.isInRange(e,0,1)&&this.masterVolume&&(this.masterVolume.gain.value=e)}},frequency:{enumerable:!0,get:function(){return this.sourceNode&&o.Util.isOscillator(this.sourceNode)?this.sourceNode.frequency.value:null},set:function(e){this.sourceNode&&o.Util.isOscillator(this.sourceNode)&&(this.sourceNode.frequency.value=e)}},sustain:{enumerable:!0,get:function(){return console.warn("'sustain' is deprecated. Use 'release' instead."),this.release},set:function(e){console.warn("'sustain' is deprecated. Use 'release' instead."),o.Util.isInRange(e,0,10)&&(this.release=e)}},getSourceNode:{enumerable:!0,value:function(){if(this.sourceNode){var e=this.sourceNode;e.gainSuccessor.gain.setValueAtTime(e.gainSuccessor.gain.value,o.context.currentTime),e.gainSuccessor.gain.linearRampToValueAtTime(1e-4,o.context.currentTime+.2),setTimeout((function(){e.disconnect(),e.gainSuccessor.disconnect()}),200)}var t=this.getRawSourceNode();return t.gainSuccessor=o.context.createGain(),t.connect(t.gainSuccessor),t.gainSuccessor.connect(this.fadeNode),this.fadeNode.connect(this.getInputNode()),o.Util.isAudioBufferSourceNode(t)&&(t.onended=this.onEnded(t).bind(this)),t}},getInputNode:{enumerable:!0,value:function(){return this.effects.length>0?this.effects[0].inputNode:this.masterVolume}},applyAttack:{enumerable:!1,value:function(){if(this.fadeNode.gain.value,this.fadeNode.gain.cancelScheduledValues(o.context.currentTime),this.attack){var e=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,t=this.attack;e||(t=(1-this.fadeNode.gain.value)*this.attack),this.fadeNode.gain.setTargetAtTime(1,o.context.currentTime,2*t)}else this.fadeNode.gain.setTargetAtTime(1,o.context.currentTime,.001)}},stopWithRelease:{enumerable:!1,value:function(e){var t=this.sourceNode,i=function(){return o.Util.isFunction(t.stop)?t.stop(0):t.disconnect()};if(this.fadeNode.gain.value,this.fadeNode.gain.cancelScheduledValues(o.context.currentTime),!this.release)return this.fadeNode.gain.setTargetAtTime(0,o.context.currentTime,.001),void i();var r=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,n=this.release;r||(n=this.fadeNode.gain.value*this.release),this.fadeNode.gain.setTargetAtTime(1e-5,o.context.currentTime,n/5),window.setTimeout((function(){i()}),1e3*n)}}}),n.Group=function(e){e=e||[],this.mergeGainNode=o.context.createGain(),this.masterVolume=o.context.createGain(),this.sounds=[],this.effects=[],this.effectConnectors=[],this.mergeGainNode.connect(this.masterVolume),this.masterVolume.connect(o.masterGainNode);for(var t=0;t<e.length;t++)this.addSound(e[t])},n.Group.prototype=Object.create(o.Events,{connect:{enumerable:!0,value:function(e){return this.masterVolume.connect(e),this}},disconnect:{enumerable:!0,value:function(e){return this.masterVolume.disconnect(e),this}},addSound:{enumerable:!0,value:function(e){return o.Util.isSound(e)?this.sounds.indexOf(e)>-1?void console.warn("The Pizzicato.Sound object was already added to this group"):e.detached?void console.warn("Groups do not support detached sounds. You can manually create an audio graph to group detached sounds together."):(e.disconnect(o.masterGainNode),e.connect(this.mergeGainNode),void this.sounds.push(e)):void console.error("You can only add Pizzicato.Sound objects")}},removeSound:{enumerable:!0,value:function(e){var t=this.sounds.indexOf(e);return-1===t?void console.warn("Cannot remove a sound that is not part of this group."):(e.disconnect(this.mergeGainNode),e.connect(o.masterGainNode),void this.sounds.splice(t,1))}},volume:{enumerable:!0,get:function(){return this.masterVolume?this.masterVolume.gain.value:void 0},set:function(e){o.Util.isInRange(e,0,1)&&(this.masterVolume.gain.value=e)}},play:{enumerable:!0,value:function(){for(var e=0;e<this.sounds.length;e++)this.sounds[e].play();this.trigger("play")}},stop:{enumerable:!0,value:function(){for(var e=0;e<this.sounds.length;e++)this.sounds[e].stop();this.trigger("stop")}},pause:{enumerable:!0,value:function(){for(var e=0;e<this.sounds.length;e++)this.sounds[e].pause();this.trigger("pause")}},addEffect:{enumerable:!0,value:function(e){if(!o.Util.isEffect(e))return console.error("The object provided is not a Pizzicato effect."),this;this.effects.push(e);var t=this.effectConnectors.length>0?this.effectConnectors[this.effectConnectors.length-1]:this.mergeGainNode;t.disconnect(),t.connect(e);var i=o.context.createGain();return this.effectConnectors.push(i),e.connect(i),i.connect(this.masterVolume),this}},removeEffect:{enumerable:!0,value:function(e){var t=this.effects.indexOf(e);if(-1===t)return console.warn("Cannot remove effect that is not applied to this group."),this;var i=0===t?this.mergeGainNode:this.effectConnectors[t-1];i.disconnect();var r,n=this.effectConnectors[t];return n.disconnect(),e.disconnect(n),this.effectConnectors.splice(t,1),this.effects.splice(t,1),r=t>this.effects.length-1||0===this.effects.length?this.masterVolume:this.effects[t],i.connect(r),this}}}),n.Effects={};var f=Object.create(null,{connect:{enumerable:!0,value:function(e){return this.outputNode.connect(e),this}},disconnect:{enumerable:!0,value:function(e){return this.outputNode.disconnect(e),this}}});n.Effects.Delay=function(e){this.options={},e=e||this.options;var t={feedback:.5,time:.3,mix:.5};for(var i in this.inputNode=n.context.createGain(),this.outputNode=n.context.createGain(),this.dryGainNode=n.context.createGain(),this.wetGainNode=n.context.createGain(),this.feedbackGainNode=n.context.createGain(),this.delayNode=n.context.createDelay(),this.inputNode.connect(this.dryGainNode),this.dryGainNode.connect(this.outputNode),this.delayNode.connect(this.feedbackGainNode),this.feedbackGainNode.connect(this.delayNode),this.inputNode.connect(this.delayNode),this.delayNode.connect(this.wetGainNode),this.wetGainNode.connect(this.outputNode),t)this[i]=e[i],this[i]=void 0===this[i]||null===this[i]?t[i]:this[i]},n.Effects.Delay.prototype=Object.create(f,{mix:{enumerable:!0,get:function(){return this.options.mix},set:function(e){o.Util.isInRange(e,0,1)&&(this.options.mix=e,this.dryGainNode.gain.value=n.Util.getDryLevel(this.mix),this.wetGainNode.gain.value=n.Util.getWetLevel(this.mix))}},time:{enumerable:!0,get:function(){return this.options.time},set:function(e){o.Util.isInRange(e,0,180)&&(this.options.time=e,this.delayNode.delayTime.value=e)}},feedback:{enumerable:!0,get:function(){return this.options.feedback},set:function(e){o.Util.isInRange(e,0,1)&&(this.options.feedback=parseFloat(e,10),this.feedbackGainNode.gain.value=this.feedback)}}}),n.Effects.Compressor=function(e){this.options={},e=e||this.options;var t={threshold:-24,knee:30,attack:.003,release:.25,ratio:12};for(var i in this.inputNode=this.compressorNode=n.context.createDynamicsCompressor(),this.outputNode=n.context.createGain(),this.compressorNode.connect(this.outputNode),t)this[i]=e[i],this[i]=void 0===this[i]||null===this[i]?t[i]:this[i]},n.Effects.Compressor.prototype=Object.create(f,{threshold:{enumerable:!0,get:function(){return this.compressorNode.threshold.value},set:function(e){n.Util.isInRange(e,-100,0)&&(this.compressorNode.threshold.value=e)}},knee:{enumerable:!0,get:function(){return this.compressorNode.knee.value},set:function(e){n.Util.isInRange(e,0,40)&&(this.compressorNode.knee.value=e)}},attack:{enumerable:!0,get:function(){return this.compressorNode.attack.value},set:function(e){n.Util.isInRange(e,0,1)&&(this.compressorNode.attack.value=e)}},release:{enumerable:!0,get:function(){return this.compressorNode.release.value},set:function(e){n.Util.isInRange(e,0,1)&&(this.compressorNode.release.value=e)}},ratio:{enumerable:!0,get:function(){return this.compressorNode.ratio.value},set:function(e){n.Util.isInRange(e,1,20)&&(this.compressorNode.ratio.value=e)}},getCurrentGainReduction:function(){return this.compressorNode.reduction}}),n.Effects.LowPassFilter=function(e){t.call(this,e,"lowpass")},n.Effects.HighPassFilter=function(e){t.call(this,e,"highpass")};var p=Object.create(f,{frequency:{enumerable:!0,get:function(){return this.filterNode.frequency.value},set:function(e){n.Util.isInRange(e,10,22050)&&(this.filterNode.frequency.value=e)}},peak:{enumerable:!0,get:function(){return this.filterNode.Q.value},set:function(e){n.Util.isInRange(e,1e-4,1e3)&&(this.filterNode.Q.value=e)}}});n.Effects.LowPassFilter.prototype=p,n.Effects.HighPassFilter.prototype=p,n.Effects.Distortion=function(e){this.options={},e=e||this.options;var t={gain:.5};for(var i in this.waveShaperNode=n.context.createWaveShaper(),this.inputNode=this.outputNode=this.waveShaperNode,t)this[i]=e[i],this[i]=void 0===this[i]||null===this[i]?t[i]:this[i]},n.Effects.Distortion.prototype=Object.create(f,{gain:{enumerable:!0,get:function(){return this.options.gain},set:function(e){o.Util.isInRange(e,0,1)&&(this.options.gain=e,this.adjustGain())}},adjustGain:{writable:!1,configurable:!1,enumerable:!1,value:function(){for(var e,t=o.Util.isNumber(this.options.gain)?parseInt(100*this.options.gain,10):50,i=44100,r=new Float32Array(i),n=Math.PI/180,s=0;i>s;++s)e=2*s/i-1,r[s]=(3+t)*e*20*n/(Math.PI+t*Math.abs(e));this.waveShaperNode.curve=r}}}),n.Effects.Flanger=function(e){this.options={},e=e||this.options;var t={time:.45,speed:.2,depth:.1,feedback:.1,mix:.5};for(var i in this.inputNode=n.context.createGain(),this.outputNode=n.context.createGain(),this.inputFeedbackNode=n.context.createGain(),this.wetGainNode=n.context.createGain(),this.dryGainNode=n.context.createGain(),this.delayNode=n.context.createDelay(),this.oscillatorNode=n.context.createOscillator(),this.gainNode=n.context.createGain(),this.feedbackNode=n.context.createGain(),this.oscillatorNode.type="sine",this.inputNode.connect(this.inputFeedbackNode),this.inputNode.connect(this.dryGainNode),this.inputFeedbackNode.connect(this.delayNode),this.inputFeedbackNode.connect(this.wetGainNode),this.delayNode.connect(this.wetGainNode),this.delayNode.connect(this.feedbackNode),this.feedbackNode.connect(this.inputFeedbackNode),this.oscillatorNode.connect(this.gainNode),this.gainNode.connect(this.delayNode.delayTime),this.dryGainNode.connect(this.outputNode),this.wetGainNode.connect(this.outputNode),this.oscillatorNode.start(0),t)this[i]=e[i],this[i]=void 0===this[i]||null===this[i]?t[i]:this[i]},n.Effects.Flanger.prototype=Object.create(f,{time:{enumberable:!0,get:function(){return this.options.time},set:function(e){o.Util.isInRange(e,0,1)&&(this.options.time=e,this.delayNode.delayTime.value=o.Util.normalize(e,.001,.02))}},speed:{enumberable:!0,get:function(){return this.options.speed},set:function(e){o.Util.isInRange(e,0,1)&&(this.options.speed=e,this.oscillatorNode.frequency.value=o.Util.normalize(e,.5,5))}},depth:{enumberable:!0,get:function(){return this.options.depth},set:function(e){o.Util.isInRange(e,0,1)&&(this.options.depth=e,this.gainNode.gain.value=o.Util.normalize(e,5e-4,.005))}},feedback:{enumberable:!0,get:function(){return this.options.feedback},set:function(e){o.Util.isInRange(e,0,1)&&(this.options.feedback=e,this.feedbackNode.gain.value=o.Util.normalize(e,0,.8))}},mix:{enumberable:!0,get:function(){return this.options.mix},set:function(e){o.Util.isInRange(e,0,1)&&(this.options.mix=e,this.dryGainNode.gain.value=n.Util.getDryLevel(this.mix),this.wetGainNode.gain.value=n.Util.getWetLevel(this.mix))}}}),n.Effects.StereoPanner=function(e){this.options={},e=e||this.options;var t={pan:0};for(var i in this.inputNode=n.context.createGain(),this.outputNode=n.context.createGain(),n.context.createStereoPanner?(this.pannerNode=n.context.createStereoPanner(),this.inputNode.connect(this.pannerNode),this.pannerNode.connect(this.outputNode)):n.context.createPanner?(console.warn("Your browser does not support the StereoPannerNode. Will use PannerNode instead."),this.pannerNode=n.context.createPanner(),this.pannerNode.type="equalpower",this.inputNode.connect(this.pannerNode),this.pannerNode.connect(this.outputNode)):(console.warn("Your browser does not support the Panner effect."),this.inputNode.connect(this.outputNode)),t)this[i]=e[i],this[i]=void 0===this[i]||null===this[i]?t[i]:this[i]},n.Effects.StereoPanner.prototype=Object.create(f,{pan:{enumerable:!0,get:function(){return this.options.pan},set:function(e){o.Util.isInRange(e,-1,1)&&(this.options.pan=e,this.pannerNode)&&(this.pannerNode.toString().indexOf("StereoPannerNode")>-1?this.pannerNode.pan.value=e:this.pannerNode.setPosition(e,0,1-Math.abs(e)))}}}),n.Effects.Convolver=function(e,t){this.options={},e=e||this.options;var i=this,r=new XMLHttpRequest,s={mix:.5};for(var a in this.callback=t,this.inputNode=n.context.createGain(),this.convolverNode=n.context.createConvolver(),this.outputNode=n.context.createGain(),this.wetGainNode=n.context.createGain(),this.dryGainNode=n.context.createGain(),this.inputNode.connect(this.convolverNode),this.convolverNode.connect(this.wetGainNode),this.inputNode.connect(this.dryGainNode),this.dryGainNode.connect(this.outputNode),this.wetGainNode.connect(this.outputNode),s)this[a]=e[a],this[a]=void 0===this[a]||null===this[a]?s[a]:this[a];return e.impulse?(r.open("GET",e.impulse,!0),r.responseType="arraybuffer",r.onload=function(e){var t=e.target.response;n.context.decodeAudioData(t,(function(e){i.convolverNode.buffer=e,i.callback&&o.Util.isFunction(i.callback)&&i.callback()}),(function(e){e=e||new Error("Error decoding impulse file"),i.callback&&o.Util.isFunction(i.callback)&&i.callback(e)}))},r.onreadystatechange=function(t){4===r.readyState&&200!==r.status&&console.error("Error while fetching "+e.impulse+". "+r.statusText)},void r.send()):void console.error("No impulse file specified.")},n.Effects.Convolver.prototype=Object.create(f,{mix:{enumerable:!0,get:function(){return this.options.mix},set:function(e){o.Util.isInRange(e,0,1)&&(this.options.mix=e,this.dryGainNode.gain.value=n.Util.getDryLevel(this.mix),this.wetGainNode.gain.value=n.Util.getWetLevel(this.mix))}}}),n.Effects.PingPongDelay=function(e){this.options={},e=e||this.options;var t={feedback:.5,time:.3,mix:.5};for(var i in this.inputNode=n.context.createGain(),this.outputNode=n.context.createGain(),this.delayNodeLeft=n.context.createDelay(),this.delayNodeRight=n.context.createDelay(),this.dryGainNode=n.context.createGain(),this.wetGainNode=n.context.createGain(),this.feedbackGainNode=n.context.createGain(),this.channelMerger=n.context.createChannelMerger(2),this.inputNode.connect(this.dryGainNode),this.dryGainNode.connect(this.outputNode),this.delayNodeLeft.connect(this.channelMerger,0,0),this.delayNodeRight.connect(this.channelMerger,0,1),this.delayNodeLeft.connect(this.delayNodeRight),this.feedbackGainNode.connect(this.delayNodeLeft),this.delayNodeRight.connect(this.feedbackGainNode),this.inputNode.connect(this.feedbackGainNode),this.channelMerger.connect(this.wetGainNode),this.wetGainNode.connect(this.outputNode),t)this[i]=e[i],this[i]=void 0===this[i]||null===this[i]?t[i]:this[i]},n.Effects.PingPongDelay.prototype=Object.create(f,{mix:{enumerable:!0,get:function(){return this.options.mix},set:function(e){o.Util.isInRange(e,0,1)&&(this.options.mix=e,this.dryGainNode.gain.value=n.Util.getDryLevel(this.mix),this.wetGainNode.gain.value=n.Util.getWetLevel(this.mix))}},time:{enumerable:!0,get:function(){return this.options.time},set:function(e){o.Util.isInRange(e,0,180)&&(this.options.time=e,this.delayNodeLeft.delayTime.value=e,this.delayNodeRight.delayTime.value=e)}},feedback:{enumerable:!0,get:function(){return this.options.feedback},set:function(e){o.Util.isInRange(e,0,1)&&(this.options.feedback=parseFloat(e,10),this.feedbackGainNode.gain.value=this.feedback)}}}),n.Effects.Reverb=function(e){this.options={},e=e||this.options;var t={mix:.5,time:.01,decay:.01,reverse:!1};for(var r in this.inputNode=n.context.createGain(),this.reverbNode=n.context.createConvolver(),this.outputNode=n.context.createGain(),this.wetGainNode=n.context.createGain(),this.dryGainNode=n.context.createGain(),this.inputNode.connect(this.reverbNode),this.reverbNode.connect(this.wetGainNode),this.inputNode.connect(this.dryGainNode),this.dryGainNode.connect(this.outputNode),this.wetGainNode.connect(this.outputNode),t)this[r]=e[r],this[r]=void 0===this[r]||null===this[r]?t[r]:this[r];i.bind(this)()},n.Effects.Reverb.prototype=Object.create(f,{mix:{enumerable:!0,get:function(){return this.options.mix},set:function(e){o.Util.isInRange(e,0,1)&&(this.options.mix=e,this.dryGainNode.gain.value=n.Util.getDryLevel(this.mix),this.wetGainNode.gain.value=n.Util.getWetLevel(this.mix))}},time:{enumerable:!0,get:function(){return this.options.time},set:function(e){o.Util.isInRange(e,1e-4,10)&&(this.options.time=e,i.bind(this)())}},decay:{enumerable:!0,get:function(){return this.options.decay},set:function(e){o.Util.isInRange(e,1e-4,10)&&(this.options.decay=e,i.bind(this)())}},reverse:{enumerable:!0,get:function(){return this.options.reverse},set:function(e){o.Util.isBool(e)&&(this.options.reverse=e,i.bind(this)())}}}),n.Effects.Tremolo=function(e){this.options={},e=e||this.options;var t={speed:4,depth:1,mix:.8};for(var i in this.inputNode=n.context.createGain(),this.outputNode=n.context.createGain(),this.dryGainNode=n.context.createGain(),this.wetGainNode=n.context.createGain(),this.tremoloGainNode=n.context.createGain(),this.tremoloGainNode.gain.value=0,this.lfoNode=n.context.createOscillator(),this.shaperNode=n.context.createWaveShaper(),this.shaperNode.curve=new Float32Array([0,1]),this.shaperNode.connect(this.tremoloGainNode.gain),this.inputNode.connect(this.dryGainNode),this.dryGainNode.connect(this.outputNode),this.lfoNode.connect(this.shaperNode),this.lfoNode.type="sine",this.lfoNode.start(0),this.inputNode.connect(this.tremoloGainNode),this.tremoloGainNode.connect(this.wetGainNode),this.wetGainNode.connect(this.outputNode),t)this[i]=e[i],this[i]=void 0===this[i]||null===this[i]?t[i]:this[i]},n.Effects.Tremolo.prototype=Object.create(f,{mix:{enumerable:!0,get:function(){return this.options.mix},set:function(e){o.Util.isInRange(e,0,1)&&(this.options.mix=e,this.dryGainNode.gain.value=n.Util.getDryLevel(this.mix),this.wetGainNode.gain.value=n.Util.getWetLevel(this.mix))}},speed:{enumerable:!0,get:function(){return this.options.speed},set:function(e){o.Util.isInRange(e,0,20)&&(this.options.speed=e,this.lfoNode.frequency.value=e)}},depth:{enumerable:!0,get:function(){return this.options.depth},set:function(e){o.Util.isInRange(e,0,1)&&(this.options.depth=e,this.shaperNode.curve=new Float32Array([1-e,1]))}}}),n.Effects.DubDelay=function(e){this.options={},e=e||this.options;var t={feedback:.6,time:.7,mix:.5,cutoff:700};for(var i in this.inputNode=n.context.createGain(),this.outputNode=n.context.createGain(),this.dryGainNode=n.context.createGain(),this.wetGainNode=n.context.createGain(),this.feedbackGainNode=n.context.createGain(),this.delayNode=n.context.createDelay(),this.bqFilterNode=n.context.createBiquadFilter(),this.inputNode.connect(this.dryGainNode),this.dryGainNode.connect(this.outputNode),this.inputNode.connect(this.wetGainNode),this.inputNode.connect(this.feedbackGainNode),this.feedbackGainNode.connect(this.bqFilterNode),this.bqFilterNode.connect(this.delayNode),this.delayNode.connect(this.feedbackGainNode),this.delayNode.connect(this.wetGainNode),this.wetGainNode.connect(this.outputNode),t)this[i]=e[i],this[i]=void 0===this[i]||null===this[i]?t[i]:this[i]},n.Effects.DubDelay.prototype=Object.create(f,{mix:{enumerable:!0,get:function(){return this.options.mix},set:function(e){o.Util.isInRange(e,0,1)&&(this.options.mix=e,this.dryGainNode.gain.value=n.Util.getDryLevel(this.mix),this.wetGainNode.gain.value=n.Util.getWetLevel(this.mix))}},time:{enumerable:!0,get:function(){return this.options.time},set:function(e){o.Util.isInRange(e,0,180)&&(this.options.time=e,this.delayNode.delayTime.value=e)}},feedback:{enumerable:!0,get:function(){return this.options.feedback},set:function(e){o.Util.isInRange(e,0,1)&&(this.options.feedback=parseFloat(e,10),this.feedbackGainNode.gain.value=this.feedback)}},cutoff:{enumerable:!0,get:function(){return this.options.cutoff},set:function(e){o.Util.isInRange(e,0,4e3)&&(this.options.cutoff=e,this.bqFilterNode.frequency.value=this.cutoff)}}}),n.Effects.RingModulator=function(e){this.options={},e=e||this.options;var t={speed:30,distortion:1,mix:.5};for(var i in this.inputNode=n.context.createGain(),this.outputNode=n.context.createGain(),this.dryGainNode=n.context.createGain(),this.wetGainNode=n.context.createGain(),this.vIn=n.context.createOscillator(),this.vIn.start(0),this.vInGain=n.context.createGain(),this.vInGain.gain.value=.5,this.vInInverter1=n.context.createGain(),this.vInInverter1.gain.value=-1,this.vInInverter2=n.context.createGain(),this.vInInverter2.gain.value=-1,this.vInDiode1=new g(n.context),this.vInDiode2=new g(n.context),this.vInInverter3=n.context.createGain(),this.vInInverter3.gain.value=-1,this.vcInverter1=n.context.createGain(),this.vcInverter1.gain.value=-1,this.vcDiode3=new g(n.context),this.vcDiode4=new g(n.context),this.outGain=n.context.createGain(),this.outGain.gain.value=3,this.compressor=n.context.createDynamicsCompressor(),this.compressor.threshold.value=-24,this.compressor.ratio.value=16,this.inputNode.connect(this.dryGainNode),this.dryGainNode.connect(this.outputNode),this.inputNode.connect(this.vcInverter1),this.inputNode.connect(this.vcDiode4.node),this.vcInverter1.connect(this.vcDiode3.node),this.vIn.connect(this.vInGain),this.vInGain.connect(this.vInInverter1),this.vInGain.connect(this.vcInverter1),this.vInGain.connect(this.vcDiode4.node),this.vInInverter1.connect(this.vInInverter2),this.vInInverter1.connect(this.vInDiode2.node),this.vInInverter2.connect(this.vInDiode1.node),this.vInDiode1.connect(this.vInInverter3),this.vInDiode2.connect(this.vInInverter3),this.vInInverter3.connect(this.compressor),this.vcDiode3.connect(this.compressor),this.vcDiode4.connect(this.compressor),this.compressor.connect(this.outGain),this.outGain.connect(this.wetGainNode),this.wetGainNode.connect(this.outputNode),t)this[i]=e[i],this[i]=void 0===this[i]||null===this[i]?t[i]:this[i]};var g=function(e){this.context=e,this.node=this.context.createWaveShaper(),this.vb=.2,this.vl=.4,this.h=1,this.setCurve()};return g.prototype.setDistortion=function(e){return this.h=e,this.setCurve()},g.prototype.setCurve=function(){var e,t,i,r,n,o,s;for(t=1024,e=o=0,s=(n=new Float32Array(t)).length;s>=0?s>o:o>s;e=s>=0?++o:--o)i=(e-512)/512,r=(i=Math.abs(i))<=this.vb?0:this.vb<i&&i<=this.vl?this.h*(Math.pow(i-this.vb,2)/(2*this.vl-2*this.vb)):this.h*i-this.h*this.vl+this.h*(Math.pow(this.vl-this.vb,2)/(2*this.vl-2*this.vb)),n[e]=r;return this.node.curve=n},g.prototype.connect=function(e){return this.node.connect(e)},n.Effects.RingModulator.prototype=Object.create(f,{mix:{enumerable:!0,get:function(){return this.options.mix},set:function(e){o.Util.isInRange(e,0,1)&&(this.options.mix=e,this.dryGainNode.gain.value=n.Util.getDryLevel(this.mix),this.wetGainNode.gain.value=n.Util.getWetLevel(this.mix))}},speed:{enumerable:!0,get:function(){return this.options.speed},set:function(e){o.Util.isInRange(e,0,2e3)&&(this.options.speed=e,this.vIn.frequency.value=e)}},distortion:{enumerable:!0,get:function(){return this.options.distortion},set:function(e){if(o.Util.isInRange(e,.2,50)){this.options.distortion=parseFloat(e,10);for(var t=[this.vInDiode1,this.vInDiode2,this.vcDiode3,this.vcDiode4],i=0,r=t.length;r>i;i++)t[i].setDistortion(e)}}}}),n.Effects.Quadrafuzz=function(e){this.options={},e=e||this.options;var t={lowGain:.6,midLowGain:.8,midHighGain:.5,highGain:.6};this.inputNode=o.context.createGain(),this.outputNode=o.context.createGain(),this.dryGainNode=o.context.createGain(),this.wetGainNode=o.context.createGain(),this.lowpassLeft=o.context.createBiquadFilter(),this.lowpassLeft.type="lowpass",this.lowpassLeft.frequency.value=147,this.lowpassLeft.Q.value=.7071,this.bandpass1Left=o.context.createBiquadFilter(),this.bandpass1Left.type="bandpass",this.bandpass1Left.frequency.value=587,this.bandpass1Left.Q.value=.7071,this.bandpass2Left=o.context.createBiquadFilter(),this.bandpass2Left.type="bandpass",this.bandpass2Left.frequency.value=2490,this.bandpass2Left.Q.value=.7071,this.highpassLeft=o.context.createBiquadFilter(),this.highpassLeft.type="highpass",this.highpassLeft.frequency.value=4980,this.highpassLeft.Q.value=.7071,this.overdrives=[];for(var i=0;4>i;i++)this.overdrives[i]=o.context.createWaveShaper(),this.overdrives[i].curve=r();this.inputNode.connect(this.wetGainNode),this.inputNode.connect(this.dryGainNode),this.dryGainNode.connect(this.outputNode);var n=[this.lowpassLeft,this.bandpass1Left,this.bandpass2Left,this.highpassLeft];for(i=0;i<n.length;i++)this.wetGainNode.connect(n[i]),n[i].connect(this.overdrives[i]),this.overdrives[i].connect(this.outputNode);for(var s in t)this[s]=e[s],this[s]=void 0===this[s]||null===this[s]?t[s]:this[s]},n.Effects.Quadrafuzz.prototype=Object.create(f,{lowGain:{enumerable:!0,get:function(){return this.options.lowGain},set:function(e){o.Util.isInRange(e,0,1)&&(this.options.lowGain=e,this.overdrives[0].curve=r(o.Util.normalize(this.lowGain,0,150)))}},midLowGain:{enumerable:!0,get:function(){return this.options.midLowGain},set:function(e){o.Util.isInRange(e,0,1)&&(this.options.midLowGain=e,this.overdrives[1].curve=r(o.Util.normalize(this.midLowGain,0,150)))}},midHighGain:{enumerable:!0,get:function(){return this.options.midHighGain},set:function(e){o.Util.isInRange(e,0,1)&&(this.options.midHighGain=e,this.overdrives[2].curve=r(o.Util.normalize(this.midHighGain,0,150)))}},highGain:{enumerable:!0,get:function(){return this.options.highGain},set:function(e){o.Util.isInRange(e,0,1)&&(this.options.highGain=e,this.overdrives[3].curve=r(o.Util.normalize(this.highGain,0,150)))}}}),n}console.error("No AudioContext found in this environment. Please ensure your window or global object contains a working AudioContext constructor function.")}("undefined"!=typeof window?window:t);let uw={button:[o("g5jfO")],geminiIntro:[o("1fX8z")],music_gemini:[o("41TBC")],music_tension:[o("qCFne")]},lw={},cw={};const dw={music_gemini:.75};let fw,pw,gw=!1,mw=!0,yw=!0;function vw(){window.localStorage.setItem("musicSettings",JSON.stringify({fxEnabled:mw,musicEnabled:yw}))}function bw(){return yw}function xw(e){mw=e,vw()}function ww(e){yw=e,fw=null,hw.context&&"suspended"===hw.context.state&&e&&hw.context.resume(),pw&&cw[pw].playing&&(cw[pw].volume=e?1*(dw[pw]||1):0),vw()}function _w(){for(let e in uw){let t=e.startsWith("music_");cw[e]=new hw.Sound({source:"file",options:{path:uw[e],attack:0,release:t?1:0}},(()=>{lw[e]=!0,fw===e&&Ow(e)}))}gw=!0}function Tw(e){if(gw||_w(),lw[e]){hw.context&&"suspended"===hw.context.state&&hw.context.resume();let t=cw[e];cw[e].playing&&(t=cw[e].clone()),mw&&(t.volume=mw?1:0,t.play())}}function Sw(e,t=!0){pw=e,cw[pw].loop=t,cw[pw].play(),cw[pw].volume=yw?1*(dw[pw]||1):0}function Ew(){gw||_w(),pw&&pw&&cw[pw].playing&&(cw[pw].stop(),pw=null)}function Ow(e,t=!0){gw||_w(),pw!=e&&(lw[e]?(hw.context&&"suspended"===hw.context.state&&hw.context.resume(),pw&&cw[pw].playing?"music_gemini"==e?(Tw("geminiIntro"),setTimeout((()=>cw[pw].stop()),1e3),setTimeout((()=>Sw(e,t)),1e3)):(cw[pw].stop(),setTimeout((()=>Sw(e,t)),400)):Sw(e,t)):fw=e)}!function(){let e=window.localStorage.getItem("musicSettings");if(void 0!==e){let t=JSON.parse(e);"object"==typeof t&&t&&void 0!==t.fxEnabled&&(mw=t.fxEnabled,yw=t.musicEnabled)}}();let kw=new PIXI.TextStyle({fontFamily:"Permanent Marker",fill:"#ffe32b",fontSize:"32px",dropShadow:!0,dropShadowColor:"#000000FF",dropShadowDistance:2,dropShadowBlur:5,dropShadowAngle:90,stroke:"#000000",strokeThickness:1}),Mw=new PIXI.TextStyle({fontFamily:"Overlock",fontWeight:"bold",fontSize:"24px",wordWrap:!0,fill:"#423b0b"}),Cw=new PIXI.TextStyle({fontFamily:"Permanent Marker",fill:"#ffffff",fontSize:"32px",dropShadow:!0,dropShadowColor:"#000000FF",dropShadowDistance:2,dropShadowBlur:5,dropShadowAngle:90,stroke:"#000000",strokeThickness:1}),Pw=new PIXI.TextStyle({fontFamily:"Permanent Marker",fill:"#423b0b",fontWeight:"bold",fontSize:"40px"});class Aw extends PIXI.Container{optionLabels=[];optionLabelsBelow=[];optionLabelsRight=[];stayOpen=[];selectedOption=0;constructor(e,t,i){super(),this.callback=i,this.bg=new PIXI.mesh.NineSlicePlane(Zw.menu,380,200,240,130),this.bg.scale.set(.5),this.addChild(this.bg),this.titleLabel=new PIXI.Text(e,Pw),this.titleLabel.anchor.set(.5,0),this.titleLabel.position.set(0,10),this.addChild(this.titleLabel),this.bar=new PIXI.Graphics,this.addChild(this.bar);let r=0,n=0,o=80;for(let e of t){let t=new PIXI.Text("string"==typeof e?e:e.label,kw);if(this.optionLabels.push(t),this.optionLabelsRight.push(null),this.optionLabelsBelow.push(null),this.stayOpen.push(!1),t.anchor.set(0,0),t.position.set(0,o),this.addChild(t),n=Math.max(n,t.width),r=Math.max(r,t.width),o+=45,"string"!=typeof e){if(e.extraHeight&&(o+=e.extraHeight),e.textBelow){let i=new PIXI.Text(e.textBelow,Mw);i.position.set(0,50),t.addChild(i),this.optionLabelsBelow[this.optionLabels.length-1]=i}if(e.textRight){let i=new PIXI.Text(e.textRight,kw);i.position.set(400,0),t.addChild(i),this.optionLabelsRight[this.optionLabels.length-1]=i,r=Math.max(r,t.width+40+i.width)}e.stayOpen&&(this.stayOpen[this.stayOpen.length-1]=!0)}}Mw.wordWrapWidth=r;let s=r+200,a=o+50,h=0;for(let e=0;e<this.optionLabels.length;e++)this.optionLabels[e].position.x=s/2-r/2+30,this.optionLabels[e].y+=h,this.optionLabelsRight[e]&&(this.optionLabelsRight[e].position.x=n+40),this.optionLabelsBelow[e]&&(this.optionLabelsBelow[e].style=Mw,this.optionLabelsBelow[e].updateTransform(),h+=this.optionLabelsBelow[e].height+10);a+=h,this.bg.width=2*s,this.bg.height=2*a,this.titleLabel.position.x=s/2,this.bar.position.set(s/2,82),this.bar.beginFill(0,.5),this.bar.drawRect(-s/2+50,0,s-100,45),this.bar.endFill();let u=new PIXI.Sprite(Zw.hand);u.scale.set(.5),u.position.set(-s/2+60,22.5-u.height/2),this.bar.addChild(u),new ow(u).to({x:-s/2+65},500).easing(iw.Sinusoidal.InOut).yoyo(!0).repeat(1/0).start(),this.width=s,this.height=a,this.pivot.set(s/2,a/2),this.visible=!1,window.addEventListener("keydown",(e=>this.keydown(e)),!1),this.selectOption(0)}show(){this.scale.set(0,0),new ow(this.scale).to({x:1,y:1},1e3).easing(iw.Elastic.Out).delay(125).onStart((()=>{this.visible=!0,this.alpha=1})).start()}setTextRight(e,t){this.optionLabelsRight[e]&&(this.optionLabelsRight[e].text=t)}setTextBelow(e,t){this.optionLabelsBelow[e]&&(this.optionLabelsBelow[e].text=t)}selectOption(e){0!=this.optionLabels.length&&(this.optionLabelsRight[this.selectedOption]&&(this.optionLabelsRight[this.selectedOption].style=kw),this.optionLabels[this.selectedOption].style=kw,(e=Math.floor(e%this.optionLabels.length))<0&&(e+=this.optionLabels.length),this.bar.position.y=this.optionLabels[e].y+2,this.selectedOption=e,this.optionLabels[e].style=Cw,this.optionLabelsRight[this.selectedOption]&&(this.optionLabelsRight[this.selectedOption].style=Cw))}keydown(e){if(this.visible)if("ArrowDown"==e.key)Tw("button"),this.selectOption(this.selectedOption+1);else if("ArrowUp"==e.key)Tw("button"),this.selectOption(this.selectedOption-1);else if(" "==e.key||"Enter"==e.key){if(Tw("button"),this.stayOpen[this.selectedOption])return void(null!=this.callback&&this.callback(this.selectedOption));new ow(this.scale).to({x:1.5,y:1.5},500).easing(iw.Exponential.Out).start(),new ow(this).to({alpha:0},125).onComplete((()=>{this.visible=!1,null!=this.callback&&this.callback(this.selectedOption)})).start()}}}var Iw;Iw=JSON.parse('{"name":"thunder-girl-2","version":"1.1.0","description":"","scripts":{"start":"parcel index.html","build":"parcel build index.html --no-source-maps --dist-dir docs"},"keywords":[],"author":"Bladebur","license":"MIT","dependencies":{"@tweenjs/tween.js":"^17.3.0","@types/pixi.js":"^4.8.7","@types/sprintf-js":"^1.1.2","@types/tweenjs":"^1.0.0","@types/webfontloader":"^1.6.29","es6-tween":"^5.5.3","pixi.js":"^4.5.6","pizzicato":"^0.6.4","sprintf-js":"^1.1.2","webfontloader":"^1.6.28"},"devDependencies":{"parcel":"^2.6.0","path-browserify":"^1.0.1","process":"^0.11.10","querystring-es3":"^0.2.1","typescript":"^3.4.5","url":"^0.11.0"}}');const Rw=["It could be a trap. It was, most certainly, a trap.","The venerable Theatre of Illusions, closed and barren for more than forty years after a series of dreadful accidents. It should have been nothing more than a source for spooky legends and a forgotten stockpile of rotting magician props.","If the clues were on point, though, the map revealed it as something far more sinister: the neurological origin of a complex web of criminal abductions, every one of them resulting in a gruesome death and a demented display.","She could be walking right into the den of a psycho, the kind of people who would only enjoy killing in the most abhorrent, agonizing, sick way you can imagine.","It was an easy choice, though.\n    It was a choice she had already made, long ago, the day she came up with her symbolic yellow and black uniform.\n    Facing the cold autumn night, Thunder Girl donned her mask again.","[0,-320] Under a mantle of silence, Thunder Girl descended the rope line, deep into the shadows below. Worried about the easy way in being some kind of an open invitation, she focused on her surroundings.\n    Derelict apparels, boxes, cardboard cutouts and countless gadgets from the world of stage magic piled up and up in dusty neglect, forming an unorganized, seemingly endless maze of shelfs and boards.","Suddenly, a potent flash blinded her. She tensed up, dizzy, ready for some kind of attack. It wouldn't come, though. Instead, there was only laughter.","[1, 420] <black>Welcome, ladies and gentlemen, to the Theatre of Illusions!</black>","<black>Tonight, we are delighted to present you our best all-time special! Daring stunts! Thrilling perils! Breathtaking feats! And last but not least, our most glorious finale, the climax you've been waiting for! The marvelous...! The majestic...! The most anticipated...</black>","<white>...death of Thunder Girl!</white>","The two figures on stage were not familiar to her. Something about the twins crossed the line between the weird and the psychotic: perhaps their mannerism, their dramatic costumes, or the creepy conviction of their speech.\n    <yellow>And who are you, twits?</yellow>, she asked, still somewhat disoriented.","<white>Ouch! So impolite!</white>","<black>What do we have here, my beloved audience? Looks like our volunteer has not been diligent in her research. Fear not! We are nothing less than the <grey>Gemini Pair</grey>, the most dazzling escapologist duo of all time, present and future!","<white>Yes!</white>","<black>...and you, my dear, are nothing more than a mere pretender.</black>","<black>You may have been lucky escaping our little underground challenge, bust rest asured, that was nothing more than a meager starter. You will be delicted to see what we have prepared for you next. Grab her, boys!</black>","Multiple figures openly approached the heroine, seemingly coming from all directions. Thunder Girl readied herself for battle, but she was unprepared for the bizarre nature of her new foes. Instead of the hired henchmen she'd expect, she was surrounded by a number of clumsy looking robot dummies. The 'boys' moved erraticaly, like puppets with broken strings, their eerie apperance completed with cracked skulls, open mouths and some missing eye here and there.","<yellow>What...?</yellow>","She was not able to finish the sentence, as the robots suddenly started to shoot a number of fine metal-looking wires from their open mouths. Unnaturaly, coils formed around her body almost instantly, pinning her arms to her body.","<yellow>Hey! What the hell is this?</yellow>","The shooting spree continued, as more wires wrangled around her legs and torso and the previous ones tightened up. She desperately tried to push them away, but the constriction force around her body was already too strong. Her attempts, in fact, only seemed to make the damn thing tighter.\n    Finally, under the increasing pressure of metal, Thunder Girl found herself unable to stand anymore and awkardly feel to the floor.","<yellow>D... Damn! C... Can't get out...</yellow>","Playful, but assured of their victory, the tweens walked triumphantly towards the heroine's prone figure.","<white>Oh, my, oh, my! She looks so adorable now, sis!</white>","<black>What's the matter, Thunder Girl? Is this the first time you face the strangling wire? I'd advise you not to struggle too much, as it will only accelerate the whole process and make things worse for you. It doesn't really matter, though. The wires won't stop contracting, breaking every bone, digging deep and deeper until eventually your fragile body will be nothing more than a mess of blood and giblets.","<white>Fun, fun, fun!</white>","<black>Worry not, little girl. As much as we'd like to just leave you here to your amusement, we are professionals. What kind of rivals would we be if we didn't give you at least a sporting chance? So we've prepared a much more interesting and fitting challenge especially for you. After all, we have a contract to fulfill.","<yellow>W... What kind of contract? With whom?</yellow>","<black>Curious until the end, aren't you? Don't let those small details disturb your busy mind. You should worry instead about what we are going to do with you.</black>","The other villain had produced some kind of dirty rag exuding a strong odor.","<black>And since we are such a pair of nice girls, we are even going to give you a hand</black>.","<black>See this?</black>.\n    She presented an old-looking small brass key, hanging from a small chain.\n    <black>It's your way out. Fair game, isn't it? The only thing you have to do is to reach it.","<black>But now, it's time to say goodbye. We don't want to spoil the surprise anymore and, as much as we'd like to watch over your struggles, we have precious matters to attend elsewhere. You'll have to excuse us then, as time is of essence</black>.","Unceremoniously, the white twin pressed the rag down over Thunder Girl's face.","<white>Aaaaaand now, please, take a deep breath! Oooone, twoooo aaaand....</white>","<black>...and now the real fun begins. Farewell, Thunder Girl!</black>."],Nw={default:{fontFamily:"Overlock",fontSize:"28px",fill:"#cccccc",align:"left"},center:{align:"center"},b:{fill:"#FFFF88",fontWeight:"bold"},c:{fill:"#FFFFFF",fontWeight:"bold"},yellow:{fontWeight:"bold",fontStyle:"italic",fill:"#FFFF88"},grey:{fontWeight:"bold",fontStyle:"italic",fill:"#cccccc"},black:{fontWeight:"bold",fontStyle:"italic",fill:"#606060"},white:{fontWeight:"bold",fontStyle:"italic",fill:"#FFFFFF"},title:{fill:"#FFFF80",fontWeight:"bold",fontSize:"30px",dropShadow:!0,dropShadowColor:"#000000FF",dropShadowDistance:4,dropShadowBlur:5,dropShadowAngle:90,stroke:"#000000",strokeThickness:6},help:{fill:"#E8E8E8",strokeThickness:2,dropShadow:!0,dropShadowColor:"#000000FF",dropShadowDistance:2,dropShadowBlur:3,dropShadowAngle:90}};class Dw extends PIXI.Container{paragraphIndex=0;chatBoxY=0;photoX=0;photoY=0;photoExtraX=[];started=!1;finished=!1;chatBoxScale=1;constructor(e,t){for(var i in super(),this.adventure=e,this.callback=t,this.map=new PIXI.Sprite(Zw.map),this.logo=new PIXI.Sprite(Zw.logo),this.logo.scale.set(.4,.4),this.chatBox=new PIXI.Sprite(Zw.chatBox),this.photos=[new PIXI.Sprite(Zw.photo1),new PIXI.Sprite(Zw.photo2)],this.version=new PIXI.Text(Iw.description+" "+Iw.version,{fontSize:16,fill:"#c0c0c0",stroke:"#000000",strokeThickness:2}),this.version.anchor.set(1,1),this.version.position.set(window.innerWidth-2,window.innerHeight-2),this.addChild(this.map),this.addChild(this.version),this.map.visible=!0,this.logo.anchor.set(.5,0),this.photos)this.addChild(this.photos[i]),this.photos[i].visible=!1,this.photos[i].anchor.set(.5,0),this.photos[i].scale.set(.75,.75);this.addChild(this.logo),this.fader2=new PIXI.Graphics,this.addChild(this.fader2),this.fader2.visible=!1,this.addChild(this.chatBox),this.chatBox.visible=!1;let r=Object.assign({},Nw);for(var n in r)r[n].wordWrap=!0,r[n].wordWrapWidth=this.chatBox.width-160;this.textBox=new mx("",r),this.textBox.position.set(80,35),this.chatBox.addChild(this.textBox),this.creditsLabel=new mx("\n\n\n\n<help><center><c>Art, music & programming by</c>\nBladebur\n\n<c>Testing & brainstorming</c>\nDudesled\n</center>\n\nThis game is a text adventure. You can type orders in plain English and the computer will try to describe the results to you. Only a small set of English words and verbs are understood. When in doubt, try to use simple sentences. \n\nA few commands have a special meaning:\n    - <b>INVENTORY</b> will display a list of any objects and clothes you are carrying\n    - <b>TAKE</b> to pick up objects (which will then become part of your inventory)\n    - <b>LOOK</b> will describe your surroundings again\n    - <b>EXAMINE</b> is essential to get hints and discover new objects!\n    - <b>HELP</b> will enable the integrated hints system\n\n<b>Warning:</b> the game is very short, but there is a strict time limit. You <b>can</b> get yourself stuck with no hope to escape, and you will die often. Also, be careful: most of your actions will consume at least some in-game time!\n\nGood luck with your escape!",r),this.creditsLabel.visible=!1,this.addChild(this.creditsLabel),this.visible=!1,this.soundMenu=new Aw("Sound Mode",["Enable Music","No Music"],(e=>this.soundMenuOption(e))),this.mainMenu=new Aw("Main Menu",["Start Game","Skip Intro","Options","Help!"],(e=>this.mainMenuOption(e))),this.optionsMenu=new Aw("Options",[{label:"Music",textRight:"Yes",stayOpen:!0},{label:"Person Mode",textRight:"2nd",textBelow:"Youwill be Thunder Girl",stayOpen:!0},"Back"],(e=>this.optionsOption(e))),this.updateOptionLabels(),this.addChild(this.optionsMenu),this.addChild(this.mainMenu),this.fader=new PIXI.Graphics,this.addChild(this.fader),this.addChild(this.soundMenu),this.resize(),window.addEventListener("keydown",(e=>this.keydown(e)),!1),window.addEventListener("keydown",(e=>this.keyup(e)),!1)}restartKeyOutTimeout(){this.keysOutTimeout&&(clearTimeout(this.keysOutTimeout),this.keysOutTimeout=void 0),this.keysOutCallback&&(this.keysOutTimeout=setTimeout((()=>{this.keysOutCallback(),this.keysOutCallback=void 0}),500))}keyup(e){this.restartKeyOutTimeout()}keydown(e){this.creditsLabel.visible&&(new ow(this.map).to({alpha:1},250).start(),new ow(this.creditsLabel).to({alpha:0},250).onComplete((()=>{this.mainMenu.show(),this.creditsLabel.visible=!1})).start()),0!=this.visible&&!this.finished&&this.started&&(this.restartKeyOutTimeout(),"Enter"!=e.key&&"ArrowRight"!=e.key&&" "!=e.key||this.showNextParagraph())}resize(){let e=window.innerWidth,t=window.innerHeight,i=e/t;this.chatBoxScale=Math.min(t/966,1),console.log(`Aspect ratio: ${i} for ${e}x${t}, chatBox scale: ${this.chatBoxScale}`),this.version.position.set(e-40,t-20);let r=this.map.texture.width,n=this.map.texture.height,o=Math.max(t/n,e/r);for(var s in this.map.scale.set(o,o),this.logo.scale.set(.4*this.chatBoxScale),this.logo.x=e/2,this.chatBox.scale.set(this.chatBoxScale),this.chatBox.x=e/2-this.chatBox.width/2,this.chatBox.y=this.chatBoxY=t-this.chatBox.height,null!=this.parent&&this.updateTransform(),this.photoX=e/2,this.photoY=t-160*this.chatBoxScale,this.photos)this.photos[s].anchor.set(.5,1),this.photos[s].scale.set(.75*this.chatBoxScale),this.photos[s].x=this.photoX+this.photoExtraX[s]*this.chatBoxScale,this.photos[s].y=this.photoY;this.creditsLabel.anchor.set(.5,.5),this.creditsLabel.scale.set(this.chatBoxScale),this.creditsLabel.position.set(e/2,t/2),this.fader.clear(),this.fader.beginFill(0),this.fader.drawRect(0,0,e,t),this.fader.endFill(),this.fader2.clear(),this.fader2.beginFill(0),this.fader2.drawRect(0,0,e,t),this.fader2.endFill(),this.soundMenu.x=this.optionsMenu.x=this.mainMenu.x=e/2,this.soundMenu.y=t/2,this.optionsMenu.y=this.mainMenu.y=.8*t,null!=this.parent&&this.updateTransform()}showPhoto(e,t){this.photoExtraX[e]=t,this.photos[e].visible=!0,this.photos[e].rotation=t>0?Math.PI/2:-Math.PI/2,this.photos[e].x=t>0?this.width+this.photos[e].width:-this.photos[e].width,this.photos[e].y=-this.photos[e].height,new ow(this.photos[e]).to({x:this.photoX+t*this.chatBoxScale,y:this.photoY,rotation:0},500).easing(iw.Quadratic.Out).start()}showText(e){this.chatBox.visible=!0,this.textBox.text=e,this.textBox.updateText(),this.chatBox.y=this.height,this.chatBox.alpha=1,new ow(this.chatBox).to({y:this.chatBoxY},500).easing(iw.Quartic.Out).start()}showNextParagraph(){if(0==this.chatBox.visible){if(!Rw[this.paragraphIndex])return this.finished=!0,this.keysOutCallback=()=>this.hide(250),void this.restartKeyOutTimeout();let e=Rw[this.paragraphIndex++];if(e.startsWith("[")){let t=parseInt(e.substring(1)),i=parseInt(e.substring(e.indexOf(",")+1));if(e=e.replace(/^\[.*\] */g,""),1==t)return Ow("music_gemini"),void setTimeout((()=>{this.showText(e),this.showPhoto(t,i)}),500);this.showPhoto(t,i)}this.showText(e),this.paragraphIndex==Rw.length&&(this.fader2.visible=!0,this.fader2.alpha=0,new ow(this.fader2).to({alpha:1},2e3).start())}else new ow(this.chatBox).to({alpha:0},180).easing(iw.Exponential.Out).onComplete((()=>{this.chatBox.visible=!1,this.showNextParagraph()})).start()}show(){this.visible=!0,this.soundMenu.show()}hide(e=500){new ow(this.fader).to({alpha:1},e).onComplete((()=>{Ow("music_tension"),this.visible=!1,this.callback()})).start(),Ew()}updateOptionLabels(){this.optionsMenu.setTextRight(0,bw()?"Yes":"No"),this.optionsMenu.setTextRight(1,this.adventure.thirdPerson?"2nd":"1st"),this.optionsMenu.setTextBelow(1,this.adventure.thirdPerson?"You will beThunder Girl":"Iwill beThunder Girl")}soundMenuOption(e){ww(0==e),xw(0==e),this.updateOptionLabels(),Ow("music_tension"),new ow(this.fader).to({alpha:0},500).start(),setTimeout((()=>this.mainMenu.show()),100)}optionsOption(e){switch(e){case 0:ww(!bw()),xw(bw()),bw()?Ow("music_tension"):Ew(),this.updateOptionLabels();break;case 1:this.adventure.thirdPerson=!this.adventure.thirdPerson,this.adventure.saveDefaultVariables(),this.updateOptionLabels();break;default:this.mainMenu.show()}}mainMenuOption(e){switch(e){case 0:this.started=!0,this.showNextParagraph();break;case 1:this.finished=!0,this.hide();break;case 2:this.optionsMenu.show();break;case 3:this.creditsLabel.alpha=0,this.creditsLabel.visible=!0,new ow(this.map).to({alpha:.25},250).start(),new ow(this.creditsLabel).to({alpha:1},250).start();break;default:this.mainMenu.show()}}}const Lw={guillotine:o("hwzqt"),guillotineHF:o("dzEUD"),guillotineH:o("3h3ny"),guillotineF:o("gGuSc"),guillotineFalling:o("gtcom"),guillotineFallingH:o("bOzvh"),guillotineFallingHF:o("jPTuP"),guillotineTable:o("kqGZc"),guillotineTableHF:o("fM2UY"),guillotineTableH:o("cs1fq"),guillotineTableF:o("ekuSj"),guillotineTableFalling:o("4WvsE"),guillotineTableFallingH:o("1aXZN"),guillotineTableFallingHF:o("kL685"),guillotineTableFallingF:o("6gG1Z"),guillotineBatmanH:o("eKWlY"),guillotineBatman:o("kcSIJ"),guillotineBatmanTableH:o("c0I6q"),guillotineBatmanPadlockOpenUp:o("igFQn"),guillotineBatmanStocksOpen:o("6Vxnn"),guillotineBatmanPadlockOpenDown:o("9SWp7"),guillotineBatmanBarInPadlock:o("a5wbl"),guillotineBatmanTable:o("4N3TR"),guillotineDead:o("97OJp"),guillotineDeadF:o("95v6M"),guillotineDeadTable:o("1P8On"),guillotineDeadTableF:o("5KCX6"),guillotineEscape:o("iDizv"),chatBox:o("eck8P"),photo1:o("3hfPB"),photo2:o("4zWuz"),map:o("5fkmL"),menu:o("cHSQY"),arrowRight:o("2Qh4D"),arrowLeft:o("jCXvp"),hand:o("9q1Y4"),logo:o("eyRjH"),noKeyOverlay:o("5LDGl")},jw={default:{fontFamily:"Overlock",fontSize:"28px",fill:"#cccccc",align:"left"},center:{align:"center"},right:{align:"right"},i:{fontStyle:"italic"},b:{fontWeight:"bold"},yellow:{fontWeight:"bold",fill:"#FFFF88"},white:{fontWeight:"bold",fill:"#FFFF"},grey:{fontWeight:"bold",fontStyle:"italic",fill:"#cccccc"},green:{fontWeight:"bold",fill:"#00FF00"},caption:{fontWeight:"bold",fill:"white",bottomMargin:8},prompt:{fontFamily:"Permanent Marker",fontSize:"28px",fill:"#FFFF88",bottomMargin:12},cursor:{},input:{fontFamily:"Permanent Marker",fontSize:"28px",fill:"#FFFF88"}};var Fw,Bw,Uw,Gw,Ww,zw,Hw,Xw,Yw,Vw,qw,Kw,Zw={};class Jw{print(e){qw.addText(e)}input(e,t){let i=e.split("|");qw.promptQuestion=i.slice(0,i.length-1).join("|"),qw.prompt=i[i.length-1],qw.startInput(t)}getKey(e){qw.waitForKey(e)}clear(){qw.clear()}transcript(){return qw.transcript}}function Qw(){Kw=new qx,Hw=new Dw(Kw,(()=>function(){console.log("Starting game, third person is",Kw.thirdPerson),new ow(zw).to({alpha:0},1e3).onComplete((()=>zw.visible=!1)).start(),Kw.addModule(Zx),Kw.addModule(tw);var e=!1,t=!1,i=!1;Kw.updateOverlay=function(){if(null!=Uw&&(Uw.destroy(),Uw=null),e){let e=Kx("%04d.png",Math.min(61,1+Math.floor(this.doomCounter)));(Uw=new s.Sprite(t?Xw.textures[e]:Yw.textures[e])).anchor.set(.5,0),Bw.addChild(Uw)}},setInterval((()=>{i=!i,(Kw.extraSpeed>0||i)&&(t=!t,Kw.updateOverlay())}),250),Kw.output=new Jw,Kw.showImage=function(t){e="guillotine"==t,"guillotine"==t&&(this.escaped?t="guillotineEscape":this.dead?t=this.feetOut?"guillotineDeadF":"guillotineDead":this.batmanManeuver?t=this.tableMoved?this.stocksOpen?"guillotineBatmanStocksOpen":this.padlockOpen?this.bladePosition<0?"guillotineBatmanPadlockOpenDown":"guillotineBatmanPadlockOpenUp":this.barUnderBlade?"guillotineBatmanBarInPadlock":this.handOut?"guillotineBatmanTableH":"guillotineBatmanTable":this.handOut?"guillotineBatmanH":"guillotineBatman":this.fallingBlade?(t="guillotineFalling",this.tableMoved?t=this.handOut?"guillotineTableFallingHF":"guillotineTableFallingF":this.handOut?t=this.feetOut?"guillotineFallingHF":"guillotineFallingH":this.feetOut&&(t="guillotineFallingF")):this.tableMoved?t=this.handOut?"guillotineTableHF":"guillotineTableF":this.handOut?t=this.feetOut?"guillotineHF":"guillotineH":this.feetOut&&(t="guillotineF"),Vw.visible="inventory"==Kw.findEntity("key").location),Zw[t]||console.error("Image",t,"not found"),Bw.texture=Zw[t],this.updateOverlay()},Kw.startGame()}())),Fw.stage.addChild(Hw),Hw.resize(),Hw.show()}window.onload=function(){dx.load({google:{families:["Overlock","Permanent Marker"]},active:()=>{!function(){function e(){const e=300,t=900;zw.clear(),zw.beginFill(0),zw.drawRect(0,0,window.innerWidth,window.innerHeight),zw.endFill();let i=!0,r=window.innerHeight,n=r/2160,o=Math.min(.5625*window.innerWidth,window.innerHeight),s=o-40*n,a=s+300*n+50*n,h=window.innerWidth-a-280*n;console.log("Text width",h),h<400&&(i=!1,h+=100);let u=Math.min(t,Math.max(e,h)),l=h<u?Math.min(1,h/e):h>u?Math.max(1,h/t):1;qw.width=u,qw.height=(window.innerHeight-32)/l,qw.scale.set(l),qw.x=a,qw.y=(window.innerHeight-qw.height*l)/2;let c=r/1600;Bw.scale.set(c),Bw.anchor.set(.5,0),Bw.position.set(o-window.innerHeight/2,0),Gw.scale.set(n),Gw.anchor.set(0,0),Gw.position.set(s,0),Ww.scale.set(n),Ww.anchor.set(1,0),Ww.position.set(window.innerWidth,0),Ww.visible=i,Hw&&Hw.resize()}(Fw=new s.Application({resolution:2,width:1200,height:960,autoResize:!0})).renderer.view.style.position="absolute",Fw.renderer.view.style.display="block",Fw.renderer.autoResize=!0,Fw.renderer.resize(window.innerWidth,window.innerHeight),document.body.appendChild(Fw.view),(qw=new bx(jw)).position.set(32,32),qw.height=window.innerHeight-64,qw.width=window.innerWidth-64,qw.cursorColor=16777096,qw.bottomMargin=0,Fw.stage.addChild(qw),window.onresize=()=>{Fw.renderer.resize(window.innerWidth,window.innerHeight),e()};let t=new s.Text("Loading ThunderGirl2...",{fill:"#FFFFFF",fontWeight:"bold"});for(var i of(t.anchor.set(1,1),t.position.set(window.innerWidth-80,window.innerHeight-40),Fw.stage.addChild(t),s.loader.add("frameLeft",o("3lgbd")).add("frameRight",o("dv6Fs")).add("atlasDots",o("3nvld")).add("atlasNoDots",o("5rILB")),Object.keys(Lw)))console.log("Adding",i,Lw[i]),s.loader.add(i,Lw[i]);s.loader.on("progress",(e=>{t.text=Kx("Loading %d%%...",Math.floor(e.progress))})).load((i=>{for(var r in console.log(i.resources),Bw=new s.Sprite(i.resources.guillotine.texture),Gw=new s.Sprite(i.resources.frameLeft.texture),Ww=new s.Sprite(i.resources.frameRight.texture),Xw=new s.Spritesheet(i.resources.atlasDots.texture.baseTexture,o("eyX3l")),Yw=new s.Spritesheet(i.resources.atlasNoDots.texture.baseTexture,o("ejeN4")),Fw.stage.addChild(Bw),Fw.stage.addChild(Gw),Fw.stage.addChild(Ww),zw=new s.Graphics,Fw.stage.addChild(zw),Lw)Zw[r]=i.resources[r].texture;(Vw=new s.Sprite(Zw.noKeyOverlay)).anchor.set(1,1),Vw.position.set(800,1600),Bw.addChild(Vw),e(),t.destroy(),Promise.all([new Promise((e=>Xw.parse(e))),new Promise((e=>Yw.parse(e)))]).then(Qw)})),document.addEventListener("wheel",(e=>{e.ctrlKey&&(e.preventDefault(),e.stopImmediatePropagation()),bx.mouseWheelEvent(e.deltaY)}))}()}})};